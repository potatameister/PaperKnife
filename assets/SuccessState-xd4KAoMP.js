import{u as k,C as v,h as y,j as e}from"./index-CrqUSg-E.js";import{u as j,r as S,i as D,af as z,ak as N,D as A,a3 as C,Z as P,m as F,w as $,V as B,t}from"./vendor-ui-D7-yJfeG.js";import{d as c,s as E}from"./PrivacyBadge-BHcAHnXd.js";function M({message:d,downloadUrl:s,fileName:o,onStartOver:p,showPreview:b=!0}){const x=j(),{setPipelineFile:g}=k(),l=v.isNativePlatform();S.useEffect(()=>{y(),localStorage.getItem("autoDownload")==="true"&&(async()=>{try{const w=await(await(await fetch(s)).blob()).arrayBuffer();await c(new Uint8Array(w),o,"application/pdf"),t.success("Auto-saved to device")}catch(n){console.error("Auto-download failed:",n)}})()},[s,o]);const u=async a=>{a.preventDefault();try{t.loading("Saving file...",{id:"save-action"});const i=await(await(await fetch(s)).blob()).arrayBuffer();await c(new Uint8Array(i),o,"application/pdf"),t.success(l?"File saved to Documents":"Download started",{id:"save-action"})}catch{t.error("Failed to save file",{id:"save-action"})}},f=async a=>{a.preventDefault();try{t.loading("Preparing to share...",{id:"share-action"});const i=await(await(await fetch(s)).blob()).arrayBuffer();await E(new Uint8Array(i),o,"application/pdf"),t.dismiss("share-action")}catch{t.error("Failed to share file",{id:"share-action"})}},m=[{name:"Compress",icon:P,path:"/compress",color:"text-amber-500",bg:"bg-amber-50 dark:bg-amber-900/20"},{name:"Protect",icon:F,path:"/protect",color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-900/20"},{name:"Split",icon:$,path:"/split",color:"text-rose-500",bg:"bg-rose-50 dark:bg-rose-900/20"},{name:"Metadata",icon:B,path:"/metadata",color:"text-purple-500",bg:"bg-purple-50 dark:bg-purple-900/20"}],h=async a=>{try{t.loading(`Preparing ${o} for ${a.name}...`,{id:"pipeline-load"});const i=await(await(await fetch(s)).blob()).arrayBuffer();g({buffer:new Uint8Array(i),name:o}),t.success(`Sent to ${a.name}`,{id:"pipeline-load"}),x(a.path)}catch(r){console.error("Pipeline error:",r),t.error("Failed to pipeline file.",{id:"pipeline-load"})}};return e.jsxs("div",{className:"animate-in slide-in-from-bottom duration-500 fade-in space-y-6",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 p-3 md:p-4 rounded-2xl flex items-center justify-center gap-2 font-bold text-xs md:text-sm border border-green-100 dark:border-green-900/30",children:[e.jsx(D,{size:16})," ",d]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex gap-3",children:[b&&e.jsxs("button",{onClick:()=>window.open(s,"_blank"),className:"flex-1 bg-white dark:bg-zinc-900 text-gray-900 dark:text-white border border-gray-200 dark:border-zinc-800 p-4 rounded-2xl md:rounded-3xl shadow-sm font-black text-sm md:text-xl tracking-tight transition-all hover:bg-gray-50 active:scale-95 flex items-center justify-center gap-2",children:[e.jsx(z,{size:20})," Preview"]}),e.jsxs("button",{onClick:f,className:"flex-1 bg-rose-50 dark:bg-rose-900/20 text-rose-500 border border-rose-100 dark:border-rose-900/30 p-4 rounded-2xl md:rounded-3xl shadow-sm font-black text-sm md:text-xl tracking-tight transition-all active:scale-95 flex items-center justify-center gap-2",children:[e.jsx(N,{size:20})," Share"]})]}),e.jsxs("button",{onClick:u,className:"w-full bg-gray-900 dark:bg-white text-white dark:text-black p-4 md:p-6 rounded-2xl md:rounded-3xl shadow-xl font-black text-lg md:text-xl tracking-tight transition-all hover:scale-[1.01] active:scale-95 flex items-center justify-center gap-3",children:[e.jsx(A,{size:24})," ",l?"Save to Device":"Download"]})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-100 dark:border-zinc-800",children:[e.jsxs("p",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400 mb-4 flex items-center gap-2",children:[e.jsx(C,{size:12})," Next Step (Pipeline)"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:m.map(a=>e.jsxs("button",{onClick:()=>h(a),className:"flex flex-col items-center gap-2 p-4 bg-white dark:bg-zinc-900 border border-gray-100 dark:border-zinc-800 rounded-2xl hover:border-rose-500 transition-all group",children:[e.jsx("div",{className:`p-2 rounded-xl ${a.bg} ${a.color} group-hover:scale-110 transition-transform`,children:e.jsx(a.icon,{size:18})}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-tighter dark:text-zinc-300",children:a.name})]},a.name))})]}),e.jsx("button",{onClick:p,className:"w-full mt-4 py-2 text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 font-bold text-xs uppercase tracking-[0.2em]",children:"Start Over"})]})}export{M as S};
