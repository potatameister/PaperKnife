import{g as i,G as d}from"./pdf-viewer-DFtpL4X_.js";const p="/PaperKnife/assets/pdf.worker.min-LyOxJPrg.mjs";d.workerSrc=p;const f=async t=>{const a=await t.arrayBuffer();return i({data:a,cMapUrl:`${window.location.origin}/PaperKnife/cmaps/`,cMapPacked:!0}).promise},u=async(t,a,e=1.5)=>{try{const r=await t.getPage(a),n=window.devicePixelRatio||1,o=r.getViewport({scale:e*n}),s=document.createElement("canvas"),c=s.getContext("2d");if(!c)throw new Error("Canvas context not available");return s.height=o.height,s.width=o.width,await r.render({canvasContext:c,viewport:o,intent:"display"}).promise,s.toDataURL("image/jpeg",.9)}catch(r){return console.error(`Error rendering page ${a}:`,r),""}},l=async t=>{try{const a=i({data:await t.arrayBuffer(),cMapUrl:`${window.location.origin}/PaperKnife/cmaps/`,cMapPacked:!0});a.onPassword=()=>{throw new Error("PASSWORD_REQUIRED")};const e=await a.promise;return{thumbnail:await u(e,1),pageCount:e.numPages,isLocked:!1}}catch(a){return a.message==="PASSWORD_REQUIRED"||a.name==="PasswordException"?{thumbnail:"",pageCount:0,isLocked:!0}:{thumbnail:"",pageCount:0,isLocked:!1}}},m=async(t,a)=>{try{const e=await t.arrayBuffer(),n=await i({data:e,password:a,cMapUrl:`${window.location.origin}/PaperKnife/cmaps/`,cMapPacked:!0}).promise;return{thumbnail:await u(n,1),pageCount:n.numPages,isLocked:!1,success:!0,pdfDoc:n}}catch{return{thumbnail:"",pageCount:0,isLocked:!0,success:!1}}};export{l as g,f as l,u as r,m as u};
