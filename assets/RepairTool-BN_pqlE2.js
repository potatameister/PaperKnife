import{a as b,j as e,W as h,d as g,t as m}from"./index-Da24N2MR.js";import{r as t}from"./utilities-DaVU6ayd.js";import{P as y}from"./pdf-core-gCM2Eau9.js";import{T as j,L as N,P as v}from"./PrivacyBadge-BDyhUagy.js";import{S as k}from"./SuccessState-C5HHqp5o.js";/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=b("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);function z(){const o=t.useRef(null),[s,i]=t.useState(!1),[l,n]=t.useState(null),[p,u]=t.useState(""),f=async r=>{if(r.type==="application/pdf"){i(!0),u(r.name);try{const a=await r.arrayBuffer(),x=await(await y.load(a,{ignoreEncryption:!0,throwOnInvalidObject:!1})).save(),c=new Blob([x],{type:"application/pdf"}),d=URL.createObjectURL(c);n(d),g({name:`repaired-${r.name}`,tool:"Repair",size:c.size,resultUrl:d}),m.success("PDF rebuilt successfully!")}catch(a){m.error(`Could not repair PDF: ${a.message}`)}finally{i(!1)}}};return e.jsx("div",{className:"flex-1",children:e.jsxs("main",{className:"max-w-4xl mx-auto px-6 py-6 md:py-10",children:[e.jsx(j,{title:"Repair",highlight:"PDF",description:"Attempt to fix corrupted or unreadable PDF files by rebuilding their internal structure."}),e.jsx("input",{type:"file",accept:".pdf",className:"hidden",ref:o,onChange:r=>{var a;return((a=r.target.files)==null?void 0:a[0])&&f(r.target.files[0])}}),l?e.jsx(k,{message:"Reconstruction Complete!",downloadUrl:l,fileName:`repaired-${p}`,onStartOver:()=>n(null)}):e.jsx("div",{onClick:()=>{var r;return!s&&((r=o.current)==null?void 0:r.click())},className:`border-4 border-dashed border-gray-200 dark:border-zinc-800 rounded-[2.5rem] bg-white/50 dark:bg-zinc-900/50 p-20 text-center hover:border-rose-300 dark:hover:border-rose-900 transition-all cursor-pointer group ${s?"opacity-50":""}`,children:s?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(N,{size:48,className:"text-rose-500 animate-spin mb-4"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Rebuilding PDF..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-24 h-24 bg-rose-100 dark:bg-rose-900/30 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:e.jsx(h,{size:40})}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Select Corrupted PDF"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Tap to upload and attempt repair"})]})}),e.jsxs("div",{className:"mt-8 p-6 bg-amber-50 dark:bg-amber-900/10 rounded-2xl border border-amber-100 dark:border-amber-900/20 flex items-start gap-4",children:[e.jsx(w,{className:"text-amber-500 shrink-0",size:20}),e.jsxs("div",{className:"text-xs text-amber-700 dark:text-amber-400 leading-relaxed",children:[e.jsx("p",{className:"font-bold mb-1 uppercase",children:"How it works:"}),"PaperKnife uses a safe-load algorithm to bypass minor corruption in the PDF stream and generates a fresh Cross-Reference Table. This can fix files that refuse to open in some viewers. Note: Highly corrupted files with missing data may still fail."]})]}),e.jsx(v,{})]})})}export{z as default};
