import{C as I,j as e,a as D}from"./index-BXvq8MG4.js";import{r as x,U as F,P as z,E as w,X as R,Y as U,_ as G,$ as L}from"./vendor-ui-BR-XW_se.js";import{P as B}from"./pdf-lib-core-B0uti0Qf.js";import{u as E,a as N,D as T,c as $,S as A,v as W,s as J,K,P as M,b as O,d as X,C as V}from"./vendor-utils-C0MK5Hv0.js";import{S as Y}from"./SuccessState-ChIgbj0b.js";import{N as _,P as q}from"./NativeToolLayout-Q75rcqXi.js";import"./tesseract-core-CiogB7-T.js";import"./pdfjs-viewer-BENO9Ct1.js";function H({id:l,img:r,onRemove:i}){const{attributes:g,listeners:p,setNodeRef:c,transform:d,transition:m,isDragging:u}=X({id:l}),f={transform:V.Transform.toString(d),transition:m,zIndex:u?50:0};return e.jsxs("div",{ref:c,style:f,className:`flex items-center gap-3 p-3 bg-white dark:bg-zinc-900 rounded-2xl border transition-colors shadow-sm group touch-none relative ${u?"border-rose-500 shadow-xl scale-[1.02]":"border-gray-100 dark:border-white/5"}`,children:[e.jsx("div",{...g,...p,className:"p-2 cursor-grab text-rose-400 hover:text-rose-600 active:scale-90 transition-transform",children:e.jsx(G,{size:20})}),e.jsx("div",{className:"w-12 h-16 bg-gray-100 dark:bg-black rounded-lg overflow-hidden shrink-0 border border-gray-200 dark:border-zinc-800",children:e.jsx("img",{src:r.preview,alt:"P",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"font-bold text-sm truncate dark:text-white",children:r.file.name})}),e.jsx("button",{onClick:()=>i(l),className:"p-2 text-gray-400 hover:text-rose-500",children:e.jsx(L,{size:18})})]})}function ie(){const l=x.useRef(null),[r,i]=x.useState([]),[g,p]=x.useState(!1),[c,d]=x.useState(null),[m,u]=x.useState("paperknife-images-to-pdf"),f=I.isNativePlatform(),k=E(N(M),N(K,{coordinateGetter:J})),P=t=>{const a=Array.from(t).filter(s=>s.type.startsWith("image/")).map(s=>({id:Math.random().toString(36).substr(2,9),file:s,preview:URL.createObjectURL(s)}));if(a.length===0){w.error("Select images (JPG, PNG, WebP)");return}i(s=>[...s,...a]),d(null)},S=t=>{const{active:a,over:s}=t;a.id!==s?.id&&i(o=>{const b=o.findIndex(n=>n.id===a.id),h=o.findIndex(n=>n.id===s?.id);return O(o,b,h)})},C=async()=>{if(r.length!==0){p(!0),await new Promise(t=>setTimeout(t,100));try{const t=await B.create();for(const b of r){const h=await b.file.arrayBuffer();let n;b.file.type.includes("png")?n=await t.embedPng(h):n=await t.embedJpg(h);const{width:y,height:v}=n.scale(1);t.addPage([y,v]).drawImage(n,{x:0,y:0,width:y,height:v})}const a=await t.save(),s=new Blob([a],{type:"application/pdf"}),o=URL.createObjectURL(s);d(o),D({name:`${m}.pdf`,tool:"Image to PDF",size:s.size,resultUrl:o})}catch(t){w.error(`Error: ${t.message}`)}finally{p(!1)}}},j=()=>e.jsx("button",{onClick:C,disabled:g||r.length===0,className:`w-full bg-rose-500 hover:bg-rose-600 text-white font-black uppercase tracking-widest transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-3 shadow-xl shadow-rose-500/20 ${f?"py-4 rounded-2xl text-sm":"p-6 rounded-3xl text-xl"}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"animate-spin"})," Working..."]}):e.jsxs(e.Fragment,{children:["Generate PDF ",e.jsx(U,{size:18})]})});return e.jsxs(_,{title:"Image to PDF",description:"Convert photos and images into a professional PDF.",actions:r.length>0&&!c&&e.jsx(j,{}),children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",className:"hidden",ref:l,onChange:t=>t.target.files&&P(t.target.files)}),r.length===0?e.jsxs("div",{onClick:()=>l.current?.click(),className:"border-4 border-dashed border-gray-100 dark:border-zinc-900 rounded-[2.5rem] p-12 text-center hover:bg-rose-50 dark:hover:bg-rose-900/10 transition-all cursor-pointer group",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:e.jsx(F,{size:32})}),e.jsx("h3",{className:"text-xl font-bold dark:text-white mb-2",children:"Select Images"}),e.jsx("p",{className:"text-sm text-gray-400",children:"JPG, PNG, or WebP"})]}):c?e.jsx(Y,{message:"PDF Ready!",downloadUrl:c,fileName:`${m}.pdf`,onStartOver:()=>{i([]),d(null)}}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center px-1",children:[e.jsxs("p",{className:"text-[10px] font-black uppercase text-gray-400",children:[r.length," Images"]}),e.jsx("button",{onClick:()=>i([]),className:"text-[10px] font-black uppercase text-rose-500/60",children:"Clear"})]}),e.jsx(T,{sensors:k,collisionDetection:$,onDragEnd:S,children:e.jsx(A,{items:r.map(t=>t.id),strategy:W,children:e.jsx("div",{className:"space-y-2",children:r.map(t=>e.jsx(H,{id:t.id,img:t,onRemove:a=>i(s=>s.filter(o=>o.id!==a))},t.id))})})}),e.jsxs("button",{onClick:()=>l.current?.click(),className:"w-full py-3 border-2 border-dashed border-gray-200 dark:border-zinc-800 rounded-2xl text-gray-400 font-bold text-sm flex items-center justify-center gap-2 hover:border-rose-500 hover:text-rose-500 transition-all",children:[e.jsx(z,{size:16})," Add More"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-2",children:"Filename"}),e.jsx("input",{type:"text",value:m,onChange:t=>u(t.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm"})]}),!f&&e.jsx(j,{})]}),e.jsx(q,{})]})}export{ie as default};
