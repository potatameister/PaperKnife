import{j as e,d as I,a as z,D,t as v,b as C}from"./index-C7GXwjKo.js";import{r as g,u as F,c as w,D as R,d as G,S as T,v as L,s as U,K as B,P as $,e as A,f as E,C as J}from"./utilities-DaVU6ayd.js";import{P as K}from"./pdf-core-gCM2Eau9.js";import{T as O,L as M,P as W}from"./PrivacyBadge-5ZQgwGzX.js";import{S as H}from"./SuccessState-ClihEs1Z.js";import{P as V}from"./pen-CThdwBMP.js";import{G as X,X as q}from"./x-D6roiWHv.js";function Q({id:l,img:r,onRemove:n}){const{attributes:p,listeners:f,setNodeRef:u,transform:d,transition:m,isDragging:b}=E({id:l}),h={transform:J.Transform.toString(d),transition:m,zIndex:b?50:0};return e.jsxs("div",{ref:u,style:h,className:`flex items-center gap-3 p-3 bg-white dark:bg-zinc-900 rounded-2xl border transition-colors shadow-sm group touch-none relative ${b?"border-rose-300 dark:border-rose-800 shadow-xl scale-[1.02]":"border-gray-100 dark:border-zinc-800"}`,children:[e.jsx("div",{...p,...f,className:"p-2 cursor-grab text-rose-400 hover:text-rose-600 dark:text-rose-500/50 dark:hover:text-rose-400 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg transition-colors",children:e.jsx(X,{size:20})}),e.jsx("div",{className:"w-12 h-16 bg-gray-100 dark:bg-zinc-800 rounded-lg overflow-hidden shrink-0 border border-gray-200 dark:border-zinc-700",children:e.jsx("img",{src:r.preview,alt:"Preview",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-bold text-sm truncate dark:text-zinc-200",children:r.file.name}),e.jsxs("p",{className:"text-[10px] text-gray-400 uppercase font-black",children:[(r.file.size/1024).toFixed(1)," KB"]})]}),e.jsx("button",{onClick:()=>n(l),className:"p-2 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-full text-gray-400 hover:text-rose-500 transition-colors",children:e.jsx(q,{size:18})})]})}function oe(){const l=g.useRef(null),[r,n]=g.useState([]),[p,f]=g.useState(!1),[u,d]=g.useState(null),[m,b]=g.useState("paperknife-images-to-pdf"),h=F(w($),w(B,{coordinateGetter:U})),k=s=>{const a=Array.from(s).filter(t=>t.type.startsWith("image/")).map(t=>({id:Math.random().toString(36).substr(2,9),file:t,preview:URL.createObjectURL(t)}));if(a.length===0){v.error("Please select image files (JPG, PNG, WebP)");return}n(t=>[...t,...a]),d(null)},N=s=>{const{active:a,over:t}=s;a.id!==(t==null?void 0:t.id)&&n(c=>{const i=c.findIndex(o=>o.id===a.id),x=c.findIndex(o=>o.id===(t==null?void 0:t.id));return A(c,i,x)})},P=s=>{n(a=>a.filter(t=>t.id!==s)),d(null)},S=async()=>{if(r.length!==0){f(!0),await new Promise(s=>setTimeout(s,100));try{const s=await K.create();for(const i of r){const x=await i.file.arrayBuffer();let o;if(i.file.type==="image/jpeg"||i.file.type==="image/jpg")o=await s.embedJpg(x);else if(i.file.type==="image/png")o=await s.embedPng(x);else try{o=await s.embedJpg(x)}catch{console.warn(`Skipping unsupported image type: ${i.file.type}`);continue}const{width:y,height:j}=o.scale(1);s.addPage([y,j]).drawImage(o,{x:0,y:0,width:y,height:j})}const a=await s.save(),t=new Blob([a],{type:"application/pdf"}),c=URL.createObjectURL(t);d(c),C({name:`${m}.pdf`,tool:"Image to PDF",size:t.size,resultUrl:c})}catch(s){v.error(`Failed to convert: ${s.message}`)}finally{f(!1)}}};return e.jsx("div",{className:"flex-1",children:e.jsxs("main",{className:"max-w-4xl mx-auto px-6 py-6 md:py-10",children:[e.jsx(O,{title:"Image to",highlight:"PDF",description:"Convert your photos and images into a professional PDF document. Processed locally."}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",className:"hidden",ref:l,onChange:s=>s.target.files&&k(s.target.files)}),e.jsx("div",{className:"space-y-6",children:r.length===0?e.jsxs("div",{onClick:()=>{var s;return(s=l.current)==null?void 0:s.click()},className:"border-4 border-dashed border-gray-200 dark:border-zinc-800 rounded-[2.5rem] bg-white/50 dark:bg-zinc-900/50 p-20 text-center hover:border-rose-300 dark:hover:border-rose-900 transition-all cursor-pointer group",children:[e.jsx("div",{className:"w-24 h-24 bg-rose-100 dark:bg-rose-900/30 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:e.jsx(I,{size:40})}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Select Images"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Tap to upload JPG, PNG, or WebP"})]}):u?e.jsx(H,{message:"PDF generated from images!",downloadUrl:u,fileName:`${m}.pdf`,onStartOver:()=>{n([]),d(null)}}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center px-1",children:[e.jsxs("p",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400",children:[r.length," Images Selected"]}),e.jsx("button",{onClick:()=>n([]),className:"text-[10px] font-black uppercase tracking-widest text-rose-500/60 hover:text-rose-500 transition-colors",children:"Clear All"})]}),e.jsx(R,{sensors:h,collisionDetection:G,onDragEnd:N,children:e.jsx(T,{items:r.map(s=>s.id),strategy:L,children:e.jsx("div",{className:"space-y-2",children:r.map(s=>e.jsx(Q,{id:s.id,img:s,onRemove:P},s.id))})})}),e.jsxs("button",{onClick:()=>{var s;return(s=l.current)==null?void 0:s.click()},className:"w-full py-3 border-2 border-dashed border-gray-200 dark:border-zinc-700 rounded-2xl text-gray-400 hover:text-rose-500 transition-all font-bold text-sm flex items-center justify-center gap-2",children:[e.jsx(z,{size:16})," Add More Images"]}),e.jsxs("div",{className:"p-6 bg-white dark:bg-zinc-900 rounded-3xl border border-gray-100 dark:border-zinc-800 shadow-sm",children:[e.jsxs("label",{className:"block text-[10px] font-black uppercase tracking-widest text-gray-400 mb-3 flex items-center gap-2",children:[e.jsx(V,{size:12})," Output Filename"]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 dark:bg-black rounded-2xl px-4 py-3 border border-gray-100 dark:border-zinc-800 focus-within:border-rose-500 transition-colors",children:[e.jsx("input",{type:"text",value:m,onChange:s=>b(s.target.value),className:"bg-transparent outline-none flex-1 text-sm font-bold dark:text-white"}),e.jsx("span",{className:"text-gray-400 text-xs font-bold",children:".pdf"})]})]}),e.jsxs("button",{onClick:S,disabled:p,className:"w-full bg-rose-500 hover:bg-rose-600 text-white p-6 rounded-3xl shadow-xl shadow-rose-200 dark:shadow-none font-black text-xl tracking-tight transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-3",children:[p?e.jsx(M,{className:"animate-spin"}):e.jsx(D,{}),"Generate PDF"]})]})}),e.jsx(W,{})]})})}export{oe as default};
