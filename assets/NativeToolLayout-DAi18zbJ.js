const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-BHdxRxAb.js","assets/index-ef-SArAk.js","assets/vendor-ui-oQLMzIE7.js","assets/index-fzw-TEt_.css","assets/pdfjs-viewer-BENO9Ct1.js"])))=>i.map(i=>d[i]);
import{g as m,G as b}from"./pdfjs-viewer-BENO9Ct1.js";import{r as k,_ as y,C as g,j as t}from"./index-ef-SArAk.js";import{u as h,A as x,ag as v,ah as j}from"./vendor-ui-oQLMzIE7.js";function P(e){e.CapacitorUtils.Synapse=new Proxy({},{get(r,a){return new Proxy({},{get(s,i){return(n,d,l)=>{const o=e.Capacitor.Plugins[a];if(o===void 0){l(new Error(`Capacitor plugin ${a} not found`));return}if(typeof o[i]!="function"){l(new Error(`Method ${i} not found in Capacitor plugin ${a}`));return}(async()=>{try{const c=await o[i](n);d(c)}catch(c){l(c)}})()}}})}})}function N(e){e.CapacitorUtils.Synapse=new Proxy({},{get(r,a){return e.cordova.plugins[a]}})}function C(e=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!e?P(window):window.cordova!==void 0&&N(window))}var u;(function(e){e.Documents="DOCUMENTS",e.Data="DATA",e.Library="LIBRARY",e.Cache="CACHE",e.External="EXTERNAL",e.ExternalStorage="EXTERNAL_STORAGE",e.ExternalCache="EXTERNAL_CACHE",e.LibraryNoCloud="LIBRARY_NO_CLOUD",e.Temporary="TEMPORARY"})(u||(u={}));var p;(function(e){e.UTF8="utf8",e.ASCII="ascii",e.UTF16="utf16"})(p||(p={}));const E=k("Filesystem",{web:()=>y(()=>import("./web-BHdxRxAb.js"),__vite__mapDeps([0,1,2,3,4])).then(e=>new e.FilesystemWeb)});C();const R="/PaperKnife/assets/pdf.worker.min-LyOxJPrg.mjs";b.workerSrc=R;const S=async(e,r,a)=>{if(g.isNativePlatform())try{const s=typeof e=="string"?e.split(",")[1]:btoa(e.reduce((i,n)=>i+String.fromCharCode(n),""));return await E.writeFile({path:r,data:s,directory:u.Documents,recursive:!0}),!0}catch(s){throw console.error("Download error:",s),s}else{const s=typeof e=="string"?await(await fetch(e)).blob():new Blob([e],{type:a}),i=URL.createObjectURL(s),n=document.createElement("a");return n.href=i,n.download=r,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(i),!0}},D=async e=>{const r=await e.arrayBuffer();try{return await m({data:r,cMapUrl:`${window.location.origin}/PaperKnife/cmaps/`,cMapPacked:!0}).promise}catch(a){if(a.name==="PasswordException")throw a;return await m({data:r,cMapUrl:`${window.location.origin}/PaperKnife/cmaps/`,cMapPacked:!0,stopAtErrors:!1}).promise}},f=async(e,r,a=1)=>{try{const s=await e.getPage(r),i=s.getViewport({scale:a}),n=300,d=Math.min(n/i.width,n/i.height),l=s.getViewport({scale:a*d*(window.devicePixelRatio||1)}),o=document.createElement("canvas"),c=o.getContext("2d",{alpha:!1});if(!c)throw new Error("Canvas context not available");o.height=l.height,o.width=l.width,c.fillStyle="#ffffff",c.fillRect(0,0,o.width,o.height),await s.render({canvasContext:c,viewport:l,intent:"display"}).promise;const w=o.toDataURL("image/jpeg",.85);return o.width=0,o.height=0,w}catch(s){return console.error(`Error rendering page ${r}:`,s),""}},_=async e=>{try{const r=m({data:await e.arrayBuffer(),cMapUrl:`${window.location.origin}/PaperKnife/cmaps/`,cMapPacked:!0});r.onPassword=()=>{throw new Error("PASSWORD_REQUIRED")};const a=await r.promise;return{thumbnail:await f(a,1),pageCount:a.numPages,isLocked:!1}}catch(r){return r.message==="PASSWORD_REQUIRED"||r.name==="PasswordException"?{thumbnail:"",pageCount:0,isLocked:!0}:{thumbnail:"",pageCount:0,isLocked:!1}}},F=async(e,r)=>{try{const a=await e.arrayBuffer(),i=await m({data:a,password:r,cMapUrl:`${window.location.origin}/PaperKnife/cmaps/`,cMapPacked:!0}).promise;return{thumbnail:await f(i,1),pageCount:i.numPages,isLocked:!1,success:!0,pdfDoc:i}}catch{return{thumbnail:"",pageCount:0,isLocked:!0,success:!1}}};function M(){return t.jsxs("div",{className:"mt-8 flex items-center justify-center gap-2 text-xs font-bold uppercase tracking-widest text-gray-400 dark:text-zinc-600",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"100% Client-Side Processing"]})}function T({title:e,highlight:r,description:a}){const s=h(),i=g.isNativePlatform();return t.jsxs("div",{className:"relative text-center mb-8 md:mb-12",children:[i&&t.jsx("button",{onClick:()=>s("/"),className:"absolute left-0 top-0 p-3 bg-gray-50 dark:bg-zinc-900 rounded-2xl text-gray-500 hover:text-rose-500 transition-colors md:hidden",children:t.jsx(x,{size:20})}),t.jsxs("h2",{className:"text-3xl md:text-5xl font-black mb-3 md:mb-4 dark:text-white px-10",children:[e," ",t.jsxs("span",{className:"text-rose-500",children:[r,"."]})]}),t.jsx("p",{className:"text-sm md:text-base text-gray-500 dark:text-zinc-400 max-w-lg mx-auto leading-relaxed",children:a})]})}const B=({title:e,description:r,icon:a,children:s,actions:i,onBack:n})=>{const d=h();return t.jsxs("div",{className:"flex flex-col min-h-screen bg-[#FDFDFD] dark:bg-[#1C1B1F]",children:[t.jsxs("header",{className:"px-4 pt-safe pb-2 flex items-center justify-between sticky top-0 z-50 bg-white/80 dark:bg-[#1C1B1F]/80 backdrop-blur-md border-b border-gray-100 dark:border-white/5 md:hidden",children:[t.jsxs("div",{className:"flex items-center gap-4 py-2",children:[t.jsx("button",{onClick:n||(()=>d(-1)),className:"p-2 rounded-full active:bg-gray-100 dark:active:bg-white/10 transition-colors",children:t.jsx(x,{size:24,className:"dark:text-white"})}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("h1",{className:"text-lg font-bold tracking-tight dark:text-white leading-none",children:e}),t.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-rose-500 mt-1",children:"PaperKnife Node"})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{className:"p-2 rounded-full active:bg-gray-100 dark:active:bg-white/10 transition-colors",children:t.jsx(v,{size:20,className:"text-gray-500 dark:text-gray-400"})}),t.jsx("button",{className:"p-2 rounded-full active:bg-gray-100 dark:active:bg-white/10 transition-colors",children:t.jsx(j,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})]}),t.jsxs("main",{className:"flex-1 flex flex-col p-4 md:p-8 max-w-5xl mx-auto w-full",children:[t.jsx("div",{className:"hidden md:block mb-8",children:t.jsx(T,{title:e,description:r})}),t.jsx("div",{className:"md:hidden mb-6 mt-2",children:t.jsxs("div",{className:"flex items-center gap-4 p-6 bg-rose-500 rounded-[2rem] text-white shadow-lg shadow-rose-500/20",children:[t.jsx("div",{className:"p-3 bg-white/20 rounded-2xl",children:t.jsx(a,{size:32,strokeWidth:2.5})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-black uppercase tracking-widest opacity-80",children:"Active Utility"}),t.jsx("h2",{className:"text-xl font-black tracking-tight",children:e})]})]})}),t.jsx("div",{className:"flex-1",children:s})]}),i&&t.jsx("div",{className:"md:hidden sticky bottom-0 left-0 right-0 p-4 bg-white/80 dark:bg-[#1C1B1F]/80 backdrop-blur-md border-t border-gray-100 dark:border-white/5 pb-safe",children:i})]})};export{p as E,B as N,M as P,S as d,_ as g,D as l,f as r,F as u};
