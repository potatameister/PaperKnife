import{u,C as k,h as v,j as e}from"./index-DUUuY0BK.js";import{u as w,r as y,i as j,ae as N,af as S,D as z,Y as C,Z as P,O as D,k as F,t as A,E as r}from"./vendor-ui-BlqHMN4k.js";import{d as E,s as $}from"./PrivacyBadge-CKSPGyP9.js";function Z({message:c,downloadUrl:i,fileName:o,onStartOver:d,showPreview:p=!0}){const b=w(),{setPipelineFile:x}=u(),n=k.isNativePlatform();y.useEffect(()=>{v()},[]);const g=async a=>{a.preventDefault();try{r.loading("Saving file...",{id:"save-action"});const s=await(await(await fetch(i)).blob()).arrayBuffer();await E(new Uint8Array(s),o,"application/pdf"),r.success(n?"File saved to Documents":"Download started",{id:"save-action"})}catch{r.error("Failed to save file",{id:"save-action"})}},m=async a=>{a.preventDefault();try{r.loading("Preparing to share...",{id:"share-action"});const s=await(await(await fetch(i)).blob()).arrayBuffer();await $(new Uint8Array(s),o,"application/pdf"),r.dismiss("share-action")}catch{r.error("Failed to share file",{id:"share-action"})}},h=[{name:"Compress",icon:P,path:"/compress",color:"text-amber-500",bg:"bg-amber-50 dark:bg-amber-900/20"},{name:"Protect",icon:D,path:"/protect",color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-900/20"},{name:"Split",icon:F,path:"/split",color:"text-rose-500",bg:"bg-rose-50 dark:bg-rose-900/20"},{name:"Metadata",icon:A,path:"/metadata",color:"text-purple-500",bg:"bg-purple-50 dark:bg-purple-900/20"}],f=async a=>{try{r.loading(`Preparing ${o} for ${a.name}...`,{id:"pipeline-load"});const s=await(await(await fetch(i)).blob()).arrayBuffer();x({buffer:new Uint8Array(s),name:o}),r.success(`Sent to ${a.name}`,{id:"pipeline-load"}),b(a.path)}catch(t){console.error("Pipeline error:",t),r.error("Failed to pipeline file.",{id:"pipeline-load"})}};return e.jsxs("div",{className:"animate-in slide-in-from-bottom duration-500 fade-in space-y-6",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 p-3 md:p-4 rounded-2xl flex items-center justify-center gap-2 font-bold text-xs md:text-sm border border-green-100 dark:border-green-900/30",children:[e.jsx(j,{size:16})," ",c]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex gap-3",children:[p&&e.jsxs("button",{onClick:()=>window.open(i,"_blank"),className:"flex-1 bg-white dark:bg-zinc-900 text-gray-900 dark:text-white border border-gray-200 dark:border-zinc-800 p-4 rounded-2xl md:rounded-3xl shadow-sm font-black text-sm md:text-xl tracking-tight transition-all hover:bg-gray-50 active:scale-95 flex items-center justify-center gap-2",children:[e.jsx(N,{size:20})," Preview"]}),e.jsxs("button",{onClick:m,className:"flex-1 bg-rose-50 dark:bg-rose-900/20 text-rose-500 border border-rose-100 dark:border-rose-900/30 p-4 rounded-2xl md:rounded-3xl shadow-sm font-black text-sm md:text-xl tracking-tight transition-all active:scale-95 flex items-center justify-center gap-2",children:[e.jsx(S,{size:20})," Share"]})]}),e.jsxs("button",{onClick:g,className:"w-full bg-gray-900 dark:bg-white text-white dark:text-black p-4 md:p-6 rounded-2xl md:rounded-3xl shadow-xl font-black text-lg md:text-xl tracking-tight transition-all hover:scale-[1.01] active:scale-95 flex items-center justify-center gap-3",children:[e.jsx(z,{size:24})," ",n?"Save to Device":"Download"]})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-100 dark:border-zinc-800",children:[e.jsxs("p",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400 mb-4 flex items-center gap-2",children:[e.jsx(C,{size:12})," Next Step (Pipeline)"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:h.map(a=>e.jsxs("button",{onClick:()=>f(a),className:"flex flex-col items-center gap-2 p-4 bg-white dark:bg-zinc-900 border border-gray-100 dark:border-zinc-800 rounded-2xl hover:border-rose-500 transition-all group",children:[e.jsx("div",{className:`p-2 rounded-xl ${a.bg} ${a.color} group-hover:scale-110 transition-transform`,children:e.jsx(a.icon,{size:18})}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-tighter dark:text-zinc-300",children:a.name})]},a.name))})]}),e.jsx("button",{onClick:d,className:"w-full mt-4 py-2 text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 font-bold text-xs uppercase tracking-[0.2em]",children:"Start Over"})]})}export{Z as S};
