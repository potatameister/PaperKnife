import{j as e,a as I}from"./index-D8gYrfEJ.js";import{r as g,a9 as z,P as D,a4 as C,$ as F,D as R,E as v,a1 as T,a2 as G}from"./vendor-ui-B7y8O6hM.js";import{P as U}from"./pdf-lib-core-C2o4pxLU.js";import{u as B,a as w,D as L,c as $,S as E,v as A,s as J,K,P as O,b as M,d as W,C as H}from"./vendor-utils-DxGvWCbh.js";import{T as V,P as X}from"./ToolHeader-Dsv0oLd3.js";import{S as q}from"./SuccessState-C5kS6smc.js";import"./tesseract-core-CZ-MX445.js";import"./pdfjs-viewer-BENO9Ct1.js";function Q({id:l,img:t,onRemove:n}){const{attributes:p,listeners:f,setNodeRef:u,transform:d,transition:m,isDragging:b}=W({id:l}),h={transform:H.Transform.toString(d),transition:m,zIndex:b?50:0};return e.jsxs("div",{ref:u,style:h,className:`flex items-center gap-3 p-3 bg-white dark:bg-zinc-900 rounded-2xl border transition-colors shadow-sm group touch-none relative ${b?"border-rose-300 dark:border-rose-800 shadow-xl scale-[1.02]":"border-gray-100 dark:border-zinc-800"}`,children:[e.jsx("div",{...p,...f,className:"p-2 cursor-grab text-rose-400 hover:text-rose-600 dark:text-rose-500/50 dark:hover:text-rose-400 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg transition-colors",children:e.jsx(T,{size:20})}),e.jsx("div",{className:"w-12 h-16 bg-gray-100 dark:bg-zinc-800 rounded-lg overflow-hidden shrink-0 border border-gray-200 dark:border-zinc-700",children:e.jsx("img",{src:t.preview,alt:"Preview",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-bold text-sm truncate dark:text-zinc-200",children:t.file.name}),e.jsxs("p",{className:"text-[10px] text-gray-400 uppercase font-black",children:[(t.file.size/1024).toFixed(1)," KB"]})]}),e.jsx("button",{onClick:()=>n(l),className:"p-2 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-full text-gray-400 hover:text-rose-500 transition-colors",children:e.jsx(G,{size:18})})]})}function ne(){const l=g.useRef(null),[t,n]=g.useState([]),[p,f]=g.useState(!1),[u,d]=g.useState(null),[m,b]=g.useState("paperknife-images-to-pdf"),h=B(w(O),w(K,{coordinateGetter:J})),k=s=>{const a=Array.from(s).filter(r=>r.type.startsWith("image/")).map(r=>({id:Math.random().toString(36).substr(2,9),file:r,preview:URL.createObjectURL(r)}));if(a.length===0){v.error("Please select image files (JPG, PNG, WebP)");return}n(r=>[...r,...a]),d(null)},N=s=>{const{active:a,over:r}=s;a.id!==r?.id&&n(c=>{const i=c.findIndex(o=>o.id===a.id),x=c.findIndex(o=>o.id===r?.id);return M(c,i,x)})},P=s=>{n(a=>a.filter(r=>r.id!==s)),d(null)},S=async()=>{if(t.length!==0){f(!0),await new Promise(s=>setTimeout(s,100));try{const s=await U.create();for(const i of t){const x=await i.file.arrayBuffer();let o;if(i.file.type==="image/jpeg"||i.file.type==="image/jpg")o=await s.embedJpg(x);else if(i.file.type==="image/png")o=await s.embedPng(x);else try{o=await s.embedJpg(x)}catch{console.warn(`Skipping unsupported image type: ${i.file.type}`);continue}const{width:y,height:j}=o.scale(1);s.addPage([y,j]).drawImage(o,{x:0,y:0,width:y,height:j})}const a=await s.save(),r=new Blob([a],{type:"application/pdf"}),c=URL.createObjectURL(r);d(c),I({name:`${m}.pdf`,tool:"Image to PDF",size:r.size,resultUrl:c})}catch(s){v.error(`Failed to convert: ${s.message}`)}finally{f(!1)}}};return e.jsx("div",{className:"flex-1",children:e.jsxs("main",{className:"max-w-4xl mx-auto px-6 py-6 md:py-10",children:[e.jsx(V,{title:"Image to",highlight:"PDF",description:"Convert your photos and images into a professional PDF document. Processed locally."}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",className:"hidden",ref:l,onChange:s=>s.target.files&&k(s.target.files)}),e.jsx("div",{className:"space-y-6",children:t.length===0?e.jsxs("div",{onClick:()=>l.current?.click(),className:"border-4 border-dashed border-gray-200 dark:border-zinc-800 rounded-[2.5rem] bg-white/50 dark:bg-zinc-900/50 p-20 text-center hover:border-rose-300 dark:hover:border-rose-900 transition-all cursor-pointer group",children:[e.jsx("div",{className:"w-24 h-24 bg-rose-100 dark:bg-rose-900/30 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:e.jsx(z,{size:40})}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Select Images"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Tap to upload JPG, PNG, or WebP"})]}):u?e.jsx(q,{message:"PDF generated from images!",downloadUrl:u,fileName:`${m}.pdf`,onStartOver:()=>{n([]),d(null)}}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center px-1",children:[e.jsxs("p",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400",children:[t.length," Images Selected"]}),e.jsx("button",{onClick:()=>n([]),className:"text-[10px] font-black uppercase tracking-widest text-rose-500/60 hover:text-rose-500 transition-colors",children:"Clear All"})]}),e.jsx(L,{sensors:h,collisionDetection:$,onDragEnd:N,children:e.jsx(E,{items:t.map(s=>s.id),strategy:A,children:e.jsx("div",{className:"space-y-2",children:t.map(s=>e.jsx(Q,{id:s.id,img:s,onRemove:P},s.id))})})}),e.jsxs("button",{onClick:()=>l.current?.click(),className:"w-full py-3 border-2 border-dashed border-gray-200 dark:border-zinc-700 rounded-2xl text-gray-400 hover:text-rose-500 transition-all font-bold text-sm flex items-center justify-center gap-2",children:[e.jsx(D,{size:16})," Add More Images"]}),e.jsxs("div",{className:"p-6 bg-white dark:bg-zinc-900 rounded-3xl border border-gray-100 dark:border-zinc-800 shadow-sm",children:[e.jsxs("label",{className:"block text-[10px] font-black uppercase tracking-widest text-gray-400 mb-3 flex items-center gap-2",children:[e.jsx(C,{size:12})," Output Filename"]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 dark:bg-black rounded-2xl px-4 py-3 border border-gray-100 dark:border-zinc-800 focus-within:border-rose-500 transition-colors",children:[e.jsx("input",{type:"text",value:m,onChange:s=>b(s.target.value),className:"bg-transparent outline-none flex-1 text-sm font-bold dark:text-white"}),e.jsx("span",{className:"text-gray-400 text-xs font-bold",children:".pdf"})]})]}),e.jsxs("button",{onClick:S,disabled:p,className:"w-full bg-rose-500 hover:bg-rose-600 text-white p-6 rounded-3xl shadow-xl shadow-rose-200 dark:shadow-none font-black text-xl tracking-tight transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-3",children:[p?e.jsx(F,{className:"animate-spin"}):e.jsx(R,{}),"Generate PDF"]})]})}),e.jsx(X,{})]})})}export{ne as default};
