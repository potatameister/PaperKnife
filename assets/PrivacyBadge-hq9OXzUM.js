const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-Ck_EcREq.js","assets/index-wyEB1vN_.js","assets/vendor-ui-BKTa3dmj.js","assets/index-McTQtlqX.css","assets/pdfjs-viewer-BENO9Ct1.js"])))=>i.map(i=>d[i]);
import{g as l,G as m}from"./pdfjs-viewer-BENO9Ct1.js";import{r as h,_ as P,C as y,j as p}from"./index-wyEB1vN_.js";function C(t){t.CapacitorUtils.Synapse=new Proxy({},{get(a,e){return new Proxy({},{get(r,o){return(n,u,c)=>{const i=t.Capacitor.Plugins[e];if(i===void 0){c(new Error(`Capacitor plugin ${e} not found`));return}if(typeof i[o]!="function"){c(new Error(`Method ${o} not found in Capacitor plugin ${e}`));return}(async()=>{try{const s=await i[o](n);u(s)}catch(s){c(s)}})()}}})}})}function b(t){t.CapacitorUtils.Synapse=new Proxy({},{get(a,e){return t.cordova.plugins[e]}})}function E(t=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!t?C(window):window.cordova!==void 0&&b(window))}var d;(function(t){t.Documents="DOCUMENTS",t.Data="DATA",t.Library="LIBRARY",t.Cache="CACHE",t.External="EXTERNAL",t.ExternalStorage="EXTERNAL_STORAGE",t.ExternalCache="EXTERNAL_CACHE",t.LibraryNoCloud="LIBRARY_NO_CLOUD",t.Temporary="TEMPORARY"})(d||(d={}));var w;(function(t){t.UTF8="utf8",t.ASCII="ascii",t.UTF16="utf16"})(w||(w={}));const k=h("Filesystem",{web:()=>P(()=>import("./web-Ck_EcREq.js"),__vite__mapDeps([0,1,2,3,4])).then(t=>new t.FilesystemWeb)});E();const x="/PaperKnife/assets/pdf.worker.min-LyOxJPrg.mjs";m.workerSrc=x;const T=async(t,a,e)=>{if(y.isNativePlatform())try{const r=typeof t=="string"?t.split(",")[1]:btoa(t.reduce((o,n)=>o+String.fromCharCode(n),""));return await k.writeFile({path:a,data:r,directory:d.Documents,recursive:!0}),!0}catch(r){throw console.error("Download error:",r),r}else{const r=typeof t=="string"?await(await fetch(t)).blob():new Blob([t],{type:e}),o=URL.createObjectURL(r),n=document.createElement("a");return n.href=o,n.download=a,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(o),!0}},L=async t=>{const a=await t.arrayBuffer();try{return await l({data:a,cMapUrl:`${window.location.origin}/PaperKnife/cmaps/`,cMapPacked:!0}).promise}catch(e){if(e.name==="PasswordException")throw e;return await l({data:a,cMapUrl:`${window.location.origin}/PaperKnife/cmaps/`,cMapPacked:!0,stopAtErrors:!1}).promise}},f=async(t,a,e=1)=>{try{const r=await t.getPage(a),o=r.getViewport({scale:e}),n=300,u=Math.min(n/o.width,n/o.height),c=r.getViewport({scale:e*u*(window.devicePixelRatio||1)}),i=document.createElement("canvas"),s=i.getContext("2d",{alpha:!1});if(!s)throw new Error("Canvas context not available");i.height=c.height,i.width=c.width,s.fillStyle="#ffffff",s.fillRect(0,0,i.width,i.height),await r.render({canvasContext:s,viewport:c,intent:"display"}).promise;const g=i.toDataURL("image/jpeg",.85);return i.width=0,i.height=0,g}catch(r){return console.error(`Error rendering page ${a}:`,r),""}},U=async t=>{try{const a=l({data:await t.arrayBuffer(),cMapUrl:`${window.location.origin}/PaperKnife/cmaps/`,cMapPacked:!0});a.onPassword=()=>{throw new Error("PASSWORD_REQUIRED")};const e=await a.promise;return{thumbnail:await f(e,1),pageCount:e.numPages,isLocked:!1}}catch(a){return a.message==="PASSWORD_REQUIRED"||a.name==="PasswordException"?{thumbnail:"",pageCount:0,isLocked:!0}:{thumbnail:"",pageCount:0,isLocked:!1}}},A=async(t,a)=>{try{const e=await t.arrayBuffer(),o=await l({data:e,password:a,cMapUrl:`${window.location.origin}/PaperKnife/cmaps/`,cMapPacked:!0}).promise;return{thumbnail:await f(o,1),pageCount:o.numPages,isLocked:!1,success:!0,pdfDoc:o}}catch{return{thumbnail:"",pageCount:0,isLocked:!0,success:!1}}};function S(){return p.jsxs("div",{className:"mt-8 flex items-center justify-center gap-2 text-xs font-bold uppercase tracking-widest text-gray-400 dark:text-zinc-600",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"100% Client-Side Processing"]})}export{w as E,S as P,T as d,U as g,L as l,f as r,A as u};
