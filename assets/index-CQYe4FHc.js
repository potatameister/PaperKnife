const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-CWI9-3cq.js","assets/vendor-ui-B9oMtzpq.js","assets/pdfjs-viewer-BENO9Ct1.js","assets/vendor-utils-C7MT6ZOy.js","assets/tesseract-core-nY1g205A.js","assets/pdf-lib-core-Bb5zQtje.js","assets/web-Dbw8mVJ1.js","assets/web-DhmvQuaI.js"])))=>i.map(i=>d[i]);
import{r as c,a as js,u as de,b as Qt,U as Re,A as ut,L as be,C as at,I as pt,M as mt,S as gt,H as Oe,d as vs,e as Xt,P as we,f as Ns,T as Qe,h as ge,i as Jt,D as ue,j as ht,k as Xe,F as es,l as Le,m as Je,Z as pe,G as ts,t as U,n as ye,o as bt,p as Ee,q,s as et,X as Q,v as zs,w as Cs,x as Ps,y as Ge,z as Ut,B as ss,E as $t,J as Ss,K as Fs,N as Ds,O as Ls,Q as Es,V as As,W as Rs,Y as Us,_ as $s,$ as Ts,a0 as rs,a1 as K,a2 as as,a3 as ft,a4 as le,a5 as ns,a6 as Is,a7 as os,a8 as xe,a9 as is,aa as ls,ab as Ke,ac as Bs,ad as nt,ae as je,af as Os,ag as Ms,ah as Tt,ai as Ws,aj as Me,ak as Fe,al as We,am as It,an as Bt,ao as _s,ap as Hs,aq as Gs,ar as Ks,as as Ot,at as Vs,au as qs,av as Ys,aw as Zs,ax as G,R as Qs}from"./vendor-ui-B9oMtzpq.js";import{G as Xs,g as Ve}from"./pdfjs-viewer-BENO9Ct1.js";import{u as wt,a as fe,D as yt,c as kt,S as jt,v as cs,b as vt,s as Nt,K as zt,P as ds,d as Ct,C as Pt,J as Ae,r as Js,T as er,M as tr}from"./vendor-utils-C7MT6ZOy.js";import{e as sr,P as ee,d as xs,S as us,r as ps}from"./pdf-lib-core-Bb5zQtje.js";import{T as rr}from"./tesseract-core-nY1g205A.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();var ms={exports:{}},tt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ar=c,nr=Symbol.for("react.element"),or=Symbol.for("react.fragment"),ir=Object.prototype.hasOwnProperty,lr=ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cr={key:!0,ref:!0,__self:!0,__source:!0};function gs(s,r,t){var n,o={},a=null,i=null;t!==void 0&&(a=""+t),r.key!==void 0&&(a=""+r.key),r.ref!==void 0&&(i=r.ref);for(n in r)ir.call(r,n)&&!cr.hasOwnProperty(n)&&(o[n]=r[n]);if(s&&s.defaultProps)for(n in r=s.defaultProps,r)o[n]===void 0&&(o[n]=r[n]);return{$$typeof:nr,type:s,key:a,ref:i,props:o,_owner:lr.current}}tt.Fragment=or;tt.jsx=gs;tt.jsxs=gs;ms.exports=tt;var e=ms.exports,ot={},Mt=js;ot.createRoot=Mt.createRoot,ot.hydrateRoot=Mt.hydrateRoot;/*! Capacitor: https://capacitorjs.com/ - MIT License */var ve;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(ve||(ve={}));class rt extends Error{constructor(r,t,n){super(r),this.message=r,this.code=t,this.data=n}}const dr=s=>{var r,t;return s?.androidBridge?"android":!((t=(r=s?.webkit)===null||r===void 0?void 0:r.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},xr=s=>{const r=s.CapacitorCustomPlatform||null,t=s.Capacitor||{},n=t.Plugins=t.Plugins||{},o=()=>r!==null?r.name:dr(s),a=()=>o()!=="web",i=y=>{const m=u.get(y);return!!(m?.platforms.has(o())||l(y))},l=y=>{var m;return(m=t.PluginHeaders)===null||m===void 0?void 0:m.find(k=>k.name===y)},d=y=>s.console.error(y),u=new Map,g=(y,m={})=>{const k=u.get(y);if(k)return console.warn(`Capacitor plugin "${y}" already registered. Cannot register plugins twice.`),k.proxy;const h=o(),N=l(y);let L;const F=async()=>(!L&&h in m?L=typeof m[h]=="function"?L=await m[h]():L=m[h]:r!==null&&!L&&"web"in m&&(L=typeof m.web=="function"?L=await m.web():L=m.web),L),E=(p,f)=>{var S,j;if(N){const C=N?.methods.find(D=>f===D.name);if(C)return C.rtype==="promise"?D=>t.nativePromise(y,f.toString(),D):(D,R)=>t.nativeCallback(y,f.toString(),D,R);if(p)return(S=p[f])===null||S===void 0?void 0:S.bind(p)}else{if(p)return(j=p[f])===null||j===void 0?void 0:j.bind(p);throw new rt(`"${y}" plugin is not implemented on ${h}`,ve.Unimplemented)}},P=p=>{let f;const S=(...j)=>{const C=F().then(D=>{const R=E(D,p);if(R){const T=R(...j);return f=T?.remove,T}else throw new rt(`"${y}.${p}()" is not implemented on ${h}`,ve.Unimplemented)});return p==="addListener"&&(C.remove=async()=>f()),C};return S.toString=()=>`${p.toString()}() { [capacitor code] }`,Object.defineProperty(S,"name",{value:p,writable:!1,configurable:!1}),S},x=P("addListener"),b=P("removeListener"),z=(p,f)=>{const S=x({eventName:p},f),j=async()=>{const D=await S;b({eventName:p,callbackId:D},f)},C=new Promise(D=>S.then(()=>D({remove:j})));return C.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await j()},C},w=new Proxy({},{get(p,f){switch(f){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return N?z:x;case"removeListener":return b;default:return P(f)}}});return n[y]=w,u.set(y,{name:y,proxy:w,platforms:new Set([...Object.keys(m),...N?[h]:[]])}),w};return t.convertFileSrc||(t.convertFileSrc=y=>y),t.getPlatform=o,t.handleError=d,t.isNativePlatform=a,t.isPluginAvailable=i,t.registerPlugin=g,t.Exception=rt,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},ur=s=>s.Capacitor=xr(s),W=ur(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Ce=W.registerPlugin;class St{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(r,t){let n=!1;this.listeners[r]||(this.listeners[r]=[],n=!0),this.listeners[r].push(t);const a=this.windowListeners[r];a&&!a.registered&&this.addWindowListener(a),n&&this.sendRetainedArgumentsForEvent(r);const i=async()=>this.removeListener(r,t);return Promise.resolve({remove:i})}async removeAllListeners(){this.listeners={};for(const r in this.windowListeners)this.removeWindowListener(this.windowListeners[r]);this.windowListeners={}}notifyListeners(r,t,n){const o=this.listeners[r];if(!o){if(n){let a=this.retainedEventArguments[r];a||(a=[]),a.push(t),this.retainedEventArguments[r]=a}return}o.forEach(a=>a(t))}hasListeners(r){var t;return!!(!((t=this.listeners[r])===null||t===void 0)&&t.length)}registerWindowListener(r,t){this.windowListeners[t]={registered:!1,windowEventName:r,pluginEventName:t,handler:n=>{this.notifyListeners(t,n)}}}unimplemented(r="not implemented"){return new W.Exception(r,ve.Unimplemented)}unavailable(r="not available"){return new W.Exception(r,ve.Unavailable)}async removeListener(r,t){const n=this.listeners[r];if(!n)return;const o=n.indexOf(t);this.listeners[r].splice(o,1),this.listeners[r].length||this.removeWindowListener(this.windowListeners[r])}addWindowListener(r){window.addEventListener(r.windowEventName,r.handler),r.registered=!0}removeWindowListener(r){r&&(window.removeEventListener(r.windowEventName,r.handler),r.registered=!1)}sendRetainedArgumentsForEvent(r){const t=this.retainedEventArguments[r];t&&(delete this.retainedEventArguments[r],t.forEach(n=>{this.notifyListeners(r,n)}))}}const Wt=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),_t=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class pr extends St{async getCookies(){const r=document.cookie,t={};return r.split(";").forEach(n=>{if(n.length<=0)return;let[o,a]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=_t(o).trim(),a=_t(a).trim(),t[o]=a}),t}async setCookie(r){try{const t=Wt(r.key),n=Wt(r.value),o=`; expires=${(r.expires||"").replace("expires=","")}`,a=(r.path||"/").replace("path=",""),i=r.url!=null&&r.url.length>0?`domain=${r.url}`:"";document.cookie=`${t}=${n||""}${o}; path=${a}; ${i};`}catch(t){return Promise.reject(t)}}async deleteCookie(r){try{document.cookie=`${r.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const r=document.cookie.split(";")||[];for(const t of r)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(r){return Promise.reject(r)}}async clearAllCookies(){try{await this.clearCookies()}catch(r){return Promise.reject(r)}}}Ce("CapacitorCookies",{web:()=>new pr});const mr=async s=>new Promise((r,t)=>{const n=new FileReader;n.onload=()=>{const o=n.result;r(o.indexOf(",")>=0?o.split(",")[1]:o)},n.onerror=o=>t(o),n.readAsDataURL(s)}),gr=(s={})=>{const r=Object.keys(s);return Object.keys(s).map(o=>o.toLocaleLowerCase()).reduce((o,a,i)=>(o[a]=s[r[i]],o),{})},hr=(s,r=!0)=>s?Object.entries(s).reduce((n,o)=>{const[a,i]=o;let l,d;return Array.isArray(i)?(d="",i.forEach(u=>{l=r?encodeURIComponent(u):u,d+=`${a}=${l}&`}),d.slice(0,-1)):(l=r?encodeURIComponent(i):i,d=`${a}=${l}`),`${n}&${d}`},"").substr(1):null,br=(s,r={})=>{const t=Object.assign({method:s.method||"GET",headers:s.headers},r),o=gr(s.headers)["content-type"]||"";if(typeof s.data=="string")t.body=s.data;else if(o.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[i,l]of Object.entries(s.data||{}))a.set(i,l);t.body=a.toString()}else if(o.includes("multipart/form-data")||s.data instanceof FormData){const a=new FormData;if(s.data instanceof FormData)s.data.forEach((l,d)=>{a.append(d,l)});else for(const l of Object.keys(s.data))a.append(l,s.data[l]);t.body=a;const i=new Headers(t.headers);i.delete("content-type"),t.headers=i}else(o.includes("application/json")||typeof s.data=="object")&&(t.body=JSON.stringify(s.data));return t};class fr extends St{async request(r){const t=br(r,r.webFetchExtra),n=hr(r.params,r.shouldEncodeUrlParams),o=n?`${r.url}?${n}`:r.url,a=await fetch(o,t),i=a.headers.get("content-type")||"";let{responseType:l="text"}=a.ok?r:{};i.includes("application/json")&&(l="json");let d,u;switch(l){case"arraybuffer":case"blob":u=await a.blob(),d=await mr(u);break;case"json":d=await a.json();break;case"document":case"text":default:d=await a.text()}const g={};return a.headers.forEach((y,m)=>{g[m]=y}),{data:d,headers:g,status:a.status,url:a.url}}async get(r){return this.request(Object.assign(Object.assign({},r),{method:"GET"}))}async post(r){return this.request(Object.assign(Object.assign({},r),{method:"POST"}))}async put(r){return this.request(Object.assign(Object.assign({},r),{method:"PUT"}))}async patch(r){return this.request(Object.assign(Object.assign({},r),{method:"PATCH"}))}async delete(r){return this.request(Object.assign(Object.assign({},r),{method:"DELETE"}))}}Ce("CapacitorHttp",{web:()=>new fr});var Ht;(function(s){s.Dark="DARK",s.Light="LIGHT",s.Default="DEFAULT"})(Ht||(Ht={}));var Gt;(function(s){s.StatusBar="StatusBar",s.NavigationBar="NavigationBar"})(Gt||(Gt={}));class wr extends St{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}Ce("SystemBars",{web:()=>new wr});const yr="modulepreload",kr=function(s){return"/PaperKnife/"+s},Kt={},Ft=function(r,t,n){let o=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=Promise.allSettled(t.map(d=>{if(d=kr(d),d in Kt)return;Kt[d]=!0;const u=d.endsWith(".css"),g=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const y=document.createElement("link");if(y.rel=u?"stylesheet":yr,u||(y.as="script"),y.crossOrigin="",y.href=d,l&&y.setAttribute("nonce",l),document.head.appendChild(y),u)return new Promise((m,k)=>{y.addEventListener("load",m),y.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return r().catch(a)})};function jr(s){s.CapacitorUtils.Synapse=new Proxy({},{get(r,t){return new Proxy({},{get(n,o){return(a,i,l)=>{const d=s.Capacitor.Plugins[t];if(d===void 0){l(new Error(`Capacitor plugin ${t} not found`));return}if(typeof d[o]!="function"){l(new Error(`Method ${o} not found in Capacitor plugin ${t}`));return}(async()=>{try{const u=await d[o](a);i(u)}catch(u){l(u)}})()}}})}})}function vr(s){s.CapacitorUtils.Synapse=new Proxy({},{get(r,t){return s.cordova.plugins[t]}})}function Nr(s=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!s?jr(window):window.cordova!==void 0&&vr(window))}var qe;(function(s){s.Documents="DOCUMENTS",s.Data="DATA",s.Library="LIBRARY",s.Cache="CACHE",s.External="EXTERNAL",s.ExternalStorage="EXTERNAL_STORAGE",s.ExternalCache="EXTERNAL_CACHE",s.LibraryNoCloud="LIBRARY_NO_CLOUD",s.Temporary="TEMPORARY"})(qe||(qe={}));var Vt;(function(s){s.UTF8="utf8",s.ASCII="ascii",s.UTF16="utf16"})(Vt||(Vt={}));const Dt=Ce("Filesystem",{web:()=>Ft(()=>import("./web-CWI9-3cq.js"),__vite__mapDeps([0,1,2,3,4,5])).then(s=>new s.FilesystemWeb)});Nr();const ce=({size:s=24,className:r="",iconColor:t})=>e.jsxs("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:r,children:[e.jsx("path",{d:"M4 4L21 12H9L4 4Z",fill:t||"#F43F5E"}),e.jsx("path",{d:"M4 20L21 12H9L4 20Z",className:"fill-zinc-900 dark:fill-zinc-100 transition-colors duration-300"}),e.jsx("path",{d:"M9 12L21 12",stroke:"white",strokeWidth:"1",strokeOpacity:"0.2"})]}),zr="PaperKnifeDB",ie="activity",Cr=1,Lt=()=>new Promise((s,r)=>{const t=indexedDB.open(zr,Cr);t.onupgradeneeded=()=>{const n=t.result;n.objectStoreNames.contains(ie)||n.createObjectStore(ie,{keyPath:"id"})},t.onsuccess=()=>s(t.result),t.onerror=()=>r(t.error)}),Z=async s=>{const r=await Lt(),n=r.transaction(ie,"readwrite").objectStore(ie),o={...s,id:Math.random().toString(36).substr(2,9),timestamp:Date.now()};await n.add(o);const a=localStorage.getItem("historyLimit"),i=a==="999"?999999:parseInt(a||"10"),l=n.getAll();l.onsuccess=()=>{const d=l.result;if(d.length>i){const g=d.sort((k,h)=>h.timestamp-k.timestamp).slice(i),m=r.transaction(ie,"readwrite").objectStore(ie);g.forEach(k=>m.delete(k.id))}}},st=async(s=10)=>{const n=(await Lt()).transaction(ie,"readonly").objectStore(ie);return new Promise(o=>{const a=n.getAll();a.onsuccess=()=>{const i=a.result;o(i.sort((l,d)=>d.timestamp-l.timestamp).slice(0,s))}})},Ue=async()=>{await(await Lt()).transaction(ie,"readwrite").objectStore(ie).clear()},qt=()=>{localStorage.setItem("lastSeen",String(Date.now()))},Pr=()=>Number(localStorage.getItem("lastSeen")||"0");var it;(function(s){s.Heavy="HEAVY",s.Medium="MEDIUM",s.Light="LIGHT"})(it||(it={}));var lt;(function(s){s.Success="SUCCESS",s.Warning="WARNING",s.Error="ERROR"})(lt||(lt={}));const hs=Ce("Haptics",{web:()=>Ft(()=>import("./web-Dbw8mVJ1.js"),__vite__mapDeps([6,1,2,3,4,5])).then(s=>new s.HapticsWeb)}),_e=async(s=it.Medium)=>{if(W.isNativePlatform()&&localStorage.getItem("hapticsEnabled")==="true")try{await hs.impact({style:s})}catch{console.warn("Haptics not supported")}},Sr=async()=>{if(W.isNativePlatform()&&localStorage.getItem("hapticsEnabled")==="true")try{await hs.notification({type:lt.Success})}catch{console.warn("Haptics not supported")}},Fr={Edit:{bg:"bg-rose-50 dark:bg-rose-900/20",text:"text-rose-500",hover:"hover:bg-rose-50 dark:hover:bg-rose-900/10",iconBg:"bg-rose-100 dark:bg-rose-900/30"},Secure:{bg:"bg-indigo-50 dark:bg-indigo-900/20",text:"text-indigo-500",hover:"hover:bg-indigo-50 dark:hover:bg-indigo-900/10",iconBg:"bg-indigo-100 dark:bg-indigo-900/30"},Convert:{bg:"bg-emerald-50 dark:bg-emerald-900/20",text:"text-emerald-500",hover:"hover:bg-emerald-50 dark:hover:bg-emerald-900/10",iconBg:"bg-emerald-100 dark:bg-emerald-900/30"},Optimize:{bg:"bg-amber-50 dark:bg-amber-900/20",text:"text-amber-500",hover:"hover:bg-amber-50 dark:hover:bg-amber-900/10",iconBg:"bg-amber-100 dark:bg-amber-900/30"}};function Dr({children:s,theme:r,toggleTheme:t,tools:n,onFileDrop:o,viewMode:a}){const i=de(),l=Qt(),[d,u]=c.useState(!1),[g,y]=c.useState(!1),[m,k]=c.useState(!1),[h,N]=c.useState([]),L=c.useRef(null),E=W.isNativePlatform()||a==="android";c.useEffect(()=>{g&&st().then(N)},[g]),c.useEffect(()=>{const w=p=>{L.current&&!L.current.contains(p.target)&&k(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),c.useEffect(()=>{const w=S=>{S.preventDefault(),o&&u(!0)},p=S=>{S.preventDefault(),(S.clientX<=0||S.clientY<=0||S.clientX>=window.innerWidth||S.clientY>=window.innerHeight)&&u(!1)},f=S=>{S.preventDefault(),u(!1),o&&S.dataTransfer?.files&&o(S.dataTransfer.files)};return window.addEventListener("dragover",w),window.addEventListener("dragleave",p),window.addEventListener("drop",f),()=>{window.removeEventListener("dragover",w),window.removeEventListener("dragleave",p),window.removeEventListener("drop",f)}},[o]);const P=n.find(w=>{const p=`/${w.title.split(" ")[0].toLowerCase()}`;return l.pathname.includes(p)}),x=l.pathname==="/"||l.pathname==="/PaperKnife/",b=x||["/android-tools","/android-history","/settings"].includes(l.pathname),z=E&&b;return e.jsxs("div",{className:"min-h-screen flex flex-col bg-[#FAFAFA] dark:bg-black text-gray-900 dark:text-zinc-100 transition-colors duration-300",children:[d&&e.jsx("div",{className:"fixed inset-0 z-[200] bg-rose-500/10 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-12 rounded-[3rem] shadow-2xl border-4 border-dashed border-rose-500 animate-in zoom-in duration-300",children:[e.jsx(Re,{size:64,className:"text-rose-500 animate-bounce"}),e.jsx("p",{className:"mt-4 font-black uppercase tracking-widest text-rose-500 text-center text-sm",children:"Drop PDF to start"})]})}),!E&&e.jsxs("header",{className:"flex items-center justify-between px-4 md:px-8 h-16 md:h-20 border-b border-gray-100 dark:border-zinc-800 bg-white/80 dark:bg-zinc-950/80 backdrop-blur-md sticky top-0 z-[100]",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-4 flex-1 min-w-0",children:[!x&&e.jsx("button",{onClick:()=>i("/"),className:"p-2 hover:bg-gray-100 dark:hover:bg-zinc-900 rounded-xl transition-colors text-gray-500 hover:text-rose-500 shrink-0",children:e.jsx(ut,{size:20})}),e.jsxs(be,{to:"/",className:"flex items-center gap-2 hover:opacity-80 transition-opacity shrink-0",children:[e.jsx(ce,{size:W.isNativePlatform()?24:28}),e.jsx("span",{className:"font-black tracking-tighter text-lg md:text-xl dark:text-white hidden xs:block",children:"PaperKnife"})]}),e.jsx("div",{className:"h-6 w-[1px] bg-gray-200 dark:bg-zinc-800 mx-1 md:mx-2 shrink-0"}),e.jsxs("div",{className:"relative min-w-0",ref:L,children:[e.jsxs("button",{onClick:()=>k(!m),className:`flex items-center gap-2 px-2 md:px-3 py-1.5 rounded-xl transition-all font-black text-[10px] md:text-sm uppercase tracking-widest min-w-0 ${m?"bg-rose-500 text-white":"text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-zinc-900"}`,children:[e.jsx("span",{className:"truncate",children:x?"All Tools":P?.title||"Tool"}),e.jsx(at,{size:14,className:`transition-transform duration-300 shrink-0 ${m?"rotate-180":""}`})]}),m&&e.jsx("div",{className:"absolute top-full left-0 mt-3 w-72 md:w-80 bg-white dark:bg-zinc-900 border border-gray-100 dark:border-zinc-800 rounded-[2rem] shadow-2xl py-4 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-300 max-h-[80vh] overflow-y-auto scrollbar-hide",children:Object.entries(n.filter(w=>w.implemented).reduce((w,p)=>(w[p.category]||(w[p.category]=[]),w[p.category].push(p),w),{})).map(([w,p])=>{const f=Fr[w];return e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"px-6 py-2",children:e.jsx("span",{className:`text-[10px] font-black uppercase tracking-[0.2em] ${f.text} opacity-60`,children:w})}),e.jsx("div",{className:"grid grid-cols-1 gap-1 px-2",children:p.map((S,j)=>{const C=S.icon,D=P?.title===S.title&&!x;return e.jsxs("button",{onClick:()=>{i(S.path||"/"),k(!1)},className:`flex items-center gap-4 p-3 rounded-2xl transition-all text-left group ${D?`${f.bg} ${f.text}`:"hover:bg-gray-50 dark:hover:bg-zinc-800 text-gray-500 dark:text-gray-400"}`,children:[e.jsx("div",{className:`p-2 rounded-lg transition-colors ${D?"bg-white dark:bg-zinc-800":`${f.iconBg} ${f.text} opacity-70 group-hover:opacity-100`}`,children:e.jsx(C,{size:18})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-black uppercase tracking-tight",children:S.title}),e.jsx("p",{className:"text-[10px] opacity-60 truncate",children:S.desc})]})]},j)})})]},w)})})]})]}),e.jsxs("div",{className:"flex items-center gap-1 md:gap-3 shrink-0",children:[e.jsxs(be,{to:"/about",className:`p-2 md:px-4 md:py-2 rounded-xl text-[10px] md:text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 ${l.pathname.includes("about")?"bg-rose-50 dark:bg-rose-900/20 text-rose-500":"text-gray-500 hover:bg-gray-100 dark:hover:bg-zinc-900"}`,children:[e.jsx(pt,{size:18}),e.jsx("span",{className:"hidden sm:block",children:"About"})]}),e.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-rose-500 transition-colors",children:r==="light"?e.jsx(mt,{size:20}):e.jsx(gt,{size:20})}),e.jsxs("button",{onClick:()=>y(!0),className:`p-2 transition-colors relative ${g?"text-rose-500":"text-gray-400 hover:text-rose-500"}`,children:[e.jsx(Oe,{size:20}),h.length>0&&e.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-rose-500 rounded-full border-2 border-white dark:border-black"})]})]})]}),e.jsx("main",{className:`flex-1 min-w-0 ${z?"pb-32":""}`,children:s}),z&&e.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-black border-t border-gray-100 dark:border-zinc-800 flex items-end justify-between px-6 pb-[calc(env(safe-area-inset-bottom)+16px)] pt-3 z-[100] shadow-[0_-4px_20px_rgba(0,0,0,0.03)]",children:[e.jsxs("button",{onClick:()=>i("/"),className:`flex flex-col items-center gap-1.5 flex-1 transition-all ${l.pathname==="/"?"text-rose-500":"text-gray-400 dark:text-zinc-600"}`,children:[e.jsx(vs,{size:24,strokeWidth:l.pathname==="/"?2.5:2}),e.jsx("span",{className:"text-[10px] font-bold",children:"Home"})]}),e.jsxs("button",{onClick:()=>i("/android-tools"),className:`flex flex-col items-center gap-1.5 flex-1 transition-all ${l.pathname==="/android-tools"?"text-rose-500":"text-gray-400 dark:text-zinc-600"}`,children:[e.jsx(Xt,{size:24,strokeWidth:l.pathname==="/android-tools"?2.5:2}),e.jsx("span",{className:"text-[10px] font-bold",children:"Tools"})]}),e.jsx("div",{className:"relative -top-8",children:e.jsx("button",{onClick:()=>{_e();const w=document.createElement("input");w.type="file",w.accept=".pdf",w.onchange=p=>{const f=p.target.files?.[0];f&&o?.([f])},w.click()},className:"w-14 h-14 bg-rose-500 text-white rounded-2xl shadow-xl shadow-rose-500/40 flex items-center justify-center active:scale-90 transition-transform ring-4 ring-white dark:ring-black",children:e.jsx(we,{size:32,strokeWidth:3})})}),e.jsxs("button",{onClick:()=>i("/android-history"),className:`flex flex-col items-center gap-1.5 flex-1 transition-all ${l.pathname==="/android-history"?"text-rose-500":"text-gray-400 dark:text-zinc-600"}`,children:[e.jsx(Oe,{size:24,strokeWidth:l.pathname==="/android-history"?2.5:2}),e.jsx("span",{className:"text-[10px] font-bold",children:"History"})]}),e.jsxs(be,{to:"/settings",className:`flex flex-col items-center gap-1.5 flex-1 transition-all no-underline ${l.pathname.includes("settings")?"text-rose-500":"text-gray-400 dark:text-zinc-600"}`,children:[e.jsx(Ns,{size:24,strokeWidth:l.pathname.includes("settings")?2.5:2}),e.jsx("span",{className:"text-[10px] font-bold",children:"Settings"})]})]}),e.jsx("aside",{className:`fixed top-0 right-0 h-screen w-full sm:w-80 bg-white dark:bg-zinc-950 border-l border-gray-100 dark:border-zinc-800 z-[150] shadow-2xl transition-transform duration-500 ease-out transform ${g?"translate-x-0":"translate-x-full"}`,children:e.jsxs("div",{className:"p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{className:"text-rose-500",size:24}),e.jsx("h2",{className:"text-xl font-black dark:text-white",children:"Activity"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[h.length>0&&e.jsx("button",{onClick:async()=>{await Ue(),N([])},className:"p-2 hover:bg-rose-50 dark:hover:bg-rose-900/20 text-gray-400 hover:text-rose-500 rounded-xl transition-colors",children:e.jsx(Qe,{size:18})}),e.jsx("button",{onClick:()=>y(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-xl transition-colors",children:e.jsx(ge,{size:20,className:"text-gray-400"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 scrollbar-hide",children:h.length===0?e.jsx("div",{className:"text-center py-20 opacity-40",children:e.jsx("p",{className:"text-xs font-bold uppercase tracking-widest text-gray-400",children:"No recent files"})}):h.map(w=>e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-zinc-900/50 rounded-2xl border border-gray-100 dark:border-zinc-800 group relative",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-lg flex items-center justify-center",children:e.jsx(Jt,{size:16})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-bold truncate dark:text-white",children:w.name}),e.jsx("p",{className:"text-[10px] text-gray-400 font-black uppercase tracking-tighter",children:w.tool})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-[9px] text-gray-400 font-bold",children:[e.jsx("span",{children:new Date(w.timestamp).toLocaleTimeString()}),w.resultUrl&&e.jsxs("a",{href:w.resultUrl,download:w.name,className:"text-rose-500 hover:underline flex items-center gap-1",children:[e.jsx(ue,{size:10})," Redownload"]})]})]},w.id))})]})}),g&&e.jsx("div",{onClick:()=>y(!1),className:"fixed inset-0 bg-black/20 dark:bg-black/60 backdrop-blur-sm z-[140] animate-in fade-in duration-300"})]})}const bs=c.createContext(void 0);function Lr({children:s}){const[r,t]=c.useState(null),[n,o]=c.useState(null),a=l=>{t(l),l&&o(l)},i=()=>{const l=r;return t(null),l};return e.jsx(bs.Provider,{value:{pipelinedFile:r,lastPipelinedFile:n,setPipelineFile:a,consumePipelineFile:i},children:s})}function Y(){const s=c.useContext(bs);if(s===void 0)throw new Error("usePipeline must be used within a PipelineProvider");return s}function Er(){const{pathname:s}=Qt();return c.useEffect(()=>{window.scrollTo(0,0),setTimeout(()=>{document.querySelectorAll(".overflow-y-auto").forEach(r=>{r.scrollTo(0,0)})},0)},[s]),null}const Ar=s=>{if(s===0)return"0 Bytes";const r=1024,t=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(s)/Math.log(r));return parseFloat((s/Math.pow(r,n)).toFixed(2))+" "+t[n]},Rr={Edit:{bg:"bg-rose-50 dark:bg-rose-900/20",text:"text-rose-500",border:"border-rose-100 dark:border-rose-900/30",hover:"group-hover:bg-rose-500",glow:"dark:hover:shadow-rose-900/20"},Secure:{bg:"bg-indigo-50 dark:bg-indigo-900/20",text:"text-indigo-500",border:"border-indigo-100 dark:border-indigo-900/30",hover:"group-hover:bg-indigo-500",glow:"dark:hover:shadow-indigo-900/20"},Convert:{bg:"bg-emerald-50 dark:bg-emerald-900/20",text:"text-emerald-500",border:"border-emerald-100 dark:border-emerald-900/30",hover:"group-hover:bg-emerald-500",glow:"dark:hover:shadow-emerald-900/20"},Optimize:{bg:"bg-amber-50 dark:bg-amber-900/20",text:"text-amber-500",border:"border-amber-100 dark:border-amber-900/30",hover:"group-hover:bg-amber-500",glow:"dark:hover:shadow-amber-900/20"}},Ur=({title:s,desc:r,icon:t,implemented:n=!1,onClick:o,onFileDrop:a,category:i})=>{const l=Rr[i],[d,u]=c.useState(!1),g=k=>{k.preventDefault(),n&&u(!0)},y=k=>{k.preventDefault(),u(!1)},m=k=>{k.preventDefault(),u(!1),n&&a&&k.dataTransfer.files?.[0]&&a(k.dataTransfer.files[0])};return e.jsxs("div",{onClick:n?o:void 0,onDragOver:g,onDragLeave:y,onDrop:m,className:`
        rounded-[2.5rem] border transition-all duration-500 group overflow-hidden flex flex-col p-8 relative h-full
        ${n?`cursor-pointer bg-white dark:bg-zinc-900 border-gray-100 dark:border-zinc-800 hover:shadow-xl ${l.glow} hover:border-transparent hover:-translate-y-0.5`:"cursor-not-allowed opacity-60 saturate-0 bg-gray-50 dark:bg-zinc-950 border-transparent"}
        ${d?"ring-4 ring-rose-500 ring-inset border-transparent scale-[0.98]":""}
      `,children:[d&&e.jsxs("div",{className:"absolute inset-0 bg-rose-500/10 backdrop-blur-[2px] z-10 flex flex-col items-center justify-center pointer-events-none border-4 border-rose-500 rounded-[2.5rem] animate-in fade-in duration-200",children:[e.jsx("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-full shadow-2xl animate-bounce mb-4",children:e.jsx(t,{className:"text-rose-500",size:32})}),e.jsx("p",{className:"text-rose-500 font-black uppercase tracking-[0.2em] text-[10px] bg-white dark:bg-zinc-900 px-4 py-2 rounded-full shadow-lg",children:"Drop to start"})]}),e.jsx("div",{className:`
        ${l.bg} ${l.text} rounded-2xl flex items-center justify-center transition-all duration-500 mb-6 w-14 h-14
        ${n?`${l.hover} group-hover:text-white`:""}
      `,children:e.jsx(t,{size:28,strokeWidth:1.5})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-black text-gray-900 dark:text-white text-xl tracking-tight",children:s}),n?e.jsx("div",{className:`${l.text} opacity-0 group-hover:opacity-100 transition-all transform translate-x-2 group-hover:translate-x-0`,children:e.jsx(ge,{size:18})}):e.jsx("span",{className:"text-[10px] font-black uppercase tracking-tighter bg-gray-100 dark:bg-zinc-800 px-2 py-1 rounded-md text-gray-400",children:"Soon"})]}),e.jsx("p",{className:"text-gray-500 dark:text-zinc-400 leading-relaxed text-sm font-medium",children:r})]}),e.jsx("div",{className:`absolute top-8 right-8 text-[8px] font-black uppercase tracking-[0.2em] ${l.text} opacity-10 group-hover:opacity-40 transition-opacity`,children:i})]})};function $r({tools:s}){const r=de(),{setPipelineFile:t}=Y(),[n,o]=c.useState(""),[a,i]=c.useState("All"),[l,d]=c.useState([]);c.useEffect(()=>{const h=localStorage.getItem("historyLimit"),N=h==="999"?50:parseInt(h||"5");st(N).then(d)},[]);const u=async()=>{await Ue(),d([])},g=["All","Edit","Secure","Convert","Optimize"],y=c.useMemo(()=>s.filter(h=>{const N=h.title.toLowerCase().includes(n.toLowerCase())||h.desc.toLowerCase().includes(n.toLowerCase()),L=a==="All"||h.category===a;return N&&L}),[s,n,a]),m=h=>{h.implemented&&h.path&&r(h.path)},k=async(h,N)=>{if(!h.implemented||!h.path)return;if(N.type!=="application/pdf"&&h.path!=="/image-to-pdf"){U.error("Only PDF files are supported for this tool.");return}if(h.path==="/image-to-pdf"&&!N.type.startsWith("image/")){U.error("Only images are supported for this tool.");return}U.loading(`Loading ${N.name} into ${h.title}...`,{duration:1e3});const L=await N.arrayBuffer();t({buffer:new Uint8Array(L),name:N.name}),r(h.path)};return e.jsxs("div",{className:"min-h-screen bg-[#FAFAFA] dark:bg-black text-gray-900 dark:text-zinc-100 font-sans selection:bg-rose-100 dark:selection:bg-rose-900 selection:text-rose-600 transition-colors duration-300 ease-out",children:[e.jsxs("main",{className:"max-w-6xl mx-auto px-6 py-10 md:py-20",children:[e.jsxs("div",{className:"text-center mb-10 md:mb-20",children:[e.jsx("span",{className:"inline-block px-4 py-1.5 bg-rose-50 dark:bg-rose-900/20 text-rose-600 dark:text-rose-400 text-[10px] md:text-xs font-bold rounded-full mb-6 border border-rose-100 dark:border-rose-900/30 uppercase tracking-widest",children:"LOCAL PROCESSING • 100% PRIVATE"}),e.jsxs("h2",{className:"text-4xl md:text-7xl font-black mb-6 md:mb-8 tracking-tight text-gray-900 dark:text-white",children:["Stop Uploading ",e.jsx("br",{}),e.jsx("span",{className:"text-rose-500",children:"Your Privacy."})]}),e.jsxs("p",{className:"text-lg md:text-xl text-gray-500 dark:text-zinc-400 max-w-2xl mx-auto leading-relaxed mb-12 font-medium",children:["The professional PDF utility that lives in your browser. ",e.jsx("br",{className:"hidden md:block"}),"No uploads, no servers, just your data staying yours."]}),e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-6 flex items-center pointer-events-none text-gray-400 group-focus-within:text-rose-500 transition-colors",children:e.jsx(ht,{size:20})}),e.jsx("input",{type:"text",placeholder:"Search tools (e.g. merge, compress, protect...)",value:n,onChange:h=>o(h.target.value),className:"w-full bg-white dark:bg-zinc-900 border border-gray-100 dark:border-zinc-800 rounded-[2rem] py-5 pl-14 pr-6 shadow-xl shadow-gray-200/50 dark:shadow-none focus:border-rose-500 focus:ring-4 focus:ring-rose-500/10 outline-none transition-all font-bold text-lg"})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:g.map(h=>e.jsx("button",{onClick:()=>i(h),className:`px-6 py-2.5 rounded-full text-sm font-black uppercase tracking-widest transition-all ${a===h?"bg-rose-500 text-white shadow-lg shadow-rose-200 dark:shadow-none":"bg-white dark:bg-zinc-900 text-gray-400 border border-gray-100 dark:border-zinc-800 hover:border-rose-200"}`,children:h},h))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[y.map(h=>e.jsx(Ur,{...h,onClick:()=>m(h),onFileDrop:N=>k(h,N)},h.title)),y.length===0&&e.jsxs("div",{className:"col-span-full py-20 text-center",children:[e.jsx("p",{className:"text-xl font-bold text-gray-400",children:"No tools found matching your search."}),e.jsx("button",{onClick:()=>{o(""),i("All")},className:"mt-4 text-rose-500 font-black uppercase tracking-widest text-xs hover:underline",children:"Clear Filters"})]})]})}),e.jsxs("aside",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-[2.5rem] border border-gray-100 dark:border-zinc-800 p-8 shadow-sm h-fit",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h4",{className:"flex items-center gap-2 text-xs font-black uppercase tracking-widest text-gray-400",children:[e.jsx(Xe,{size:14})," Recent Files"]}),l.length>0&&e.jsx("button",{onClick:u,className:"text-gray-300 hover:text-rose-500 transition-colors",children:e.jsx(Qe,{size:14})})]}),l.length===0?e.jsx("div",{className:"py-10 text-center space-y-2",children:e.jsxs("p",{className:"text-[10px] font-bold text-gray-300 uppercase tracking-widest leading-relaxed",children:["No recent activity.",e.jsx("br",{}),"Processed files appear here."]})}):e.jsxs("div",{className:"space-y-4",children:[l.map(h=>e.jsx("div",{className:"group relative",children:e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-2xl border border-transparent hover:border-rose-100 dark:hover:border-rose-900/30 hover:bg-rose-50/30 dark:hover:bg-rose-900/10 transition-all",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-50 dark:bg-black rounded-xl flex items-center justify-center text-gray-400 group-hover:text-rose-500 transition-colors shrink-0",children:e.jsx(es,{size:18})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-bold truncate dark:text-zinc-200",children:h.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-[8px] font-black uppercase px-1.5 py-0.5 bg-gray-100 dark:bg-zinc-800 text-gray-500 rounded",children:h.tool}),e.jsx("span",{className:"text-[8px] font-bold text-gray-400 uppercase",children:Ar(h.size)})]})]}),h.resultUrl&&e.jsx("a",{href:h.resultUrl,download:h.name,className:"p-2 text-gray-300 hover:text-rose-500 transition-colors",title:"Download again",children:e.jsx(ue,{size:16})})]})},h.id)),e.jsx("p",{className:"text-[8px] text-center text-gray-400 uppercase font-black tracking-widest pt-4 border-t border-gray-100 dark:border-zinc-800",children:"Auto-deleted after 10 files"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-rose-50 to-rose-100 dark:from-rose-900/20 dark:to-rose-900/10 rounded-[2.5rem] p-8 border border-rose-100 dark:border-rose-900/30 shadow-sm shadow-rose-200/20 dark:shadow-none",children:[e.jsx(Le,{className:"mb-4 text-rose-500",fill:"currentColor",size:24}),e.jsx("h4",{className:"font-black text-lg mb-2 text-gray-900 dark:text-white",children:"PaperKnife Supporter"}),e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-zinc-400 leading-relaxed mb-6",children:"Support privacy-first tools. Your help keeps the engine independent and ad-free."}),e.jsx("a",{href:"https://github.com/sponsors/potatameister",target:"_blank",rel:"noopener noreferrer",className:"block w-full py-3 bg-rose-500 text-white rounded-2xl text-center text-xs font-black uppercase tracking-widest hover:scale-[1.02] active:scale-95 transition-all shadow-lg shadow-rose-500/20",children:"Sponsor Now"})]})]})]}),e.jsx("div",{className:"mt-32 grid grid-cols-1 md:grid-cols-3 gap-8 border-t border-gray-100 dark:border-zinc-800 pt-20",children:[{icon:Je,title:"Zero Cloud",desc:"Your files never leave your memory. We don't have a server, and we don't want your data."},{icon:pe,title:"Instant Speed",desc:"By processing locally, there's no upload or download delay. Large files are handled in seconds."},{icon:ue,title:"Install Anywhere",desc:"Use it as a web app or download the APK for a full native experience on your Android device."}].map((h,N)=>e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-3xl border border-gray-50 dark:border-zinc-800 shadow-sm",children:[e.jsx("div",{className:"text-rose-500 mb-6",children:e.jsx(h.icon,{size:32,strokeWidth:2.5})}),e.jsx("h4",{className:"font-bold text-lg mb-3 dark:text-white",children:h.title}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 leading-relaxed",children:h.desc})]},N))})]}),e.jsx("footer",{className:"border-t border-gray-100 dark:border-zinc-900 mt-32 bg-white dark:bg-black transition-colors",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-20",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12 mb-16",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-900 dark:text-white mb-6",children:[e.jsx(ce,{size:24}),e.jsx("span",{className:"font-black tracking-tighter text-xl",children:"PaperKnife"})]}),e.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm max-w-sm leading-relaxed mb-8",children:"Absolute privacy for your documents. We process everything in your browser memory. No servers, no tracking, just precision tools."}),e.jsx("div",{className:"flex gap-4",children:e.jsx("a",{href:"https://github.com/potatameister/PaperKnife",target:"_blank",rel:"noopener noreferrer",className:"p-3 bg-gray-100 dark:bg-zinc-900 rounded-2xl hover:bg-rose-500 hover:text-white transition-all text-gray-600 dark:text-zinc-400",children:e.jsx(ts,{size:20})})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-xs uppercase tracking-widest text-gray-400 dark:text-zinc-500 mb-6",children:"Resources"}),e.jsxs("ul",{className:"space-y-4 text-sm font-bold text-gray-600 dark:text-zinc-400",children:[e.jsx("li",{children:e.jsx(be,{to:"/",className:"hover:text-rose-500 transition",children:"All Tools"})}),e.jsx("li",{children:e.jsx(be,{to:"/about",className:"hover:text-rose-500 transition",children:"Privacy Protocol"})}),e.jsx("li",{children:e.jsx(be,{to:"/thanks",className:"hover:text-rose-500 transition",children:"Special Thanks"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-rose-500 transition",children:"Documentation"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-xs uppercase tracking-widest text-gray-400 dark:text-zinc-500 mb-6",children:"Support"}),e.jsxs("ul",{className:"space-y-4 text-sm font-bold text-gray-600 dark:text-zinc-400",children:[e.jsx("li",{children:e.jsxs("a",{href:"https://github.com/sponsors/potatameister",className:"flex items-center gap-2 hover:text-rose-500 transition",children:[e.jsx(Le,{size:14,className:"text-rose-500"})," Sponsor Project"]})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"flex items-center gap-2 hover:text-rose-500 transition",children:"Report an Issue"})})]})]})]}),e.jsxs("div",{className:"pt-8 border-t border-gray-100 dark:border-zinc-900 flex flex-col md:flex-row justify-between items-center gap-4 text-xs font-bold text-gray-400 dark:text-zinc-600 uppercase tracking-widest",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-2 md:gap-4 text-center md:text-left",children:[e.jsx("p",{children:"© 2026 PaperKnife."}),e.jsx("p",{className:"hidden md:block",children:"•"}),e.jsxs("p",{children:["Built with ❤️ by ",e.jsx("a",{href:"https://github.com/potatameister",target:"_blank",rel:"noopener noreferrer",className:"text-rose-500 hover:underline",children:"potatameister"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-emerald-50/50 dark:bg-emerald-900/10 rounded-full border border-emerald-100 dark:border-emerald-900/20",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse shadow-[0_0_8px_rgba(16,185,129,0.5)]"}),e.jsx("span",{className:"text-[10px] text-emerald-600 dark:text-emerald-400",children:"100% Offline • Privacy Node"})]}),e.jsxs("div",{className:"flex gap-8",children:[e.jsx("a",{href:"#",className:"hover:text-rose-500 transition",children:"Terms"}),e.jsx("a",{href:"#",className:"hover:text-rose-500 transition",children:"License"})]})]})]})})]})}function Tr({theme:s,toggleTheme:r,onFileSelect:t}){const n=de(),[o,a]=c.useState([]),i=c.useRef(null);c.useEffect(()=>{st(3).then(a)},[]);const l=[{title:"Merge",icon:bt,path:"/merge",color:"text-rose-500",bg:"bg-rose-50 dark:bg-rose-900/20"},{title:"Compress",icon:pe,path:"/compress",color:"text-amber-500",bg:"bg-amber-50 dark:bg-amber-900/20"},{title:"Split",icon:Ee,path:"/split",color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-900/20"},{title:"Protect",icon:q,path:"/protect",color:"text-indigo-500",bg:"bg-indigo-50 dark:bg-indigo-900/20"}],d=u=>{const g=u.target.files?.[0];g&&t&&t(g)};return e.jsxs("div",{className:"flex flex-col min-h-screen bg-[#FAFAFA] dark:bg-black transition-colors pb-32",children:[e.jsx("input",{type:"file",accept:".pdf",ref:i,onChange:d,className:"hidden"}),e.jsx("header",{className:"px-6 pt-safe pb-2 sticky top-0 z-50 bg-[#FAFAFA]/90 dark:bg-black/90 backdrop-blur-xl",children:e.jsxs("div",{className:"flex items-center justify-between h-14",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx(ce,{size:24,iconColor:"#F43F5E"}),e.jsx("span",{className:"text-lg font-black tracking-tighter text-gray-900 dark:text-white",children:"PaperKnife"})]}),e.jsx("button",{onClick:r,className:"w-9 h-9 flex items-center justify-center rounded-full bg-gray-100 dark:bg-zinc-900 text-gray-500 dark:text-gray-400 active:scale-90 transition-all",children:s==="light"?e.jsx(mt,{size:18}):e.jsx(gt,{size:18})})]})}),e.jsxs("main",{className:"px-4 py-2 space-y-5 flex-1 overflow-y-auto scrollbar-hide",children:[e.jsx("section",{className:"relative",children:e.jsxs("button",{onClick:()=>i.current?.click(),className:"w-full bg-zinc-900 dark:bg-zinc-100 rounded-[2rem] p-6 text-left relative overflow-hidden shadow-xl group active:scale-[0.98] transition-all",children:[e.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-rose-500 rounded-full blur-[60px] -mr-16 -mt-16 opacity-40 dark:opacity-20 group-active:opacity-60 transition-opacity"}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsx("div",{className:"p-3 bg-white/10 dark:bg-black/5 rounded-xl backdrop-blur-md text-white dark:text-black",children:e.jsx(Re,{size:24,strokeWidth:2.5})}),e.jsx("div",{className:"px-3 py-1.5 bg-rose-500 text-white rounded-full text-[9px] font-black uppercase tracking-widest shadow-lg shadow-rose-500/40",children:"100% LOCAL"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-white dark:text-black tracking-tight leading-none mb-1.5",children:"Select PDF"}),e.jsx("p",{className:"text-[11px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-tight",children:"Tap to begin local session"})]})]})]})}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center justify-between px-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{size:12,className:"text-gray-400"}),e.jsx("h3",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-gray-400",children:"Recent Stream"})]}),o.length>0&&e.jsx("button",{onClick:()=>n("/android-history"),className:"text-[9px] font-black uppercase text-rose-500",children:"History"})]}),o.length>0?e.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-[2rem] border border-gray-100 dark:border-white/5 p-1 shadow-sm",children:o.slice(0,3).map(u=>e.jsxs("button",{onClick:()=>n("/android-history"),className:"w-full p-3.5 flex items-center gap-3.5 rounded-[1.5rem] active:bg-gray-50 dark:active:bg-white/5 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-50 dark:bg-white/5 rounded-xl flex items-center justify-center shrink-0 text-gray-400 dark:text-zinc-500",children:e.jsx(ye,{size:18})}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsx("p",{className:"text-xs font-bold truncate text-gray-900 dark:text-white leading-tight",children:u.name}),e.jsxs("p",{className:"text-[9px] text-gray-400 font-black uppercase tracking-widest mt-0.5",children:[u.tool," • ",new Date(u.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),e.jsx(ge,{size:14,className:"text-gray-300"})]},u.id))}):e.jsx("div",{className:"py-8 px-4 text-center border-2 border-dashed border-gray-100 dark:border-white/5 rounded-[2rem]",children:e.jsx("p",{className:"text-[9px] font-black text-gray-300 dark:text-zinc-700 uppercase tracking-[0.2em]",children:"Vault is Empty"})})]}),e.jsxs("section",{className:"grid grid-cols-2 gap-2.5",children:[e.jsxs("div",{className:"col-span-2 px-2 mb-1 flex items-center justify-between",children:[e.jsx("h3",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-gray-400",children:"Core Engines"}),e.jsx("div",{className:"flex items-center gap-1.5 text-[8px] font-black text-emerald-500 bg-emerald-500/10 px-2 py-1 rounded-md uppercase tracking-widest",children:"Live RAM Node"})]}),l.map(u=>e.jsxs("button",{onClick:()=>n(u.path),className:"p-4 bg-white dark:bg-zinc-900 rounded-[1.75rem] border border-gray-100 dark:border-white/5 flex flex-col gap-3 shadow-sm active:scale-95 transition-all group",children:[e.jsx("div",{className:`w-10 h-10 ${u.bg} ${u.color} rounded-xl flex items-center justify-center group-active:scale-110 transition-transform`,children:e.jsx(u.icon,{size:20,strokeWidth:2.5})}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white block",children:u.title}),e.jsx("span",{className:"text-[8px] font-black text-gray-400 uppercase tracking-tighter",children:"System Utility"})]})]},u.title)),e.jsxs("button",{onClick:()=>n("/android-tools"),className:"p-4 bg-rose-500 text-white rounded-[1.75rem] flex flex-col gap-3 shadow-lg shadow-rose-500/20 active:scale-95 transition-all col-span-2 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 p-6 opacity-20 -mr-4 -mt-4 group-active:scale-110 transition-transform",children:e.jsx(Xt,{size:64})}),e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center relative z-10",children:e.jsx(et,{size:20,strokeWidth:2.5})}),e.jsxs("div",{className:"text-left relative z-10",children:[e.jsx("span",{className:"text-sm font-black block",children:"More Engines"}),e.jsx("span",{className:"text-[9px] font-bold opacity-80 uppercase tracking-widest",children:"Full Catalog Access"})]})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2 py-6 opacity-30",children:[e.jsx(ce,{size:18,iconColor:"#F43F5E"}),e.jsxs("p",{className:"text-[8px] font-black uppercase tracking-[0.4em] dark:text-white text-center",children:["Encrypted Session Node ",e.jsx("br",{})," v1.0.0-beta"]})]})]})]})}function Ir({tools:s}){const r=de(),[t,n]=c.useState(""),o={Edit:{bg:"bg-rose-50 dark:bg-rose-900/10",text:"text-rose-600 dark:text-rose-400",icon:"text-rose-500",border:"border-rose-100/50 dark:border-rose-900/20"},Secure:{bg:"bg-indigo-50 dark:bg-indigo-900/10",text:"text-indigo-600 dark:text-indigo-400",icon:"text-indigo-500",border:"border-indigo-100/50 dark:border-indigo-900/20"},Convert:{bg:"bg-emerald-50 dark:bg-emerald-900/10",text:"text-emerald-600 dark:text-emerald-400",icon:"text-emerald-500",border:"border-emerald-100/50 dark:border-emerald-900/20"},Optimize:{bg:"bg-amber-50 dark:bg-amber-900/10",text:"text-amber-600 dark:text-amber-400",icon:"text-amber-500",border:"border-amber-100/50 dark:border-amber-900/20"}},a=c.useMemo(()=>s.filter(l=>l.title.toLowerCase().includes(t.toLowerCase())||l.desc.toLowerCase().includes(t.toLowerCase())),[s,t]),i=c.useMemo(()=>a.reduce((l,d)=>(l[d.category]||(l[d.category]=[]),l[d.category].push(d),l),{}),[a]);return e.jsxs("div",{className:"min-h-screen bg-[#FAFAFA] dark:bg-black pb-32 transition-colors",children:[e.jsxs("header",{className:"px-6 pt-[calc(env(safe-area-inset-top)+0.75rem)] pb-6",children:[e.jsx("h1",{className:"text-4xl font-black tracking-tighter dark:text-white mb-8",children:"All Tools"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-5 flex items-center pointer-events-none text-gray-500",children:e.jsx(ht,{size:20})}),e.jsx("input",{type:"text",placeholder:"Search for a tool...",value:t,onChange:l=>n(l.target.value),className:"w-full bg-[#EEE8F4] dark:bg-[#2B2930] border-none rounded-[1.75rem] py-4 pl-14 pr-6 text-base font-bold placeholder:text-gray-400 focus:bg-white dark:focus:bg-[#36343B] ring-2 ring-transparent focus:ring-rose-500/10 transition-all dark:text-white outline-none shadow-sm"})]})]}),e.jsx("main",{className:"px-4 space-y-8",children:Object.keys(i).map(l=>e.jsxs("section",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("h3",{className:"px-2 mb-4 text-[11px] font-black uppercase tracking-[0.2em] text-[#49454F] dark:text-[#CAC4D0]",children:[l," Tools"]}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:i[l].map((d,u)=>{const g=o[d.category],y=d.icon;return e.jsxs("button",{onClick:()=>d.implemented&&d.path&&r(d.path),className:"flex items-center gap-4 p-4 bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 active:bg-gray-50 dark:active:bg-black transition-all shadow-sm",children:[e.jsx("div",{className:`w-12 h-12 ${g.bg} ${g.icon} rounded-xl flex items-center justify-center shrink-0`,children:e.jsx(y,{size:24,strokeWidth:1.5})}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsx("h4",{className:"font-bold text-sm dark:text-white truncate",children:d.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:d.desc})]}),e.jsx(ge,{size:18,className:"text-gray-300"})]},u)})})]},l))}),e.jsxs("footer",{className:"text-center py-12 opacity-20",children:[e.jsx(ce,{size:24,iconColor:"#F43F5E",className:"mx-auto mb-4"}),e.jsx("p",{className:"text-[9px] font-black uppercase tracking-[0.5em]",children:"PaperKnife Node v1.0.0-beta"})]})]})}function Br(){const[s,r]=c.useState([]),[t,n]=c.useState("");c.useEffect(()=>{const d=localStorage.getItem("historyLimit"),u=d==="999"?100:parseInt(d||"10");st(u).then(r)},[]);const o=async()=>{U("Wipe all history?",{id:"history-wipe-confirm",action:{label:"Confirm",onClick:async()=>{await Ue(),r([]),U.success("History wiped",{id:"history-wipe-done"}),U.dismiss("history-wipe-confirm")}},cancel:{label:"Cancel",onClick:()=>U.dismiss("history-wipe-confirm")}})},a=s.filter(d=>d.name.toLowerCase().includes(t.toLowerCase())||d.tool.toLowerCase().includes(t.toLowerCase())),i=d=>{if(d===0)return"0 Bytes";const u=1024,g=["Bytes","KB","MB","GB"],y=Math.floor(Math.log(d)/Math.log(u));return parseFloat((d/Math.pow(u,y)).toFixed(2))+" "+g[y]},l=d=>new Date(d).toLocaleDateString(void 0,{month:"short",day:"numeric"});return e.jsxs("div",{className:"min-h-screen bg-[#FAFAFA] dark:bg-black pb-32 transition-colors",children:[e.jsxs("header",{className:"px-6 pt-[calc(env(safe-area-inset-top)+1rem)] pb-6 sticky top-0 bg-[#FAFAFA]/90 dark:bg-black/90 backdrop-blur-xl z-50 border-b border-gray-100 dark:border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-3xl font-black tracking-tighter dark:text-white",children:"Workspace"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-rose-500 opacity-80",children:"Local Storage Active"})]}),s.length>0&&e.jsx("button",{onClick:o,className:"p-3 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-2xl active:scale-90 transition-all shadow-sm",children:e.jsx(Qe,{size:20})})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-5 flex items-center pointer-events-none text-gray-400 group-focus-within:text-rose-500 transition-colors",children:e.jsx(ht,{size:18})}),e.jsx("input",{type:"text",placeholder:"Search activity...",value:t,onChange:d=>n(d.target.value),className:"w-full bg-white dark:bg-zinc-900 border border-gray-100 dark:border-white/5 rounded-2xl py-4 pl-14 pr-6 text-sm font-bold placeholder:text-gray-400 focus:bg-white dark:focus:bg-zinc-800 shadow-sm outline-none transition-all dark:text-white"}),t&&e.jsx("button",{onClick:()=>n(""),className:"absolute inset-y-0 right-4 flex items-center text-gray-400",children:e.jsx(Q,{size:16})})]})]}),e.jsxs("main",{className:"px-4 py-6 space-y-2",children:[a.length===0?e.jsxs("div",{className:"py-24 text-center flex flex-col items-center animate-in fade-in duration-700",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-50 dark:bg-zinc-900 rounded-[2.5rem] flex items-center justify-center text-gray-300 mb-6 border border-gray-100 dark:border-white/5",children:e.jsx(Xe,{size:32,strokeWidth:1.5})}),e.jsx("h3",{className:"text-xl font-black dark:text-white tracking-tight",children:"Vault Empty"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 max-w-[200px] mt-2 font-medium leading-relaxed",children:"Documents processed on this node will appear here temporarily."})]}):a.map(d=>e.jsxs("div",{className:"p-4 bg-white dark:bg-zinc-900 rounded-[2rem] border border-gray-100 dark:border-white/5 flex items-center gap-4 active:scale-[0.99] transition-all shadow-sm group",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-50 dark:bg-zinc-800 text-gray-400 group-hover:bg-rose-50 dark:group-hover:bg-rose-900/20 group-hover:text-rose-500 rounded-2xl flex items-center justify-center shrink-0 transition-colors shadow-inner",children:e.jsx(ye,{size:22})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-black truncate dark:text-white mb-0.5",children:d.name}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center gap-1 text-[9px] text-gray-400 font-black uppercase tracking-tighter bg-gray-100 dark:bg-white/5 px-2 py-0.5 rounded-md",children:d.tool}),e.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-400 font-bold",children:[e.jsx(zs,{size:10})," ",i(d.size)]}),e.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-400 font-bold",children:[e.jsx(Cs,{size:10})," ",l(d.timestamp)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[d.resultUrl&&e.jsx("a",{href:d.resultUrl,download:d.name,className:"w-10 h-10 bg-rose-500 text-white rounded-full flex items-center justify-center shadow-lg shadow-rose-500/20 active:scale-90 transition-all",children:e.jsx(ue,{size:18})}),e.jsx(ge,{size:16,className:"text-gray-200 dark:text-zinc-800"})]})]},d.id)),e.jsxs("div",{className:"pt-12 flex flex-col items-center gap-3 pb-10 opacity-30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{size:14,className:"text-emerald-500"}),e.jsx("span",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-gray-500",children:"Node Privacy Protocol"})]}),e.jsx("p",{className:"text-[7px] font-medium text-gray-400 max-w-[200px] text-center",children:"Documents are processed locally in your private environment. Activity logs are stored on this device only."})]})]})]})}function Or({title:s,highlight:r,description:t}){const n=de(),o=W.isNativePlatform();return e.jsxs("div",{className:"relative text-center mb-8 md:mb-12",children:[o&&e.jsx("button",{onClick:()=>n("/"),className:"absolute left-0 top-0 p-3 bg-gray-50 dark:bg-zinc-900 rounded-2xl text-gray-500 hover:text-rose-500 transition-colors md:hidden",children:e.jsx(ut,{size:20})}),e.jsxs("h2",{className:"text-3xl md:text-5xl font-black mb-3 md:mb-4 dark:text-white px-10",children:[s," ",e.jsxs("span",{className:"text-rose-500",children:[r,"."]})]}),e.jsx("p",{className:"text-sm md:text-base text-gray-500 dark:text-zinc-400 max-w-lg mx-auto leading-relaxed",children:t})]})}const V=({title:s,description:r,children:t,actions:n,onBack:o})=>{const a=de();return e.jsxs("div",{className:"flex flex-col min-h-screen bg-[#FAFAFA] dark:bg-black transition-colors",children:[e.jsxs("header",{className:"px-4 pt-safe pb-1 flex items-center justify-between sticky top-0 z-50 bg-[#FAFAFA]/95 dark:bg-black/95 backdrop-blur-xl md:hidden border-b border-gray-100 dark:border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2 h-14",children:[e.jsx("button",{onClick:o||(()=>a(-1)),className:"w-10 h-10 flex items-center justify-center rounded-full active:bg-zinc-100 dark:active:bg-zinc-900 transition-colors -ml-1",children:e.jsx(ut,{size:24,className:"text-gray-900 dark:text-white"})}),e.jsx("h1",{className:"text-lg font-black tracking-tight text-gray-900 dark:text-white ml-1",children:s})]}),e.jsx("div",{className:"w-10"})]}),e.jsxs("main",{className:"flex-1 flex flex-col p-4 md:p-8 max-w-5xl mx-auto w-full",children:[e.jsx("div",{className:"hidden md:block mb-8",children:e.jsx(Or,{title:s,description:r})}),e.jsx("div",{className:"flex-1",children:t})]}),n&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white/95 dark:bg-black/95 backdrop-blur-xl border-t border-gray-100 dark:border-white/5 z-[100] pb-[calc(env(safe-area-inset-bottom)+1rem)] md:pb-6",children:e.jsx("div",{className:"max-w-md mx-auto",children:n})})]})};function Mr(){const s=W.isNativePlatform(),r=e.jsxs("div",{className:"animate-in fade-in duration-700 pb-20",children:[e.jsxs("section",{className:"text-center py-12 px-6",children:[e.jsxs("div",{className:"inline-flex flex-col items-center mb-8",children:[e.jsx("div",{className:"w-24 h-24 bg-rose-500 text-white rounded-[2.5rem] flex items-center justify-center mb-6 shadow-2xl shadow-rose-500/30",children:e.jsx(ce,{size:48,iconColor:"#FFFFFF"})}),e.jsx("h1",{className:"text-5xl font-black tracking-tighter dark:text-white mb-2 leading-none",children:"PaperKnife"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-rose-500 opacity-80",children:"Orchestration Engine v1.0.0-beta"})]}),e.jsxs("p",{className:"text-lg text-gray-500 dark:text-zinc-400 font-medium max-w-2xl mx-auto leading-relaxed",children:["The industry-standard for private PDF manipulation. Built on the principle of ",e.jsx("b",{children:"Absolute Sovereignty"}),"—where your data never leaves the local runtime."]})]}),e.jsx("section",{className:"px-4 grid grid-cols-1 md:grid-cols-3 gap-4 mb-12",children:[{title:"Local Compute",icon:Ps,desc:"Heavy-lifting happens on your hardware, not a remote server farm."},{title:"Zero-Server Logic",icon:Ge,desc:"Files are loaded into volatile RAM. No part of your document is ever uploaded."},{title:"Stateless Ops",icon:Ut,desc:"Zero persistence of your documents. When you close the session, we forget."}].map((t,n)=>e.jsxs("div",{className:"p-6 bg-white dark:bg-zinc-900 rounded-[2rem] border border-gray-100 dark:border-white/5 shadow-sm",children:[e.jsx("div",{className:"w-10 h-10 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-xl flex items-center justify-center mb-4",children:e.jsx(t.icon,{size:20})}),e.jsx("h4",{className:"font-bold text-sm dark:text-white mb-2",children:t.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 leading-relaxed",children:t.desc})]},n))}),e.jsxs("section",{className:"mb-12",children:[e.jsxs("div",{className:"px-6 mb-6 flex items-center gap-4",children:[e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-rose-500",children:"Technical Protocol"}),e.jsx("div",{className:"h-[1px] flex-1 bg-gray-100 dark:bg-white/5"})]}),e.jsx("div",{className:"bg-white dark:bg-zinc-900 border-y border-gray-100 dark:border-white/5 divide-y divide-gray-50 dark:divide-white/5 shadow-sm",children:[{title:"Zero-Server Logic",icon:Ge,desc:"Files are loaded into volatile RAM as ArrayBuffers. No part of your document is ever uploaded or cached on any network infrastructure.",color:"text-emerald-500",bg:"bg-emerald-50 dark:bg-emerald-900/20"},{title:"Direct DOM Rendering",icon:bt,desc:"PDF previews are generated using PDF.js workers, rendering directly to HTML5 Canvas without intermediary server-side rasterization.",color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-900/20"},{title:"OpenLink Encryption",icon:ss,desc:"Security tools utilize standard cryptographic primitives compliant with GPL v3. Passwords are destroyed immediately after session termination.",color:"text-indigo-500",bg:"bg-indigo-50 dark:bg-indigo-900/20"}].map((t,n)=>e.jsxs("div",{className:"p-6 flex gap-5",children:[e.jsx("div",{className:`w-12 h-12 ${t.bg} ${t.color} rounded-[1.25rem] flex items-center justify-center shrink-0`,children:e.jsx(t.icon,{size:22})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-black dark:text-white uppercase tracking-tight mb-1",children:t.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 leading-relaxed font-medium",children:t.desc})]})]},n))})]}),e.jsxs("section",{className:"px-4 grid grid-cols-1 md:grid-cols-2 gap-4 mb-12",children:[e.jsxs("div",{className:"p-8 bg-zinc-900 rounded-[2.5rem] text-white flex flex-col justify-between group relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 -mr-4 -mt-4 group-hover:scale-110 transition-transform",children:e.jsx($t,{size:80})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx($t,{className:"text-rose-500 mb-4",size:32}),e.jsxs("h4",{className:"text-xl font-black mb-2 leading-tight",children:["GPL v3 ",e.jsx("br",{}),"Open Source"]}),e.jsx("p",{className:"text-xs text-zinc-400 leading-relaxed mb-6 font-medium",children:"Verified privacy claims via public audit. The entire engine is open for inspection."})]}),e.jsxs("a",{href:"https://github.com/potatameister/PaperKnife",target:"_blank",className:"relative z-10 text-[10px] font-black uppercase tracking-widest text-rose-500 flex items-center gap-2 hover:translate-x-1 transition-transform",children:["View Source Code ",e.jsx(Ss,{size:12})]})]}),e.jsxs("div",{className:"p-8 bg-white dark:bg-zinc-900 rounded-[2.5rem] border border-gray-100 dark:border-white/5 flex flex-col justify-between group relative overflow-hidden shadow-sm",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 dark:opacity-5 -mr-4 -mt-4 group-hover:scale-110 transition-transform",children:e.jsx(Le,{size:80})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(Le,{className:"text-rose-500 mb-4",size:32}),e.jsxs("h4",{className:"text-xl font-black dark:text-white mb-2 leading-tight",children:["Community ",e.jsx("br",{}),"Driven"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 leading-relaxed mb-6 font-medium",children:"Independent, ad-free, and supported by users who believe in data privacy."})]}),e.jsxs(be,{to:"/thanks",className:"relative z-10 text-[10px] font-black uppercase tracking-widest text-rose-500 flex items-center gap-2 hover:translate-x-1 transition-transform",children:["Meet Supporters ",e.jsx(Ut,{size:12})]})]})]}),e.jsxs("footer",{className:"text-center py-12 opacity-30",children:[e.jsx(ce,{size:24,iconColor:"#F43F5E",className:"mx-auto mb-4"}),e.jsx("p",{className:"text-[9px] font-black uppercase tracking-[0.5em]",children:"PaperKnife Node v1.0.0-beta"})]})]});return s?e.jsx(V,{title:"About Engine",description:"System specifications",actions:null,children:r}):e.jsx("div",{className:"min-h-full bg-[#FAFAFA] dark:bg-black text-gray-900 dark:text-zinc-100 p-6 md:p-0",children:e.jsx("main",{className:"max-w-4xl mx-auto py-12 md:py-24",children:r})})}function Wr(){const s=W.isNativePlatform(),r=[{name:"pdf-lib",url:"https://github.com/Hopding/pdf-lib",desc:"The core engine of PaperKnife, providing the low-level PDF manipulation capabilities that power every tool."},{name:"Termux",url:"https://github.com/termux/termux-app",desc:"The powerful terminal emulator for Android that made development on-the-go possible."},{name:"OpenCode",url:"https://github.com/opencode",desc:"The open-source community fostering collaboration and innovation."},{name:"Gemini CLI",url:"https://github.com/google-gemini/gemini-cli",desc:"The AI agent that assisted in the architectural design and implementation of PaperKnife."}],t=e.jsxs("div",{className:"animate-in fade-in duration-700",children:[e.jsxs("section",{className:s?"mb-10 text-center py-4":"mb-16",children:[e.jsxs("div",{className:`flex items-center gap-2 text-rose-500 font-black text-[10px] uppercase tracking-[0.4em] mb-6 ${s?"justify-center":""}`,children:[e.jsx(et,{size:14})," Acknowledgments"]}),e.jsxs("h2",{className:s?"text-4xl font-black tracking-tighter dark:text-white leading-tight mb-4":"text-5xl md:text-7xl font-black tracking-tighter text-gray-900 dark:text-white leading-[1.1] mb-8",children:["Special ",e.jsx("br",{}),e.jsx("span",{className:"text-rose-500",children:"Thanks."})]}),e.jsx("p",{className:"text-lg md:text-xl text-gray-500 dark:text-zinc-400 leading-relaxed font-medium max-w-2xl mx-auto",children:"PaperKnife wouldn't be possible without the incredible tools and communities that empower local-first development."})]}),e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-24",children:[e.jsxs("div",{className:"p-8 bg-zinc-900 dark:bg-white rounded-[2.5rem] border border-white/5 flex flex-col justify-center items-center text-center space-y-4 group",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-500/10 text-rose-500 rounded-full flex items-center justify-center animate-pulse group-hover:scale-110 transition-transform",children:e.jsx(Le,{size:32,fill:"currentColor"})}),e.jsx("h3",{className:"text-xl font-black tracking-tight text-white dark:text-black",children:"Future Supporters"}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 max-w-[200px] leading-relaxed",children:"This space is reserved for the heroes who keep this project alive."})]}),r.map(n=>e.jsxs("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"group p-8 bg-white dark:bg-zinc-950 rounded-[2.5rem] border border-gray-100 dark:border-zinc-800 hover:border-rose-500 transition-all shadow-sm flex flex-col justify-between h-full",children:[e.jsxs("div",{children:[e.jsx("div",{className:"w-12 h-12 bg-gray-50 dark:bg-zinc-900 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-rose-500 group-hover:text-white transition-colors text-gray-400",children:e.jsx(ts,{size:24})}),e.jsx("h3",{className:"text-xl font-black tracking-tight mb-2 dark:text-white",children:n.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 leading-relaxed",children:n.desc})]}),e.jsxs("div",{className:"mt-8 flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-rose-500 opacity-0 group-hover:opacity-100 transition-opacity",children:["Visit Repository ",e.jsx(ss,{size:12})]})]},n.name))]}),e.jsxs("footer",{className:"text-center py-10 opacity-20",children:[e.jsx(ce,{size:24,iconColor:"#F43F5E",className:"mx-auto mb-4"}),e.jsx("p",{className:"text-[9px] font-black uppercase tracking-[0.5em]",children:"PaperKnife Node v1.0.0-beta"})]})]});return s?e.jsx(V,{title:"Credits",description:"People and tools behind PaperKnife",actions:null,children:e.jsx("div",{className:"pb-20",children:t})}):e.jsx("div",{className:"min-h-full bg-[#FAFAFA] dark:bg-black text-gray-900 dark:text-zinc-100 selection:bg-rose-500 selection:text-white transition-colors duration-300",children:e.jsx("main",{className:"max-w-4xl mx-auto px-6 py-12 md:py-24",children:t})})}function _r(){const s=W.isNativePlatform(),r=e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-20",children:[e.jsxs("section",{className:"text-center py-8",children:[e.jsx("div",{className:"w-20 h-20 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-500 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-emerald-500/10",children:e.jsx(Je,{size:40})}),e.jsx("h1",{className:"text-4xl font-black tracking-tighter dark:text-white mb-4",children:"Privacy Policy"}),e.jsx("p",{className:"text-gray-500 dark:text-zinc-400 font-medium",children:'PaperKnife "Zero-Server" Architecture'})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"p-6 bg-white dark:bg-zinc-900 rounded-[2rem] border border-gray-100 dark:border-white/5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-xl flex items-center justify-center",children:e.jsx(Fs,{size:20})}),e.jsx("h3",{className:"font-black dark:text-white uppercase tracking-tight",children:"Zero Server"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 leading-relaxed",children:"PaperKnife is 100% client-side. Your PDF files never leave your device. All processing (merging, splitting, encryption) happens in your browser's RAM or the app's local memory."})]}),e.jsxs("div",{className:"p-6 bg-white dark:bg-zinc-900 rounded-[2rem] border border-gray-100 dark:border-white/5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 dark:bg-blue-900/20 text-blue-500 rounded-xl flex items-center justify-center",children:e.jsx(Ds,{size:20})}),e.jsx("h3",{className:"font-black dark:text-white uppercase tracking-tight",children:"No Tracking"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 leading-relaxed",children:"We do not use cookies, analytics, or telemetry. We don't know who you are, what you process, or how often you use the app."})]}),e.jsxs("div",{className:"p-6 bg-white dark:bg-zinc-900 rounded-[2rem] border border-gray-100 dark:border-white/5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-50 dark:bg-amber-900/20 text-amber-500 rounded-xl flex items-center justify-center",children:e.jsx(Ls,{size:20})}),e.jsx("h3",{className:"font-black dark:text-white uppercase tracking-tight",children:"Volatile Memory"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 leading-relaxed",children:"When you close the app or the browser tab, all processed PDF data is wiped from memory (RAM). We only store your theme preferences and recent activity history locally on your device (IndexedDB)."})]}),e.jsxs("div",{className:"p-6 bg-white dark:bg-zinc-900 rounded-[2rem] border border-gray-100 dark:border-white/5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-500 rounded-xl flex items-center justify-center",children:e.jsx(Oe,{size:20})}),e.jsx("h3",{className:"font-black dark:text-white uppercase tracking-tight",children:"Local History"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 leading-relaxed",children:'Recent activity is stored locally for your convenience. You can clear this history at any time in the Settings dashboard or use the "Auto-Wipe" feature.'})]})]}),e.jsxs("div",{className:"p-8 bg-zinc-900 rounded-[2.5rem] text-white",children:[e.jsx("h3",{className:"text-xl font-black uppercase tracking-tighter mb-4",children:"Integrity Pledge"}),e.jsx("p",{className:"text-sm text-zinc-400 leading-relaxed font-medium mb-6",children:"As an open-source project, PaperKnife's source code is publicly available for auditing. We believe that privacy is a fundamental human right, and our architecture reflects that."}),e.jsxs("a",{href:"https://github.com/potatameister/PaperKnife",target:"_blank",className:"inline-flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-rose-500 hover:text-rose-400 transition-colors",children:["Audit Source Code on GitHub ",e.jsx(Es,{size:12})]})]})]});return s?e.jsx(V,{title:"Privacy",description:"Our privacy commitment",actions:null,children:r}):e.jsx("div",{className:"min-h-full bg-[#FAFAFA] dark:bg-black text-gray-900 dark:text-zinc-100 p-6 md:p-0",children:e.jsx("main",{className:"max-w-4xl mx-auto py-12 md:py-24",children:r})})}const he=({icon:s,title:r,subtitle:t,action:n,onClick:o,danger:a})=>{const i=o?"button":"div";return e.jsxs(i,{onClick:o,className:`w-full flex items-center justify-between p-5 transition-colors text-left ${o?"active:bg-gray-100 dark:active:bg-zinc-900 cursor-pointer":"cursor-default"}`,children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${a?"bg-rose-50 dark:bg-rose-900/20 text-rose-500":"bg-gray-100 dark:bg-zinc-800 text-gray-500"}`,children:e.jsx(s,{size:20})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`text-sm font-bold truncate ${a?"text-rose-500":"text-gray-900 dark:text-white"}`,children:r}),t&&e.jsx("p",{className:"text-[10px] text-gray-500 dark:text-zinc-500 font-medium line-clamp-1",children:t})]})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[n,o&&!n&&e.jsx(ge,{size:18,className:"text-gray-300"})]})]})},Ie=({title:s,children:r})=>e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"px-6 mb-2 text-[10px] font-black uppercase tracking-[0.2em] text-rose-500",children:s}),e.jsx("div",{className:"bg-white dark:bg-zinc-900/40 backdrop-blur-md border-y border-gray-100 dark:border-white/5 divide-y divide-gray-50 dark:divide-white/5 shadow-sm",children:r})]});function Hr({theme:s,setTheme:r}){const t=de(),[n,o]=c.useState(localStorage.getItem("autoWipe")==="true"),[a,i]=c.useState(localStorage.getItem("autoWipeTimer")||"15"),[l,d]=c.useState(localStorage.getItem("hapticsEnabled")==="true"),[u,g]=c.useState(localStorage.getItem("autoDownload")==="true"),[y,m]=c.useState(localStorage.getItem("historyLimit")||"10"),[k,h]=c.useState(localStorage.getItem("defaultAuthor")||""),N=(E,P,x)=>{const b=!P;localStorage.setItem(E,String(b)),x(b),_e(),U.success(`${E.replace(/([A-Z])/g," $1").replace(/^./,z=>z.toUpperCase())} updated`)},L=(E,P,x)=>{localStorage.setItem(E,P),x(P),_e(),U.success("Setting saved")},F=()=>{confirm("Restore all settings to factory defaults?")&&(localStorage.clear(),localStorage.setItem("theme","system"),window.location.reload())};return e.jsx(V,{title:"Settings",description:"Application configuration",actions:null,children:e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-500 pb-32 -mx-4 md:mx-0",children:[e.jsxs(Ie,{title:"Appearance",children:[e.jsx("div",{className:"p-4 grid grid-cols-3 gap-2 bg-white dark:bg-zinc-950",children:[{id:"light",icon:gt,label:"Light"},{id:"dark",icon:mt,label:"Dark"},{id:"system",icon:As,label:"System"}].map(E=>e.jsxs("button",{onClick:()=>{r(E.id),_e()},className:`flex flex-col items-center gap-2 py-3 rounded-xl transition-all ${s===E.id?"bg-rose-500 text-white shadow-lg shadow-rose-500/20":"bg-gray-50 dark:bg-zinc-900 text-gray-400"}`,children:[e.jsx(E.icon,{size:18}),e.jsx("span",{className:"text-[10px] font-bold uppercase",children:E.label})]},E.id))}),e.jsx(he,{icon:pe,title:"Haptic Feedback",subtitle:"Vibrate on actions and success",action:e.jsx("button",{onClick:()=>N("hapticsEnabled",l,d),className:`w-11 h-6 rounded-full p-1 transition-colors ${l?"bg-rose-500":"bg-gray-200 dark:bg-zinc-700"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${l?"translate-x-5":"translate-x-0"}`})})})]}),e.jsxs(Ie,{title:"Workflow Defaults",children:[e.jsx(he,{icon:Rs,title:"Auto-Download",subtitle:"Trigger save as soon as task finishes",action:e.jsx("button",{onClick:()=>N("autoDownload",u,g),className:`w-11 h-6 rounded-full p-1 transition-colors ${u?"bg-rose-500":"bg-gray-200 dark:bg-zinc-700"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${u?"translate-x-5":"translate-x-0"}`})})}),e.jsx("div",{className:"p-5 bg-white dark:bg-zinc-950 space-y-4 border-t border-gray-50 dark:border-white/5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 dark:bg-zinc-800 rounded-full flex items-center justify-center text-gray-500",children:e.jsx(Us,{size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white leading-none",children:"Default Author"}),e.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:"Pre-fill metadata fields"}),e.jsx("input",{type:"text",value:k,onChange:E=>{h(E.target.value),localStorage.setItem("defaultAuthor",E.target.value)},placeholder:"Your name or company",className:"w-full mt-3 bg-gray-50 dark:bg-zinc-900 border border-gray-100 dark:border-white/5 rounded-xl px-4 py-2.5 text-xs font-bold outline-none focus:border-rose-500 transition-colors dark:text-white"})]})]})})]}),e.jsxs(Ie,{title:"Security & Privacy",children:[e.jsx(he,{icon:Xe,title:"Auto-Wipe History",subtitle:"Clear logs after inactivity",action:e.jsx("button",{onClick:()=>N("autoWipe",n,o),className:`w-11 h-6 rounded-full p-1 transition-colors ${n?"bg-rose-500":"bg-gray-200 dark:bg-zinc-700"}`,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${n?"translate-x-5":"translate-x-0"}`})})}),n&&e.jsxs("div",{className:"p-4 px-6 bg-rose-50/30 dark:bg-rose-900/10 flex items-center justify-between border-t border-rose-100/20 dark:border-rose-900/20",children:[e.jsx("span",{className:"text-[10px] font-black text-rose-500 uppercase tracking-widest",children:"Wipe Delay"}),e.jsxs("select",{value:a,onChange:E=>L("autoWipeTimer",E.target.value,i),className:"bg-transparent text-xs font-black text-gray-900 dark:text-white outline-none appearance-none cursor-pointer",children:[e.jsx("option",{value:"1",children:"1 Minute"}),e.jsx("option",{value:"5",children:"5 Minutes"}),e.jsx("option",{value:"15",children:"15 Minutes"}),e.jsx("option",{value:"30",children:"30 Minutes"}),e.jsx("option",{value:"0",children:"Immediate"})]})]}),e.jsxs("div",{className:"p-4 px-6 flex items-center justify-between border-t border-gray-50 dark:border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 dark:bg-zinc-800 rounded-full flex items-center justify-center text-gray-500",children:e.jsx($s,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white leading-none",children:"History Limit"}),e.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:"Number of recent files to keep"})]})]}),e.jsxs("select",{value:y,onChange:E=>L("historyLimit",E.target.value,m),className:"bg-transparent text-xs font-black text-rose-500 outline-none appearance-none cursor-pointer",children:[e.jsx("option",{value:"5",children:"5 Files"}),e.jsx("option",{value:"10",children:"10 Files"}),e.jsx("option",{value:"20",children:"20 Files"}),e.jsx("option",{value:"50",children:"50 Files"}),e.jsx("option",{value:"999",children:"Unlimited"})]})]}),e.jsx(he,{icon:Ts,title:"Restore Defaults",subtitle:"Reset all configuration",onClick:F}),e.jsx(he,{icon:Qe,title:"Nuke All Data",subtitle:"Wipe history and storage",danger:!0,onClick:async()=>{confirm("DANGER: This will delete ALL history and settings. Proceed?")&&(await Ue(),localStorage.clear(),window.location.reload())}})]}),e.jsxs(Ie,{title:"Application",children:[e.jsx(he,{icon:pt,title:"About PaperKnife",subtitle:"v1.0.0-beta • Active",onClick:()=>t("/about")}),e.jsx(he,{icon:Ge,title:"Privacy Policy",subtitle:"Zero-data collection commitment",onClick:()=>t("/privacy")})]}),e.jsx("div",{className:"flex flex-col items-center gap-2 py-10 opacity-20",children:e.jsx("p",{className:"text-[9px] font-black uppercase tracking-[0.5em]",children:"PaperKnife Node v1.0.0-beta"})})]})})}const Gr=Ce("Share",{web:()=>Ft(()=>import("./web-DhmvQuaI.js"),__vite__mapDeps([7,1,2,3,4,5])).then(s=>new s.ShareWeb)}),Kr="/PaperKnife/assets/pdf.worker.min-LyOxJPrg.mjs";Xs.workerSrc=Kr;const Ye=()=>W.isNativePlatform()?"cmaps/":"/PaperKnife/cmaps/",Ne=async(s,r,t)=>{if(W.isNativePlatform())try{const n=typeof s=="string"?s.split(",")[1]:btoa(s.reduce((o,a)=>o+String.fromCharCode(a),""));return await Dt.writeFile({path:r,data:n,directory:qe.Documents,recursive:!0}),!0}catch(n){throw console.error("Download error:",n),n}else{const n=typeof s=="string"?await(await fetch(s)).blob():new Blob([s],{type:t}),o=URL.createObjectURL(n),a=document.createElement("a");return a.href=o,a.download=r,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o),!0}},fs=async(s,r,t)=>{if(W.isNativePlatform())try{const n=typeof s=="string"?s.split(",")[1]:btoa(s.reduce((a,i)=>a+String.fromCharCode(i),"")),o=await Dt.writeFile({path:r,data:n,directory:qe.Cache,recursive:!0});return await Gr.share({title:r,text:"Shared via PaperKnife",url:o.uri,dialogTitle:"Share PDF"}),!0}catch(n){throw console.error("Share error:",n),n}else{const n=typeof s=="string"?await(await fetch(s)).blob():new Blob([s],{type:t}),o=new File([n],r,{type:t});if(navigator.share&&navigator.canShare?.({files:[o]}))try{return await navigator.share({files:[o],title:r,text:"Shared via PaperKnife"}),!0}catch{console.error("Web share failed, falling back to download")}return Ne(s,r,t)}},ae=async s=>{const r=await s.arrayBuffer();try{return await Ve({data:r,cMapUrl:Ye(),cMapPacked:!0}).promise}catch(t){if(t.name==="PasswordException")throw t;return await Ve({data:r,cMapUrl:Ye(),cMapPacked:!0,stopAtErrors:!1}).promise}},oe=async(s,r,t=1)=>{try{const n=await s.getPage(r),o=n.getViewport({scale:t}),a=300,i=Math.min(a/o.width,a/o.height),l=t*i*(Math.min(window.devicePixelRatio,2)||1),d=n.getViewport({scale:l}),u=document.createElement("canvas"),g=u.getContext("2d",{alpha:!1,desynchronized:!0,willReadFrequently:!1});if(!g)throw new Error("Canvas context not available");u.height=d.height,u.width=d.width,g.fillStyle="#ffffff",g.fillRect(0,0,u.width,u.height),await n.render({canvasContext:g,viewport:d,intent:"display"}).promise;const m=u.toDataURL("image/jpeg",.8);return u.width=0,u.height=0,m}catch(n){return console.error(`Error rendering page ${r}:`,n),""}},te=async s=>{try{const r=Ve({data:await s.arrayBuffer(),cMapUrl:Ye(),cMapPacked:!0});r.onPassword=()=>{throw new Error("PASSWORD_REQUIRED")};const t=await r.promise;return{thumbnail:await oe(t,1),pageCount:t.numPages,isLocked:!1}}catch(r){return r.message==="PASSWORD_REQUIRED"||r.name==="PasswordException"?{thumbnail:"",pageCount:0,isLocked:!0}:{thumbnail:"",pageCount:0,isLocked:!1}}},re=async(s,r)=>{try{const t=await s.arrayBuffer(),o=await Ve({data:t,password:r,cMapUrl:Ye(),cMapPacked:!0}).promise;return{thumbnail:await oe(o,1),pageCount:o.numPages,isLocked:!1,success:!0,pdfDoc:o}}catch{return{thumbnail:"",pageCount:0,isLocked:!0,success:!1}}};function Vr({file:s,onClose:r,onProcess:t}){const[n,o]=c.useState(null),[a,i]=c.useState(1),[l,d]=c.useState(0),[u,g]=c.useState(!0),[y,m]=c.useState(null),[k,h]=c.useState(!1),N=W.isNativePlatform();c.useEffect(()=>{(async()=>{g(!0);try{const x=await ae(s);o(x),d(x.numPages);const b=await oe(x,1,1.5);m(b)}catch(x){x.name==="PasswordException"&&h(!0),console.error("Preview load error:",x)}finally{g(!1)}})()},[s]);const L=async P=>{if(P<1||P>l||!n)return;g(!0),i(P);const x=await oe(n,P,1.5);m(x),g(!1)},F=async()=>{const P=await s.arrayBuffer();await fs(new Uint8Array(P),s.name,s.type)},E=async()=>{const P=await s.arrayBuffer();await Ne(new Uint8Array(P),s.name,s.type)};return e.jsxs("div",{className:"fixed inset-0 z-[200] bg-black flex flex-col animate-in fade-in duration-300",children:[e.jsxs("header",{className:"px-6 pt-safe pb-4 bg-zinc-900/90 backdrop-blur-xl border-b border-white/5 flex items-center justify-between h-20 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:r,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors active:scale-90",children:e.jsx(Q,{size:24})}),e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 bg-rose-500 rounded-lg flex items-center justify-center shadow-lg shadow-rose-500/20",children:e.jsx(ce,{size:18,iconColor:"#FFFFFF"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-sm font-black text-white truncate max-w-[150px] leading-tight",children:s.name}),e.jsx("p",{className:"text-[9px] font-black text-rose-500 uppercase tracking-widest",children:"Preview Mode"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[N&&e.jsx("button",{onClick:F,className:"p-2.5 bg-white/5 text-zinc-400 rounded-xl active:bg-rose-500 active:text-white transition-all",children:e.jsx(rs,{size:20})}),!N&&e.jsx("button",{onClick:E,className:"p-2.5 bg-white/5 text-zinc-400 rounded-xl active:bg-rose-500 active:text-white transition-all",children:e.jsx(ue,{size:20})}),e.jsxs("button",{onClick:t,className:"flex items-center gap-2 bg-rose-500 text-white px-4 py-2.5 rounded-xl font-black uppercase text-[10px] tracking-widest shadow-lg shadow-rose-500/20 active:scale-95 transition-all",children:[e.jsx(we,{size:16,strokeWidth:3}),"Process"]})]})]}),e.jsxs("main",{className:"flex-1 overflow-hidden flex flex-col items-center justify-center p-4 relative bg-zinc-950",children:[u&&e.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center bg-zinc-950/50 backdrop-blur-sm",children:e.jsx(K,{className:"w-10 h-10 text-rose-500 animate-spin"})}),k?e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-500/10 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(ye,{size:40})}),e.jsx("h3",{className:"text-xl font-black text-white",children:"Document Protected"}),e.jsx("p",{className:"text-sm text-zinc-500 max-w-xs mx-auto",children:"This file is encrypted. You can still process it using the Tools menu."}),e.jsx("button",{onClick:t,className:"px-8 py-3 bg-rose-500 text-white rounded-2xl font-black uppercase text-xs tracking-widest",children:"Go to Tools"})]}):y?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("img",{src:y,alt:`Page ${a}`,className:"max-w-full max-h-full object-contain shadow-2xl rounded-sm animate-in zoom-in-95 duration-300"})}):e.jsx("div",{className:"text-zinc-500 font-bold uppercase tracking-widest text-[10px]",children:"Loading Core Engine..."}),l>1&&!k&&e.jsxs("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex items-center gap-4 bg-zinc-900/80 backdrop-blur-md px-6 py-3 rounded-2xl border border-white/5 shadow-2xl",children:[e.jsx("button",{disabled:a===1,onClick:()=>L(a-1),className:"p-1 text-zinc-400 disabled:opacity-20 active:scale-90 transition-all",children:e.jsx(as,{size:24})}),e.jsxs("div",{className:"flex flex-col items-center min-w-[60px]",children:[e.jsxs("span",{className:"text-xs font-black text-white",children:[a," / ",l]}),e.jsx("span",{className:"text-[8px] font-black text-zinc-500 uppercase tracking-tighter",children:"Pages"})]}),e.jsx("button",{disabled:a===l,onClick:()=>L(a+1),className:"p-1 text-zinc-400 disabled:opacity-20 active:scale-90 transition-all",children:e.jsx(ge,{size:24})})]})]}),e.jsxs("footer",{className:"px-6 py-4 bg-zinc-900/90 border-t border-white/5 flex items-center justify-between text-[10px] font-black uppercase tracking-widest text-zinc-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),"Local Sandbox"]}),e.jsxs("div",{children:[(s.size/(1024*1024)).toFixed(2)," MB"]})]})]})}function $e(){const[s,r]=c.useState([]),t=c.useRef([]),n=c.useCallback(a=>{const i=URL.createObjectURL(a);return t.current.push(i),r([...t.current]),i},[]),o=c.useCallback(()=>{t.current.forEach(a=>URL.revokeObjectURL(a)),t.current=[],r([])},[]);return c.useEffect(()=>()=>{t.current.forEach(a=>URL.revokeObjectURL(a))},[]),{objectUrl:s[s.length-1]||null,urls:s,createUrl:n,clearUrls:o}}const qr="PaperKnifeWorkspace",Yr=1,me="workspaces",Et=()=>new Promise((s,r)=>{const t=indexedDB.open(qr,Yr);t.onupgradeneeded=()=>{const n=t.result;n.objectStoreNames.contains(me)||n.createObjectStore(me,{keyPath:"toolId"})},t.onsuccess=()=>s(t.result),t.onerror=()=>r(t.error)}),Zr=async(s,r)=>{try{const n=(await Et()).transaction(me,"readwrite"),o=n.objectStore(me),a={toolId:s,files:r,lastUpdated:Date.now()};return o.put(a),new Promise((i,l)=>{n.oncomplete=()=>i(!0),n.onerror=()=>l(n.error)})}catch(t){console.error("Save Workspace Error:",t)}},Yt=async s=>{try{const o=(await Et()).transaction(me,"readonly").objectStore(me).get(s);return new Promise((a,i)=>{o.onsuccess=()=>a(o.result||null),o.onerror=()=>i(o.error)})}catch(r){return console.error("Get Workspace Error:",r),null}},Pe=async s=>{try{(await Et()).transaction(me,"readwrite").objectStore(me).delete(s)}catch(r){console.error("Clear Workspace Error:",r)}};function se({message:s,downloadUrl:r,fileName:t,onStartOver:n,showPreview:o=!0}){const a=de(),{setPipelineFile:i}=Y(),l=W.isNativePlatform();c.useEffect(()=>{Sr(),localStorage.getItem("autoDownload")==="true"&&(async()=>{try{const L=await(await(await fetch(r)).blob()).arrayBuffer();await Ne(new Uint8Array(L),t,"application/pdf"),U.success("Auto-saved to device")}catch(h){console.error("Auto-download failed:",h)}})()},[r,t]);const d=async m=>{m.preventDefault();try{U.loading("Saving file...",{id:"save-action"});const N=await(await(await fetch(r)).blob()).arrayBuffer();await Ne(new Uint8Array(N),t,"application/pdf"),U.success(l?"File saved to Documents":"Download started",{id:"save-action"})}catch{U.error("Failed to save file",{id:"save-action"})}},u=async m=>{m.preventDefault();try{U.loading("Preparing to share...",{id:"share-action"});const N=await(await(await fetch(r)).blob()).arrayBuffer();await fs(new Uint8Array(N),t,"application/pdf"),U.dismiss("share-action")}catch{U.error("Failed to share file",{id:"share-action"})}},g=[{name:"Compress",icon:pe,path:"/compress",color:"text-amber-500",bg:"bg-amber-50 dark:bg-amber-900/20"},{name:"Protect",icon:Je,path:"/protect",color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-900/20"},{name:"Split",icon:Ee,path:"/split",color:"text-rose-500",bg:"bg-rose-50 dark:bg-rose-900/20"},{name:"Metadata",icon:ns,path:"/metadata",color:"text-purple-500",bg:"bg-purple-50 dark:bg-purple-900/20"}],y=async m=>{try{U.loading(`Preparing ${t} for ${m.name}...`,{id:"pipeline-load"});const N=await(await(await fetch(r)).blob()).arrayBuffer();i({buffer:new Uint8Array(N),name:t}),U.success(`Sent to ${m.name}`,{id:"pipeline-load"}),a(m.path)}catch(k){console.error("Pipeline error:",k),U.error("Failed to pipeline file.",{id:"pipeline-load"})}};return e.jsxs("div",{className:"animate-in slide-in-from-bottom duration-500 fade-in space-y-6",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 p-3 md:p-4 rounded-2xl flex items-center justify-center gap-2 font-bold text-xs md:text-sm border border-green-100 dark:border-green-900/30",children:[e.jsx(Jt,{size:16})," ",s]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex gap-3",children:[o&&e.jsxs("button",{onClick:()=>window.open(r,"_blank"),className:"flex-1 bg-white dark:bg-zinc-900 text-gray-900 dark:text-white border border-gray-200 dark:border-zinc-800 p-4 rounded-2xl md:rounded-3xl shadow-sm font-black text-sm md:text-xl tracking-tight transition-all hover:bg-gray-50 active:scale-95 flex items-center justify-center gap-2",children:[e.jsx(ft,{size:20})," Preview"]}),e.jsxs("button",{onClick:u,className:"flex-1 bg-rose-50 dark:bg-rose-900/20 text-rose-500 border border-rose-100 dark:border-rose-900/30 p-4 rounded-2xl md:rounded-3xl shadow-sm font-black text-sm md:text-xl tracking-tight transition-all active:scale-95 flex items-center justify-center gap-2",children:[e.jsx(rs,{size:20})," Share"]})]}),e.jsxs("button",{onClick:d,className:"w-full bg-gray-900 dark:bg-white text-white dark:text-black p-4 md:p-6 rounded-2xl md:rounded-3xl shadow-xl font-black text-lg md:text-xl tracking-tight transition-all hover:scale-[1.01] active:scale-95 flex items-center justify-center gap-3",children:[e.jsx(ue,{size:24})," ",l?"Save to Device":"Download"]})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-100 dark:border-zinc-800",children:[e.jsxs("p",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400 mb-4 flex items-center gap-2",children:[e.jsx(le,{size:12})," Next Step (Pipeline)"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:g.map(m=>e.jsxs("button",{onClick:()=>y(m),className:"flex flex-col items-center gap-2 p-4 bg-white dark:bg-zinc-900 border border-gray-100 dark:border-zinc-800 rounded-2xl hover:border-rose-500 transition-all group",children:[e.jsx("div",{className:`p-2 rounded-xl ${m.bg} ${m.color} group-hover:scale-110 transition-transform`,children:e.jsx(m.icon,{size:18})}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-tighter dark:text-zinc-300",children:m.name})]},m.name))})]}),e.jsx("button",{onClick:n,className:"w-full mt-4 py-2 text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 font-bold text-xs uppercase tracking-[0.2em]",children:"Start Over"})]})}function X(){return e.jsxs("div",{className:"mt-8 flex items-center justify-center gap-2 text-xs font-bold uppercase tracking-widest text-gray-400 dark:text-zinc-600",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"100% Client-Side Processing"]})}const Qr=s=>s<1024*1024?`${(s/1024).toFixed(1)} KB`:`${(s/(1024*1024)).toFixed(2)} MB`;function Xr({id:s,file:r,onRemove:t,onRotate:n,onUnlock:o}){const{attributes:a,listeners:i,setNodeRef:l,transform:d,transition:u,isDragging:g}=Ct({id:s}),[y,m]=c.useState(""),[k,h]=c.useState(!1),N={transform:Pt.Transform.toString(d),transition:u,zIndex:g?50:0,position:"relative"},L=async()=>{h(!0),await o(s,y),h(!1)};return e.jsxs("div",{ref:l,style:N,className:`flex items-center gap-3 p-3 bg-white dark:bg-zinc-900 rounded-2xl border transition-all shadow-sm group touch-none relative ${g?"border-rose-300 dark:border-rose-800 shadow-xl scale-[1.02] ring-4 ring-rose-500/10":"border-gray-100 dark:border-zinc-800 hover:border-rose-200 dark:hover:border-rose-900/30"}`,children:[e.jsx("div",{...a,...i,className:"p-2 cursor-grab text-rose-400 hover:text-rose-600 dark:text-rose-500/50 dark:hover:text-rose-400 hover:bg-rose-500/10 rounded-lg transition-colors active:scale-90",children:e.jsx(os,{size:20})}),e.jsx("div",{className:"w-12 h-16 bg-gray-50 dark:bg-zinc-800 rounded-lg overflow-hidden shrink-0 border border-gray-100 dark:border-zinc-800 relative group-hover:shadow-md transition-shadow",children:r.isLocked?e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gray-100 dark:bg-black text-rose-500",children:[e.jsx(q,{size:16}),e.jsx("span",{className:"text-[8px] font-black uppercase mt-1 text-center px-1",children:"Locked"})]}):r.thumbnail?e.jsx("img",{src:r.thumbnail,alt:"Preview",className:"w-full h-full object-cover transition-transform duration-500",style:{transform:`rotate(${r.rotation}deg)`}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center animate-pulse",children:e.jsx("div",{className:"w-4 h-4 border-2 border-rose-500 border-t-transparent rounded-full animate-spin"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-bold text-sm truncate text-gray-900 dark:text-white group-hover:text-rose-500 transition-colors",children:r.file.name}),r.isLocked&&e.jsx(q,{size:12,className:"text-rose-500 shrink-0"})]}),r.isLocked?e.jsxs("div",{className:"flex gap-1 mt-1",children:[e.jsx("input",{type:"password",placeholder:"Password",value:y,onChange:F=>m(F.target.value),className:"flex-1 bg-gray-50 dark:bg-black border border-gray-100 dark:border-zinc-800 rounded-lg px-2 py-1 text-[10px] font-bold outline-none focus:border-rose-500 text-gray-900 dark:text-white"}),e.jsx("button",{onClick:L,disabled:!y||k,className:"bg-rose-500 text-white px-2 py-1 rounded-lg text-[8px] font-black uppercase tracking-widest disabled:opacity-50 hover:scale-105 active:scale-95 transition-transform",children:k?"...":"Unlock"})]}):e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 font-medium",children:[e.jsx("span",{children:Qr(r.file.size)}),r.pageCount>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:[r.pageCount," pages"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[!r.isLocked&&e.jsx("button",{onClick:()=>n(s),className:"p-2 hover:bg-gray-50 dark:hover:bg-zinc-800 rounded-full text-gray-400 hover:text-rose-500 transition-all hover:rotate-90 active:scale-90",title:"Rotate 90°",children:e.jsx(xe,{size:18})}),e.jsx("button",{onClick:()=>t(s),className:"p-2 hover:bg-rose-500/10 rounded-full text-gray-400 hover:text-rose-500 transition-all hover:scale-110 active:scale-90",children:e.jsx(Q,{size:18})})]})]})}function Jr(){const s=c.useRef(null),{setPipelineFile:r,consumePipelineFile:t}=Y(),{objectUrl:n,createUrl:o,clearUrls:a}=$e(),[i,l]=c.useState([]),[d,u]=c.useState(!1),[g,y]=c.useState("paperknife-merged"),[m,k]=c.useState(0),[h,N]=c.useState(!1),[L,F]=c.useState(!1),E=W.isNativePlatform(),P=wt(fe(ds),fe(zt,{coordinateGetter:Nt}));c.useEffect(()=>{const v=t();if(v){if(v.type&&v.type!=="application/pdf"){U.error("The file from the previous tool is not a PDF and cannot be used here.");return}const A=new File([v.buffer],v.name,{type:"application/pdf"});b([A]),U.success(`Imported ${A.name} from pipeline`)}},[]),c.useEffect(()=>{Yt("merge").then(v=>{v&&v.files.length>0&&i.length===0&&F(!0)})},[]),c.useEffect(()=>{i.length>0?(async()=>{const A=await Promise.all(i.map(async $=>({name:$.file.name,buffer:new Uint8Array(await $.file.arrayBuffer()),settings:{rotation:$.rotation,password:$.password}})));Zr("merge",A)})():i.length===0&&!L&&Pe("merge")},[i]);const x=async()=>{const v=await Yt("merge");if(!v)return;const A=v.files.map($=>({id:Math.random().toString(36).substr(2,9),file:new File([$.buffer],$.name,{type:"application/pdf"}),thumbnail:void 0,pageCount:0,isLocked:!1,rotation:$.settings.rotation||0,password:$.settings.password}));l(A),F(!1),U.success("Workspace restored successfully!");for(const $ of A)te($.file).then(M=>{l(H=>H.map(_=>_.id===$.id?{..._,thumbnail:M.thumbnail,pageCount:M.pageCount,isLocked:M.isLocked}:_))})},b=async v=>{const A=Array.from(v).filter($=>$.type==="application/pdf").map($=>({id:Math.random().toString(36).substr(2,9),file:$,thumbnail:void 0,pageCount:0,isLocked:!1,rotation:0}));if(A.length!==0){l($=>[...$,...A]),a();for(const $ of A)te($.file).then(M=>{l(H=>H.map(_=>_.id===$.id?{..._,thumbnail:M.thumbnail,pageCount:M.pageCount,isLocked:M.isLocked}:_))})}},z=async(v,A)=>{const $=i.find(H=>H.id===v);if(!$)return;const M=await re($.file,A);M.success?l(H=>H.map(_=>_.id===v?{..._,isLocked:!1,thumbnail:M.thumbnail,pageCount:M.pageCount,password:A}:_)):U.error("Incorrect password for "+$.file.name)},w=v=>{v.target.files&&b(v.target.files)},p=v=>{v.preventDefault(),N(!0)},f=v=>{v.preventDefault(),v.currentTarget&&!v.currentTarget.contains(v.relatedTarget)&&N(!1)},S=v=>{v.preventDefault(),N(!1),v.dataTransfer.files&&b(v.dataTransfer.files)},j=v=>{const{active:A,over:$}=v;A.id!==$?.id&&l(M=>{const H=M.findIndex(J=>J.id===A.id),_=M.findIndex(J=>J.id===$?.id);return vt(M,H,_)})},C=v=>{l(A=>A.filter($=>$.id!==v)),a()},D=v=>{l(A=>A.map($=>$.id===v?{...$,rotation:($.rotation+90)%360}:$)),a()},R=i.reduce((v,A)=>v+A.pageCount,0),T=i.some(v=>v.isLocked),I=i.length>=2&&!T,O=async()=>{if(I){u(!0),k(0);try{const v=new Worker(new URL("/PaperKnife/assets/pdfWorker-DTSgDFeA.js",import.meta.url),{type:"module"}),A=[];for(const $ of i)A.push({buffer:await $.file.arrayBuffer(),rotation:$.rotation,password:$.password});v.postMessage({type:"MERGE_PDFS",payload:{files:A}}),v.onmessage=$=>{const{type:M,payload:H}=$.data;if(M==="PROGRESS")k(H);else if(M==="SUCCESS"){const _=new Blob([H],{type:"application/pdf"}),J=o(_),ne=`${g||"merged"}.pdf`;r({buffer:H,name:ne,type:"application/pdf"}),Z({name:ne,tool:"Merge",size:_.size,resultUrl:J}),u(!1),v.terminate(),Pe("merge"),U.success("PDFs merged successfully!")}else M==="ERROR"&&(U.error(H),u(!1),v.terminate())}}catch{U.error("An error occurred."),u(!1)}}},B=()=>e.jsx("button",{onClick:O,disabled:d||!I,className:"w-full bg-rose-500 hover:bg-rose-600 text-white font-black uppercase tracking-widest transition-all active:scale-95 disabled:opacity-50 py-4 rounded-2xl text-sm md:p-6 md:rounded-3xl md:text-xl flex items-center justify-center gap-3 shadow-lg shadow-rose-500/20",children:d?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"animate-spin"})," ",m,"%"]}):e.jsxs(e.Fragment,{children:["Merge PDFs ",e.jsx(le,{size:18})]})});return e.jsx(V,{title:"Merge PDF",description:"Combine multiple PDF files into one document. Processed entirely on your device.",actions:i.length>0&&!n&&e.jsx(B,{}),children:e.jsxs("div",{onDragOver:p,onDragLeave:f,onDrop:S,className:"flex-1",children:[h&&e.jsxs("div",{className:"fixed inset-0 z-[100] bg-rose-500/90 backdrop-blur-xl flex flex-col items-center justify-center text-white p-6 animate-in fade-in duration-300",children:[e.jsx("div",{className:"w-32 h-32 bg-white/20 rounded-full flex items-center justify-center mb-8 animate-bounce",children:e.jsx(we,{size:64,strokeWidth:3})}),e.jsx("h2",{className:"text-4xl md:text-6xl font-black mb-4 text-center",children:"Drop to Add"})]}),L&&e.jsxs("div",{className:"mb-8 p-6 bg-indigo-50 dark:bg-indigo-900/10 border border-indigo-100 dark:border-indigo-900/30 rounded-[2rem] flex flex-col md:flex-row items-center justify-between gap-4 animate-in slide-in-from-top duration-500 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4 text-left",children:[e.jsx("div",{className:"w-12 h-12 bg-white dark:bg-zinc-900 rounded-2xl flex items-center justify-center text-indigo-500 shadow-sm",children:e.jsx(Is,{size:24,className:"animate-spin-slow"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-sm dark:text-white uppercase tracking-tight",children:"Unfinished Work Found"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 font-medium",children:"We saved your previous file list. Want to restore it?"})]})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsx("button",{onClick:x,className:"flex-1 md:flex-none px-6 py-3 bg-indigo-500 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-indigo-600 transition-colors shadow-lg shadow-indigo-500/20 active:scale-95",children:"Restore"}),e.jsx("button",{onClick:()=>{Pe("merge"),F(!1)},className:"flex-1 md:flex-none px-6 py-3 bg-white dark:bg-zinc-800 text-gray-400 hover:text-rose-500 rounded-xl text-xs font-black uppercase tracking-widest transition-colors active:scale-95",children:"Discard"})]})]}),e.jsxs("div",{className:"space-y-6",children:[i.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center px-1",children:[e.jsxs("p",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400",children:[i.length," Files • ",R," Pages"]}),e.jsx("button",{onClick:()=>{l([]),a(),Pe("merge")},className:"text-[10px] font-black uppercase text-rose-500/60 hover:text-rose-500 transition-colors font-bold",children:"Clear All"})]}),e.jsx(yt,{sensors:P,collisionDetection:kt,onDragEnd:j,children:e.jsx(jt,{items:i.map(v=>v.id),strategy:cs,children:e.jsx("div",{className:"space-y-3",children:i.map(v=>e.jsx(Xr,{id:v.id,file:v,onRemove:C,onRotate:D,onUnlock:z},v.id))})})}),e.jsxs("button",{onClick:()=>s.current?.click(),className:"w-full py-4 border-2 border-dashed border-gray-200 dark:border-zinc-800 rounded-2xl text-gray-400 font-black uppercase text-[10px] tracking-widest flex items-center justify-center gap-2 hover:border-rose-500 hover:text-rose-500 transition-all",children:[e.jsx(we,{size:16})," Add More Files"]}),!n&&e.jsxs("div",{className:"p-6 bg-white dark:bg-zinc-900 rounded-3xl border border-gray-100 dark:border-white/5 shadow-sm",children:[e.jsx("label",{className:"block text-[10px] font-black uppercase tracking-widest text-gray-400 mb-3",children:"Output Filename"}),e.jsx("input",{type:"text",value:g,onChange:v=>y(v.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 outline-none font-bold text-sm border border-transparent focus:border-rose-500 transition-colors dark:text-white"})]})]}):e.jsxs("div",{onClick:()=>!d&&s.current?.click(),className:"border-4 border-dashed border-gray-100 dark:border-zinc-900 rounded-[2.5rem] p-12 text-center hover:bg-rose-50 dark:hover:bg-rose-900/10 transition-all cursor-pointer group",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform shadow-inner",children:e.jsx(Re,{size:32})}),e.jsx("h3",{className:"text-xl font-bold dark:text-white mb-2",children:"Select PDF Files"}),e.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"Tap to browse or drag and drop here"})]}),i.length>0&&!n&&!E&&e.jsx("div",{className:"mt-8",children:e.jsx(B,{})}),d&&!E&&e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsx("div",{className:"w-full bg-gray-100 dark:bg-zinc-800 h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-rose-500 h-full transition-all",style:{width:`${m}%`}})}),e.jsx("p",{className:"text-center text-[10px] font-black text-gray-400 uppercase tracking-widest animate-pulse",children:"Processing on Device..."})]}),n&&e.jsx("div",{className:"animate-in zoom-in duration-300",children:e.jsx(se,{message:"PDFs Merged Successfully!",downloadUrl:n,fileName:`${g||"merged"}.pdf`,onStartOver:()=>{l([]),a(),Pe("merge")}})})]}),e.jsx("input",{type:"file",multiple:!0,accept:".pdf",className:"hidden",ref:s,onChange:w}),e.jsx(X,{})]})})}const ea=({pdfDoc:s,pageNum:r})=>{const[t,n]=c.useState(null),o=c.useRef(null);return c.useEffect(()=>{if(!s||t)return;const a=new IntersectionObserver(i=>{i[0].isIntersecting&&(oe(s,r,1).then(n),a.disconnect())},{rootMargin:"200px"});return o.current&&a.observe(o.current),()=>a.disconnect()},[s,r,t]),t?e.jsx("img",{src:t,className:"w-full h-full object-cover animate-in fade-in duration-300",alt:`Page ${r}`}):e.jsx("div",{ref:o,className:"w-full h-full bg-gray-100 dark:bg-zinc-800 flex items-center justify-center text-xs font-bold text-gray-400",children:e.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-transparent rounded-full animate-spin"})})};function ta(){const s=c.useRef(null),{consumePipelineFile:r}=Y(),{objectUrl:t,createUrl:n,clearUrls:o}=$e(),[a,i]=c.useState(null),[l,d]=c.useState(!1),[u,g]=c.useState(!1),[y,m]=c.useState(new Set),[k,h]=c.useState("paperknife-split"),[N,L]=c.useState(""),[F,E]=c.useState("single"),[P,x]=c.useState("");c.useEffect(()=>{const C=r();if(C){const D=new File([C.buffer],C.name,{type:"application/pdf"});z(D)}},[]);const b=async()=>{if(!a||!P)return;g(!0);const C=await re(a.file,P);if(C.success){i({...a,isLocked:!1,pageCount:C.pageCount,pdfDoc:C.pdfDoc,password:P,thumbnail:C.thumbnail});const D=new Set;for(let R=1;R<=C.pageCount;R++)D.add(R);m(D),L(`1-${C.pageCount}`)}else U.error("Incorrect password");g(!1)},z=async C=>{if(C.type==="application/pdf"){g(!0);try{const D=await te(C);if(D.isLocked)i({file:C,pageCount:0,isLocked:!0});else{const R=await ae(C);i({file:C,pageCount:D.pageCount,isLocked:!1,pdfDoc:R,thumbnail:D.thumbnail});const T=new Set;for(let I=1;I<=D.pageCount;I++)T.add(I);m(T),L(`1-${D.pageCount}`)}}catch(D){console.error(D)}finally{g(!1),o()}}},w=C=>{C.target.files?.[0]&&z(C.target.files[0])},p=C=>{const D=new Set(y);D.has(C)?D.delete(C):D.add(C),m(D),o()},f=C=>{if(!a)return;const D=new Set;C.split(",").map(T=>T.trim()).forEach(T=>{if(T.includes("-")){const[I,O]=T.split("-").map(Number);if(!isNaN(I)&&!isNaN(O))for(let B=Math.max(1,I);B<=Math.min(O,a.pageCount);B++)D.add(B)}else{const I=Number(T);!isNaN(I)&&I>=1&&I<=a.pageCount&&D.add(I)}}),m(D),o()},S=async()=>{if(!(!a||y.size===0)){d(!0);try{const C=await a.file.arrayBuffer(),D=new Worker(new URL("/PaperKnife/assets/pdfWorker-DTSgDFeA.js",import.meta.url),{type:"module"});D.postMessage({type:"SPLIT_PDF",payload:{buffer:C,password:a.password,selectedPages:Array.from(y),mode:F,customFileName:k}}),D.onmessage=async R=>{const{type:T,payload:I}=R.data;if(T==="SUCCESS"){const O=new Blob([I],{type:"application/pdf"}),B=n(O);Z({name:`${k||"split"}.pdf`,tool:"Split",size:O.size,resultUrl:B}),d(!1),D.terminate()}else if(T==="SUCCESS_BATCH"){const O=new Ae;I.forEach(A=>{O.file(A.name,A.buffer)});const B=await O.generateAsync({type:"blob"}),v=n(B);Z({name:`${k||"split"}.zip`,tool:"Split",size:B.size,resultUrl:v}),d(!1),D.terminate()}else T==="ERROR"&&(U.error(I),d(!1),D.terminate())}}catch(C){U.error(C.message||"Error splitting PDF."),d(!1)}}},j=()=>e.jsx("button",{onClick:S,disabled:l||y.size===0,className:"w-full bg-rose-500 hover:bg-rose-600 text-white font-black uppercase tracking-widest transition-all active:scale-95 disabled:opacity-50 py-4 rounded-2xl text-sm md:p-6 md:rounded-3xl md:text-xl flex items-center justify-center gap-3 shadow-lg shadow-rose-500/20",children:l?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"animate-spin"})," Working..."]}):e.jsxs(e.Fragment,{children:["Extract ",y.size," Pages ",e.jsx(le,{size:18})]})});return e.jsxs(V,{title:"Split PDF",description:"Select pages visually or by range to extract them. Everything stays on your device.",actions:a&&!a.isLocked&&!t&&e.jsx(j,{}),children:[e.jsx("input",{type:"file",accept:".pdf",className:"hidden",ref:s,onChange:w}),a?a.isLocked?e.jsx("div",{className:"max-w-md mx-auto relative z-[100]",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2.5rem] border border-gray-100 dark:border-white/5 shadow-2xl text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(q,{size:32})}),e.jsx("h3",{className:"text-2xl font-bold mb-2 dark:text-white",children:"Protected File"}),e.jsx("input",{type:"password",value:P,onChange:C=>x(C.target.value),placeholder:"Enter Password",className:"w-full bg-gray-50 dark:bg-black rounded-2xl px-6 py-4 border border-transparent focus:border-rose-500 outline-none font-bold text-center mb-4 dark:text-white",autoFocus:!0}),e.jsx("button",{onClick:b,disabled:!P||u,className:"w-full bg-rose-500 text-white p-4 rounded-2xl font-black uppercase tracking-widest text-xs transition-all active:scale-95 disabled:opacity-50",children:"Unlock PDF"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-3xl border border-gray-100 dark:border-white/5 flex items-center gap-6 shadow-sm",children:[e.jsx("div",{className:"w-12 h-16 bg-gray-50 dark:bg-black rounded-xl overflow-hidden shrink-0 border border-gray-100 dark:border-zinc-800 flex items-center justify-center text-rose-500 shadow-inner",children:a.thumbnail?e.jsx("img",{src:a.thumbnail,className:"w-full h-full object-cover"}):e.jsx(Ee,{size:24})}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsx("h3",{className:"font-bold text-sm truncate dark:text-white",children:a.file.name}),e.jsxs("p",{className:"text-[10px] text-gray-400 uppercase font-black",children:[a.pageCount," Pages • ",(a.file.size/(1024*1024)).toFixed(1)," MB"]})]}),e.jsx("button",{onClick:()=>i(null),className:"p-2 text-gray-400 hover:text-rose-500 transition-colors",children:e.jsx(Q,{size:20})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 animate-in fade-in duration-500",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-[2rem] border border-gray-100 dark:border-white/5 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h4",{className:"font-black uppercase tracking-widest text-[10px] text-gray-400 px-2",children:"Page Selection"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{const C=new Set;for(let D=1;D<=a.pageCount;D++)C.add(D);m(C)},className:"text-[10px] font-black uppercase text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 px-2 py-1 rounded-lg transition-colors",children:"Select All"}),e.jsx("button",{onClick:()=>m(new Set),className:"text-[10px] font-black uppercase text-gray-400 px-2 py-1 hover:bg-gray-50 dark:hover:bg-white/5 rounded-lg transition-colors",children:"Clear"})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 max-h-[60vh] overflow-y-auto p-1 scrollbar-hide",children:Array.from({length:a.pageCount}).map((C,D)=>{const R=D+1,T=y.has(R);return e.jsxs("div",{onClick:()=>p(R),className:`relative group cursor-pointer aspect-[3/4] rounded-xl overflow-hidden border-2 transition-all ${T?"border-rose-500 shadow-md scale-[1.02]":"border-transparent hover:border-gray-200 dark:hover:border-zinc-800"}`,children:[e.jsx(ea,{pdfDoc:a.pdfDoc,pageNum:R}),e.jsx("div",{className:`absolute inset-0 flex items-center justify-center transition-opacity ${T?"bg-rose-500/10 opacity-100":"bg-black/20 opacity-0 group-hover:opacity-100"}`,children:e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shadow-lg transition-transform ${T?"bg-rose-500 text-white scale-100":"bg-white text-gray-400 scale-75"}`,children:T?e.jsx(is,{size:20,strokeWidth:3}):e.jsx(we,{size:20})})}),e.jsxs("div",{className:"absolute bottom-2 left-2 px-2 py-1 bg-black/50 backdrop-blur-md rounded text-[9px] font-black text-white",children:["PAGE ",R]})]},R)})})]})}),e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2rem] border border-gray-100 dark:border-white/5 shadow-sm sticky top-24",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase tracking-widest text-gray-400 mb-3",children:"Split Mode"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 bg-gray-50 dark:bg-black p-1 rounded-2xl",children:[e.jsx("button",{onClick:()=>{E("single"),o()},className:`py-2 px-3 rounded-xl text-[10px] font-black uppercase transition-all ${F==="single"?"bg-white dark:bg-zinc-800 text-rose-500 shadow-sm":"text-gray-400"}`,children:"Single"}),e.jsx("button",{onClick:()=>{E("individual"),o()},className:`py-2 px-3 rounded-xl text-[10px] font-black uppercase transition-all ${F==="individual"?"bg-white dark:bg-zinc-800 text-rose-500 shadow-sm":"text-gray-400"}`,children:"ZIP"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase tracking-widest text-gray-400 mb-3",children:"Output Filename"}),e.jsx("input",{type:"text",value:k,onChange:C=>h(C.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase tracking-widest text-gray-400 mb-3",children:"Range Selection"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:N,onChange:C=>L(C.target.value),placeholder:"e.g. 1, 3-5",className:"flex-1 bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm dark:text-white"}),e.jsx("button",{onClick:()=>f(N),className:"px-4 bg-rose-500 text-white rounded-xl font-black text-[10px] uppercase active:scale-95 transition-transform",children:"Apply"})]})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-100 dark:border-white/5",children:[e.jsxs("div",{className:"flex justify-between items-end mb-4 px-1",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]",children:"Selected"}),e.jsxs("span",{className:"text-xl font-black text-rose-500",children:[y.size," ",e.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:"Pages"})]})]}),t&&e.jsx(se,{message:"Split Successful!",downloadUrl:t,fileName:`${k||"split"}.${F==="single"?"pdf":"zip"}`,onStartOver:()=>o(),showPreview:F==="single"})]}),e.jsx("button",{onClick:()=>{i(null),o()},className:"w-full py-2 text-[10px] font-black uppercase text-gray-300 hover:text-rose-500 transition-colors",children:"Close File"})]})})})]})]}):e.jsx("div",{onClick:()=>!u&&s.current?.click(),className:`border-4 border-dashed border-gray-100 dark:border-zinc-900 rounded-[2.5rem] p-12 text-center hover:bg-rose-50 dark:hover:bg-rose-900/10 transition-all cursor-pointer group ${u?"opacity-50 cursor-wait":""}`,children:u?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(K,{size:48,className:"text-rose-500 animate-spin mb-4"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Analyzing PDF..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-20 h-20 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:e.jsx(Ee,{size:32})}),e.jsx("h3",{className:"text-xl font-bold dark:text-white mb-2",children:"Select PDF File"}),e.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"Tap to start splitting"})]})}),e.jsx(X,{})]})}const sa=ls(sr);/**
 * pdf-encrypt-lite - Ultra-lightweight PDF encryption library
 * Powers PDFSmaller.com's PDF encryption tool
 * 
 * @author PDFSmaller.com (https://pdfsmaller.com)
 * @license MIT
 * @see https://pdfsmaller.com/protect-pdf - Try it online!
 * 
 * This minimal cryptographic implementation was built to solve the "impossible" 
 * problem of real PDF encryption within Cloudflare Workers' 1MB limit.
 * Total size: ~7KB for complete PDF encryption!
 */function ra(s){const r=typeof s=="string"?new TextEncoder().encode(s):s,t=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],n=new Uint32Array([3614090360,3905402710,606105819,3250441966,4118548399,1200080426,2821735955,4249261313,1770035416,2336552879,4294925233,2304563134,1804603682,4254626195,2792965006,1236535329,4129170786,3225465664,643717713,3921069994,3593408605,38016083,3634488961,3889429448,568446438,3275163606,4107603335,1163531501,2850285829,4243563512,1735328473,2368359562,4294588738,2272392833,1839030562,4259657740,2763975236,1272893353,4139469664,3200236656,681279174,3936430074,3572445317,76029189,3654602809,3873151461,530742520,3299628645,4096336452,1126891415,2878612391,4237533241,1700485571,2399980690,4293915773,2240044497,1873313359,4264355552,2734768916,1309151649,4149444226,3174756917,718787259,3951481745]);let o=1732584193,a=4023233417,i=2562383102,l=271733878;const d=r.length,u=d*8,g=d+9+63&-64,y=new Uint8Array(g);y.set(r),y[d]=128;const m=new DataView(y.buffer);m.setUint32(g-8,u,!0),m.setUint32(g-4,0,!0);for(let N=0;N<g;N+=64){const L=new Uint32Array(y.buffer,N,16);let F=o,E=a,P=i,x=l;for(let b=0;b<64;b++){let z,w;b<16?(z=E&P|~E&x,w=b):b<32?(z=x&E|~x&P,w=(5*b+1)%16):b<48?(z=E^P^x,w=(3*b+5)%16):(z=P^(E|~x),w=7*b%16),z=z+F+n[b]+L[w]>>>0,F=x,x=P,P=E,E=E+(z<<t[b]|z>>>32-t[b])>>>0}o=o+F>>>0,a=a+E>>>0,i=i+P>>>0,l=l+x>>>0}const k=new Uint8Array(16),h=new DataView(k.buffer);return h.setUint32(0,o,!0),h.setUint32(4,a,!0),h.setUint32(8,i,!0),h.setUint32(12,l,!0),k}let aa=class{constructor(r){this.s=new Uint8Array(256),this.i=0,this.j=0;for(let n=0;n<256;n++)this.s[n]=n;let t=0;for(let n=0;n<256;n++)t=t+this.s[n]+r[n%r.length]&255,[this.s[n],this.s[t]]=[this.s[t],this.s[n]]}process(r){const t=new Uint8Array(r.length);for(let n=0;n<r.length;n++){this.i=this.i+1&255,this.j=this.j+this.s[this.i]&255,[this.s[this.i],this.s[this.j]]=[this.s[this.j],this.s[this.i]];const o=this.s[this.i]+this.s[this.j]&255;t[n]=r[n]^this.s[o]}return t}};function na(s){const r=new Uint8Array(s.length/2);for(let t=0;t<r.length;t++)r[t]=parseInt(s.substr(t*2,2),16);return r}function oa(s){return Array.from(s).map(r=>r.toString(16).padStart(2,"0")).join("")}const ia=Object.freeze(Object.defineProperty({__proto__:null,RC4:aa,bytesToHex:oa,hexToBytes:na,md5:ra},Symbol.toStringTag,{value:"Module"})),la=ls(ia);/**
 * pdf-encrypt-lite - Ultra-lightweight PDF encryption library
 * Powers PDFSmaller.com's PDF encryption tool
 * 
 * @author PDFSmaller.com (https://pdfsmaller.com)
 * @license MIT
 * @see https://pdfsmaller.com/protect-pdf - Try it online!
 * 
 * This module implements PDF Standard Security Handler (Algorithm 2 & 3 from PDF spec)
 * Built to solve the "impossible" problem of real PDF encryption within edge constraints
 * 
 * Total size with crypto: ~7KB - when others are 2-20MB!
 * Battle-tested on thousands of PDFs at PDFSmaller.com
 */const{PDFDocument:ca,PDFName:Zt,PDFHexString:Se,PDFString:da,PDFDict:ws,PDFArray:xa,PDFRawStream:ua,PDFNumber:Be}=sa,{md5:ze,RC4:Ze,hexToBytes:ys,bytesToHex:ke}=la,He=new Uint8Array([40,191,78,94,78,117,138,65,100,0,78,86,255,250,1,8,46,46,0,182,208,104,62,128,47,12,169,254,100,83,105,122]);function ct(s){const r=new TextEncoder().encode(s),t=new Uint8Array(32);return r.length>=32?t.set(r.slice(0,32)):(t.set(r),t.set(He.slice(0,32-r.length),r.length)),t}function pa(s,r,t,n){const o=ct(s),a=new Uint8Array(o.length+r.length+4+n.length);let i=0;a.set(o,i),i+=o.length,a.set(r,i),i+=r.length,a[i++]=t&255,a[i++]=t>>8&255,a[i++]=t>>16&255,a[i++]=t>>24&255,a.set(n,i);let l=ze(a);for(let d=0;d<50;d++)l=ze(l.slice(0,16));return l.slice(0,16)}function ma(s,r){const t=ct(s||r);let n=ze(t);for(let i=0;i<50;i++)n=ze(n);const o=ct(r);let a=new Uint8Array(o);for(let i=0;i<20;i++){const l=new Uint8Array(n.length);for(let u=0;u<n.length;u++)l[u]=n[u]^i;a=new Ze(l.slice(0,16)).process(a)}return a}function ga(s,r){const t=new Uint8Array(He.length+r.length);t.set(He),t.set(r,He.length);const n=ze(t);let a=new Ze(s).process(n);for(let l=1;l<=19;l++){const d=new Uint8Array(s.length);for(let g=0;g<s.length;g++)d[g]=s[g]^l;a=new Ze(d).process(a)}const i=new Uint8Array(32);return i.set(a),i.set(new Uint8Array(16),16),i}function dt(s,r,t,n){const o=new Uint8Array(n.length+5);o.set(n),o[n.length]=r&255,o[n.length+1]=r>>8&255,o[n.length+2]=r>>16&255,o[n.length+3]=t&255,o[n.length+4]=t>>8&255;const a=ze(o);return new Ze(a.slice(0,Math.min(n.length+5,16))).process(s)}function xt(s,r,t,n){if(s){if(s instanceof da){const o=s.asBytes(),a=dt(o,r,t,n);s.value=ke(a)}else if(s instanceof Se){const o=ys(s.asString()),a=dt(o,r,t,n);s.value=ke(a)}else if(s instanceof ws){const o=s.entries();for(const[a,i]of o){const l=a.asString();l!=="/Length"&&l!=="/Filter"&&l!=="/DecodeParms"&&xt(i,r,t,n)}}else if(s instanceof xa){const o=s.asArray();for(const a of o)xt(a,r,t,n)}}}async function ha(s,r,t=null){try{const n=await ca.load(s,{ignoreEncryption:!0,updateMetadata:!1}),o=n.context;let a;const i=o.trailerInfo,l=i.ID;if(l&&Array.isArray(l)&&l.length>0){const F=l[0].toString().replace(/^<|>$/g,"");a=ys(F)}else{const L=new Uint8Array(16);if(typeof crypto<"u"&&crypto.getRandomValues)crypto.getRandomValues(L);else for(let P=0;P<16;P++)L[P]=Math.floor(Math.random()*256);a=L;const F=Se.of(ke(a)),E=Se.of(ke(a));i.ID=[F,E]}const d=4294967292,u=ma(t,r),g=pa(r,u,d,a),y=ga(g,a),m=o.enumerateIndirectObjects();for(const[L,F]of m){const E=L.objectNumber,P=L.generationNumber||0;if(F instanceof ws){const x=F.get(Zt.of("Filter"));if(x&&x.asString()==="/Standard")continue}if(F instanceof ua){const x=F.contents,b=dt(x,E,P,g);F.contents=b}xt(F,E,P,g)}const k=o.obj({Filter:Zt.of("Standard"),V:Be.of(2),R:Be.of(3),Length:Be.of(128),P:Be.of(d),O:Se.of(ke(u)),U:Se.of(ke(y))}),h=o.register(k);return i.Encrypt=h,await n.save({useObjectStreams:!1})}catch(n){throw console.error("PDF encryption error:",n),new Error(`Failed to encrypt PDF: ${n.message}`)}}var ba=ha;function fa(){const s=c.useRef(null),{consumePipelineFile:r}=Y(),{objectUrl:t,createUrl:n,clearUrls:o}=$e(),[a,i]=c.useState(null),[l,d]=c.useState(!1),[u,g]=c.useState(""),[y,m]=c.useState(""),[k,h]=c.useState(""),[N,L]=c.useState("paperknife-protected"),F=W.isNativePlatform();c.useEffect(()=>{const w=r();if(w){const p=new File([w.buffer],w.name,{type:"application/pdf"});P(p)}},[]);const E=async()=>{if(!a||!k)return;d(!0);const w=await re(a.file,k);w.success?(i({...a,isLocked:!1,thumbnail:w.thumbnail,pageCount:w.pageCount,sourcePassword:k}),L(`${a.file.name.replace(".pdf","")}-protected`)):U.error("Incorrect password"),d(!1)},P=async w=>{if(w.type!=="application/pdf")return;const p=await te(w);i({file:w,thumbnail:p.thumbnail,pageCount:p.pageCount,isLocked:p.isLocked}),L(`${w.name.replace(".pdf","")}-protected`),o()},x=w=>{w.target.files?.[0]&&P(w.target.files[0])},b=async()=>{if(!(!a||!u||u!==y)){d(!0),await new Promise(w=>setTimeout(w,100));try{const w=await a.file.arrayBuffer(),p=await ee.load(w,{password:a.sourcePassword||void 0,ignoreEncryption:!0}),f=await ee.create();(await f.copyPages(p,p.getPageIndices())).forEach(T=>f.addPage(T));const j=await f.save(),C=await ba(j,u),D=new Blob([C],{type:"application/pdf"}),R=n(D);Z({name:`${N||"protected"}.pdf`,tool:"Protect",size:D.size,resultUrl:R})}catch(w){U.error(`Failed: ${w.message}`)}finally{d(!1)}}},z=()=>e.jsx("button",{onClick:b,disabled:l||!u||u!==y,className:`w-full bg-rose-500 hover:bg-rose-600 text-white font-black uppercase tracking-widest transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-3 shadow-xl shadow-rose-500/20 ${F?"py-4 rounded-2xl text-sm":"p-6 rounded-3xl text-xl"}`,children:l?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"animate-spin"})," Securing..."]}):e.jsxs(e.Fragment,{children:["Encrypt & Save ",e.jsx(le,{size:18})]})});return e.jsxs(V,{title:"Protect PDF",description:"Add strong encryption to your documents. Processed locally.",actions:a&&!a.isLocked&&!t&&e.jsx(z,{}),children:[e.jsx("input",{type:"file",accept:".pdf",className:"hidden",ref:s,onChange:x}),a?a.isLocked?e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2.5rem] border border-gray-100 dark:border-white/5 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(q,{size:32})}),e.jsx("h3",{className:"text-2xl font-bold mb-2 dark:text-white",children:"Protected File"}),e.jsx("input",{type:"password",value:k,onChange:w=>h(w.target.value),placeholder:"Current Password",className:"w-full bg-gray-50 dark:bg-black rounded-2xl px-6 py-4 border border-transparent focus:border-rose-500 outline-none font-bold text-center mb-4"}),e.jsx("button",{onClick:E,disabled:!k||l,className:"w-full bg-rose-500 text-white p-4 rounded-2xl font-black uppercase tracking-widest text-xs",children:l?"...":"Unlock"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-3xl border border-gray-100 dark:border-white/5 flex items-center gap-6",children:[e.jsx("div",{className:"w-16 h-20 bg-gray-50 dark:bg-black rounded-xl overflow-hidden shrink-0 border border-gray-100 dark:border-zinc-800 flex items-center justify-center text-rose-500",children:a.thumbnail?e.jsx("img",{src:a.thumbnail,className:"w-full h-full object-cover"}):e.jsx(q,{size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-sm truncate dark:text-white",children:a.file.name}),e.jsxs("p",{className:"text-[10px] text-gray-400 uppercase font-black tracking-widest",children:[a.pageCount," Pages • ",(a.file.size/(1024*1024)).toFixed(1)," MB"]})]}),e.jsx("button",{onClick:()=>i(null),className:"p-2 text-gray-400 hover:text-rose-500 transition-colors",children:e.jsx(Q,{size:20})})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-3xl border border-gray-100 dark:border-white/5 space-y-6 shadow-sm",children:[t?e.jsx(se,{message:"Encrypted Successfully",downloadUrl:t,fileName:`${N||"protected"}.pdf`,onStartOver:()=>{o(),g(""),m(""),i(null)}}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-2 tracking-widest px-1",children:"New Password"}),e.jsx("input",{type:"password",value:u,onChange:w=>g(w.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm dark:text-white",placeholder:"••••••••"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-2 tracking-widest px-1",children:"Confirm Password"}),e.jsx("input",{type:"password",value:y,onChange:w=>m(w.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm dark:text-white",placeholder:"••••••••"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-2 tracking-widest px-1",children:"Output Filename"}),e.jsx("input",{type:"text",value:N,onChange:w=>L(w.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm dark:text-white"})]})]}),e.jsxs("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/10 rounded-2xl border border-amber-100 dark:border-white/5 flex items-start gap-3",children:[e.jsx(q,{size:14,className:"text-amber-500 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-[10px] text-amber-700 dark:text-amber-400 leading-relaxed font-medium",children:"PaperKnife cannot recover forgotten passwords. Save it securely."})]}),e.jsx("button",{onClick:()=>i(null),className:"w-full py-2 text-[10px] font-black uppercase text-gray-300 hover:text-rose-500 transition-colors",children:"Close File"})]})]}):e.jsxs("div",{onClick:()=>s.current?.click(),className:"border-4 border-dashed border-gray-100 dark:border-zinc-900 rounded-[2.5rem] p-12 text-center hover:bg-rose-50 dark:hover:bg-rose-900/10 transition-all cursor-pointer group",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:e.jsx(Ge,{size:32})}),e.jsx("h3",{className:"text-xl font-bold dark:text-white mb-2",children:"Select PDF"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Tap to browse files"})]}),e.jsx(X,{})]})}const wa=({originalBuffer:s,compressedBuffer:r})=>{const[t,n]=c.useState(""),[o,a]=c.useState(""),[i,l]=c.useState(50),d=c.useRef(null);c.useEffect(()=>{(async()=>{try{const y=await ae(new File([s],"orig.pdf",{type:"application/pdf"})),m=await ae(new File([r],"comp.pdf",{type:"application/pdf"})),k=await oe(y,1,2),h=await oe(m,1,2);n(k),a(h)}catch(y){console.error(y)}})()},[s,r]);const u=g=>{if(!d.current)return;const y=d.current.getBoundingClientRect(),k=(("touches"in g?g.touches[0].clientX:g.clientX)-y.left)/y.width*100;l(Math.max(0,Math.min(100,k)))};return!t||!o?e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center bg-gray-50 dark:bg-zinc-900 rounded-[2rem] animate-pulse",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-rose-500 border-t-transparent rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-[10px] font-black uppercase text-gray-400",children:"Comparing Quality..."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center px-2",children:e.jsxs("h4",{className:"text-[10px] font-black uppercase text-gray-400 flex items-center gap-2",children:[e.jsx(Bs,{size:12})," Quality Inspection"]})}),e.jsxs("div",{ref:d,className:"relative h-80 md:h-[400px] rounded-[2rem] overflow-hidden cursor-ew-resize select-none border border-gray-100 dark:border-white/5",onMouseMove:u,onTouchMove:u,children:[e.jsx("img",{src:o,className:"absolute inset-0 w-full h-full object-contain bg-white",alt:"Compressed"}),e.jsx("div",{className:"absolute inset-0 w-full h-full overflow-hidden",style:{clipPath:`inset(0 ${100-i}% 0 0)`},children:e.jsx("img",{src:t,className:"absolute inset-0 w-full h-full object-contain bg-white",alt:"Original"})}),e.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-white shadow-xl z-10",style:{left:`${i}%`},children:e.jsxs("div",{className:"absolute top-1/2 -translate-y-1/2 -translate-x-1/2 w-8 h-8 bg-white dark:bg-zinc-900 rounded-full shadow-2xl border border-gray-100 dark:border-white/5 flex items-center justify-center text-rose-500",children:[e.jsx(as,{size:14}),e.jsx(ge,{size:14})]})})]})]})};function ya(){const s=c.useRef(null),{consumePipelineFile:r,setPipelineFile:t,lastPipelinedFile:n}=Y(),{objectUrl:o,createUrl:a,clearUrls:i}=$e(),[l,d]=c.useState([]),[u,g]=c.useState(!1),[y,m]=c.useState(0),[k,h]=c.useState("medium"),[N,L]=c.useState(!1),F=W.isNativePlatform();c.useEffect(()=>{const p=r();if(p){if(p.type&&p.type!=="application/pdf"){U.error("The file from the previous tool is not a PDF and cannot be used here.");return}const f=new File([p.buffer],p.name,{type:"application/pdf"});E([f])}},[]);const E=async p=>{const f=Array.from(p).filter(S=>S.type==="application/pdf").map(S=>({id:Math.random().toString(36).substr(2,9),file:S,pageCount:0,isLocked:!1,status:"pending"}));d(S=>[...S,...f]),L(!1),i();for(const S of f)te(S.file).then(j=>{d(C=>C.map(D=>D.id===S.id?{...D,pageCount:j.pageCount,isLocked:j.isLocked,thumbnail:j.thumbnail}:D))})},P=async(p,f)=>{const S=l.find(C=>C.id===p);if(!S)return;const j=await re(S.file,f);j.success?d(C=>C.map(D=>D.id===p?{...D,isLocked:!1,pageCount:j.pageCount,pdfDoc:j.pdfDoc,thumbnail:j.thumbnail,password:f}:D)):U.error("Incorrect password")},x=async(p,f,S)=>{let j=p.pdfDoc||await ae(p.file);const C={high:1,medium:1.5,low:2},D={high:.3,medium:.5,low:.7},R=C[f],T=D[f],I=[];for(let O=1;O<=p.pageCount;O++){const B=await j.getPage(O),v=B.getViewport({scale:R}),A=document.createElement("canvas"),$=A.getContext("2d");if(!$)continue;A.height=v.height,A.width=v.width,await B.render({canvasContext:$,viewport:v}).promise;const H=A.toDataURL("image/jpeg",T).split(",")[1],_=window.atob(H),J=new Uint8Array(_.length);for(let ne=0;ne<_.length;ne++)J[ne]=_.charCodeAt(ne);I.push({imageBytes:J,width:v.width,height:v.height}),S&&S(Math.round(O/p.pageCount*50)),A.width=0,A.height=0}return new Promise((O,B)=>{try{const v=new Worker(new URL("/PaperKnife/assets/pdfWorker-DTSgDFeA.js",import.meta.url),{type:"module"});v.postMessage({type:"COMPRESS_PDF_ASSEMBLY",payload:{pages:I,quality:f}},I.map(A=>A.imageBytes.buffer)),v.onmessage=A=>{if(A.data.type==="PROGRESS")S&&S(50+Math.round(A.data.payload*.5));else if(A.data.type==="SUCCESS"){const $=new Blob([A.data.payload],{type:"application/pdf"});O({url:a($),size:$.size,buffer:A.data.payload}),v.terminate()}else A.data.type==="ERROR"&&(B(new Error(A.data.payload)),v.terminate())},v.onerror=()=>{B(new Error("Worker failed to start or execution error.")),v.terminate()}}catch(v){B(new Error(`Failed to start worker: ${v.message}`))}})},b=async()=>{const p=l.filter(j=>!j.isLocked&&j.status==="pending");if(p.length===0)return;g(!0),m(0);const f=[],S=p.length===1;for(let j=0;j<p.length;j++){const C=p[j];d(D=>D.map(R=>R.id===C.id?{...R,status:"processing"}:R));try{const{url:D,size:R,buffer:T}=await x(C,k,S?m:void 0);if(f.push({name:C.file.name.replace(".pdf","-compressed.pdf"),buffer:T}),d(I=>I.map(O=>O.id===C.id?{...O,status:"completed",resultUrl:D,resultSize:R}:O)),Z({name:C.file.name.replace(".pdf","-compressed.pdf"),tool:"Compress",size:R,resultUrl:D}),p.length===1){const I=await p[0].file.arrayBuffer();t({buffer:T,name:C.file.name.replace(".pdf","-compressed.pdf"),type:"application/pdf",originalBuffer:new Uint8Array(I)})}}catch{d(D=>D.map(R=>R.id===C.id?{...R,status:"error"}:R))}S||m(Math.round((j+1)/p.length*100))}if(f.length>1){const j=new Ae;f.forEach(D=>j.file(D.name,D.buffer));const C=await j.generateAsync({type:"blob"});a(C)}g(!1),L(!0)},z=async()=>{if(o&&l.length>1){const p=new Ae;for(const S of l)if(S.resultUrl){const j=await fetch(S.resultUrl);p.file(S.file.name.replace(".pdf","-compressed.pdf"),await j.arrayBuffer())}const f=await p.generateAsync({type:"blob"});await Ne(new Uint8Array(await f.arrayBuffer()),"paperknife-compressed.zip","application/zip")}},w=()=>e.jsx("button",{onClick:b,disabled:u||l.filter(p=>!p.isLocked).length===0,className:"w-full bg-rose-500 hover:bg-rose-600 text-white font-black uppercase tracking-widest transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-3 shadow-lg shadow-rose-500/20 py-4 rounded-2xl text-sm md:p-6 md:rounded-3xl md:text-xl",children:u?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"animate-spin"})," ",y,"%"]}):e.jsxs(e.Fragment,{children:["Compress ",l.length>1?`${l.length} Files`:"PDF"," ",e.jsx(le,{size:18})]})});return e.jsxs(V,{title:"Compress PDF",description:"Reduce file size while maintaining quality. Everything stays on your device.",actions:l.length>0&&!N&&e.jsx(w,{}),children:[e.jsx("input",{type:"file",multiple:!0,accept:".pdf",className:"hidden",ref:s,onChange:p=>p.target.files&&E(p.target.files)}),l.length===0?e.jsxs("div",{onClick:()=>s.current?.click(),className:"border-4 border-dashed border-gray-100 dark:border-zinc-900 rounded-[2.5rem] p-12 text-center hover:bg-rose-50 dark:hover:bg-rose-900/10 transition-all cursor-pointer group",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform shadow-inner",children:e.jsx(pe,{size:32})}),e.jsx("h3",{className:"text-xl font-bold dark:text-white mb-2",children:"Select PDFs"}),e.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"Tap to start batch compression"})]}):N?e.jsxs("div",{className:"space-y-6 animate-in zoom-in duration-300",children:[o&&l.length>1&&e.jsxs("button",{onClick:z,className:"block w-full bg-zinc-900 dark:bg-white text-white dark:text-black p-10 rounded-[2.5rem] text-center shadow-2xl transition-all group active:scale-[0.98]",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform shadow-lg",children:e.jsx(ue,{className:"text-white",size:32})}),e.jsx("h3",{className:"text-2xl font-black tracking-tight mb-1",children:F?"Save ZIP Archive":"Download ZIP Archive"}),e.jsxs("p",{className:"text-xs font-bold opacity-60 uppercase tracking-widest",children:[l.length," Optimized PDFs"]})]}),o&&l.length===1&&e.jsxs("div",{className:"space-y-8",children:[n?.originalBuffer&&n?.buffer&&e.jsx("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-[2.5rem] border border-gray-100 dark:border-white/5 shadow-sm",children:e.jsx(wa,{originalBuffer:n.originalBuffer,compressedBuffer:n.buffer})}),e.jsx(se,{message:`Reduced by ${((1-(l[0].resultSize||0)/l[0].file.size)*100).toFixed(0)}%`,downloadUrl:o,fileName:l[0].file.name.replace(".pdf","-compressed.pdf"),onStartOver:()=>{d([]),L(!1),i()}})]}),e.jsxs("button",{onClick:()=>{d([]),L(!1),i()},className:"w-full py-4 text-gray-400 hover:text-rose-500 font-black uppercase tracking-[0.3em] text-[10px] flex items-center justify-center gap-2",children:[e.jsx(Ke,{size:14})," Start New Session"]})]}):e.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.map(p=>e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-[1.5rem] border border-gray-100 dark:border-white/5 flex items-center gap-4 relative group shadow-sm",children:[e.jsx("div",{className:"w-12 h-16 bg-gray-50 dark:bg-black rounded-lg overflow-hidden shrink-0 border border-gray-100 dark:border-zinc-800",children:p.thumbnail?e.jsx("img",{src:p.thumbnail,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(es,{className:"text-gray-300",size:16})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-black truncate dark:text-white",children:p.file.name}),p.isLocked?e.jsx("div",{className:"flex gap-1 mt-1",children:e.jsx("input",{type:"password",placeholder:"Locked...",className:"flex-1 bg-gray-50 dark:bg-black text-[10px] p-1.5 rounded-lg outline-none w-full border border-gray-100 dark:border-zinc-800 focus:border-rose-500",onKeyDown:f=>{f.key==="Enter"&&P(p.id,f.currentTarget.value)}})}):e.jsxs("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-tighter",children:[(p.file.size/(1024*1024)).toFixed(2)," MB • ",p.pageCount," Pages"]})]}),e.jsx("button",{onClick:()=>d(f=>f.filter(S=>S.id!==p.id)),className:"p-2 text-gray-300 hover:text-rose-500 transition-colors",children:e.jsx(Q,{size:16})})]},p.id)),e.jsxs("button",{onClick:()=>s.current?.click(),className:"border-2 border-dashed border-gray-100 dark:border-zinc-800 rounded-[1.5rem] p-4 text-gray-400 flex flex-col items-center justify-center gap-1 hover:border-rose-500 hover:text-rose-500 transition-all",children:[e.jsx(we,{size:20}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Add More"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2rem] border border-gray-100 dark:border-white/5 shadow-sm",children:[e.jsx("h4",{className:"text-[10px] font-black uppercase text-gray-400 mb-6 tracking-widest px-1",children:"Compression Strategy"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{id:"high",label:"Pro",desc:"Sharpest"},{id:"medium",label:"Balanced",desc:"Standard"},{id:"low",label:"Extreme",desc:"Smallest"}].map(p=>e.jsxs("button",{onClick:()=>h(p.id),className:`p-4 rounded-2xl border-2 transition-all flex flex-col items-center gap-1 ${k===p.id?"border-rose-500 bg-rose-50/50 dark:bg-rose-900/10":"border-gray-100 dark:border-white/5"}`,children:[e.jsx("span",{className:`font-black uppercase text-[10px] ${k===p.id?"text-rose-500":"text-gray-400"}`,children:p.label}),e.jsx("span",{className:"text-[8px] text-gray-400 font-bold uppercase",children:p.desc})]},p.id))}),e.jsxs("div",{className:"mt-6 p-6 bg-gray-50 dark:bg-black rounded-2xl border border-gray-100 dark:border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-rose-500/10 text-rose-500 flex items-center justify-center",children:e.jsx(pe,{size:16})}),e.jsx("h5",{className:"text-xs font-black uppercase tracking-widest dark:text-white",children:"Strategy Details"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-zinc-400 leading-relaxed",children:[k==="high"&&e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Pro Mode:"})," Retains maximum text clarity and image resolution (1.0x scale). Best for official documents, portfolios, and high-fidelity reports. Expected reduction: ",e.jsx("span",{className:"text-rose-500 font-bold",children:"10-30%"}),"."]}),k==="medium"&&e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Balanced:"})," Downsamples images to 150DPI (1.5x scale) with optimized JPEG compression. The perfect middle ground for everyday sharing and email attachments. Expected reduction: ",e.jsx("span",{className:"text-rose-500 font-bold",children:"40-60%"}),"."]}),k==="low"&&e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Extreme:"})," Aggressive downsampling (2.0x scale) and high compression. Ideal for quick mobile viewing or meeting strict 2MB upload limits. Expected reduction: ",e.jsx("span",{className:"text-rose-500 font-bold",children:"70-90%"}),"."]})]})]}),u&&e.jsxs("div",{className:"mt-8 space-y-3",children:[e.jsx("div",{className:"w-full bg-gray-100 dark:bg-zinc-800 h-2 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:"bg-rose-500 h-full transition-all",style:{width:`${y}%`}})}),e.jsx("p",{className:"text-[10px] text-center font-black uppercase text-gray-400 tracking-widest animate-pulse",children:"Rasterizing Document..."})]})]})]}),e.jsx(X,{})]})}function ka(){const s=c.useRef(null),{consumePipelineFile:r}=Y(),{objectUrl:t,createUrl:n,clearUrls:o}=$e(),[a,i]=c.useState(null),[l,d]=c.useState(!1),[u,g]=c.useState(""),[y,m]=c.useState("paperknife-unlocked");c.useEffect(()=>{const F=r();if(F){const E=new File([F.buffer],F.name,{type:"application/pdf"});k(E)}},[]);const k=async F=>{if(F.type!=="application/pdf")return;const E=await te(F);i({file:F,thumbnail:E.thumbnail,pageCount:E.pageCount,isLocked:E.isLocked}),m(`${F.name.replace(".pdf","")}-unlocked`),o(),g("")},h=F=>{F.target.files?.[0]&&k(F.target.files[0])},N=async()=>{if(!(!a||a.isLocked&&!u)){d(!0),await new Promise(F=>setTimeout(F,100));try{if(!(await re(a.file,u)).success)throw new Error("Incorrect password.");const E=await a.file.arrayBuffer(),x=await(await ee.load(E,{password:u||void 0,ignoreEncryption:!0})).save(),b=new Blob([x],{type:"application/pdf"}),z=n(b);Z({name:`${y||"unlocked"}.pdf`,tool:"Unlock",size:b.size,resultUrl:z})}catch(F){U.error(F.message||"Error.")}finally{d(!1)}}},L=()=>e.jsxs("button",{onClick:N,disabled:l||a?.isLocked&&!u,className:"w-full bg-rose-500 hover:bg-rose-600 text-white font-black uppercase tracking-widest transition-all active:scale-95 disabled:opacity-50 py-4 rounded-2xl text-sm md:p-6 md:rounded-3xl md:text-xl flex items-center justify-center gap-3 shadow-lg shadow-rose-500/20",children:[l?e.jsx(K,{className:"animate-spin"}):e.jsx(nt,{size:20})," Unlock PDF"]});return e.jsxs(V,{title:"Unlock PDF",description:"Remove passwords and restrictions permanently. Processed locally.",actions:a&&!t&&e.jsx(L,{}),children:[e.jsx("input",{type:"file",accept:".pdf",className:"hidden",ref:s,onChange:h}),a?e.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-3xl border border-gray-100 dark:border-white/5 flex items-center gap-6 shadow-sm",children:[e.jsx("div",{className:"w-16 h-20 bg-gray-50 dark:bg-black rounded-xl overflow-hidden shrink-0 border border-gray-100 dark:border-zinc-800 flex items-center justify-center text-rose-500 shadow-inner",children:a.thumbnail?e.jsx("img",{src:a.thumbnail,className:"w-full h-full object-cover"}):e.jsx(q,{size:20})}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsx("h3",{className:"font-bold text-sm truncate dark:text-white",children:a.file.name}),e.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-black",children:a.isLocked?"Encrypted Document":"Open Document"})]}),e.jsx("button",{onClick:()=>i(null),className:"p-2 text-gray-400 hover:text-rose-500 transition-colors",children:e.jsx(Q,{size:20})})]}),e.jsx("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2rem] border border-gray-100 dark:border-white/5 space-y-6 shadow-sm",children:t?e.jsx(se,{message:"Encryption Removed!",downloadUrl:t,fileName:`${y||"unlocked"}.pdf`,onStartOver:()=>{o(),g(""),i(null)}}):e.jsxs("div",{className:"space-y-6",children:[a.isLocked?e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-3",children:"Master Password"}),e.jsx("input",{type:"password",value:u,onChange:F=>g(F.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-4 border border-transparent focus:border-rose-500 outline-none font-bold text-lg text-center dark:text-white",placeholder:"••••••••",autoFocus:!0})]}):e.jsx("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/10 rounded-xl border border-emerald-100 dark:border-emerald-900/20 text-center",children:e.jsx("p",{className:"text-emerald-600 dark:text-emerald-400 font-bold text-xs uppercase tracking-widest",children:"File is already unlocked!"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-3",children:"Output Filename"}),e.jsx("input",{type:"text",value:y,onChange:F=>m(F.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm dark:text-white"})]})]})})]}):e.jsxs("div",{onClick:()=>s.current?.click(),className:"border-4 border-dashed border-gray-100 dark:border-zinc-900 rounded-[2.5rem] p-12 text-center hover:bg-rose-50 dark:hover:bg-rose-900/10 transition-all cursor-pointer group",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:e.jsx(nt,{size:32})}),e.jsx("h3",{className:"text-xl font-bold dark:text-white mb-2",children:"Select Locked PDF"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Tap to browse files"})]}),e.jsx(X,{})]})}function ja(){const s=c.useRef(null),{consumePipelineFile:r,setPipelineFile:t}=Y(),[n,o]=c.useState(null),[a,i]=c.useState(!1),[l,d]=c.useState(0),[u,g]=c.useState(null),[y,m]=c.useState("jpg"),[k,h]=c.useState("paperknife-images"),[N,L]=c.useState(""),F=W.isNativePlatform();c.useEffect(()=>{const z=r();if(z){if(z.type&&z.type!=="application/pdf"){U.error("The file from the previous tool is not a PDF and cannot be used here.");return}const w=new File([z.buffer],z.name,{type:"application/pdf"});P(w)}},[]);const E=async()=>{if(!n||!N)return;i(!0);const z=await re(n.file,N);z.success?(o({...n,isLocked:!1,pageCount:z.pageCount,pdfDoc:z.pdfDoc,thumbnail:z.thumbnail,password:N}),h(`${n.file.name.replace(".pdf","")}-images`)):U.error("Incorrect password"),i(!1)},P=async z=>{if(z.type==="application/pdf"){i(!0);try{const w=await te(z);if(w.isLocked)o({file:z,pageCount:0,isLocked:!0});else{const p=await ae(z);o({file:z,pageCount:w.pageCount,isLocked:!1,pdfDoc:p,thumbnail:w.thumbnail}),h(`${z.name.replace(".pdf","")}-images`)}}catch(w){console.error(w)}finally{i(!1),g(null)}}},x=async()=>{if(!(!n||!n.pdfDoc)){i(!0),d(0),await new Promise(z=>setTimeout(z,100));try{const z=new Ae,w=2;for(let j=1;j<=n.pageCount;j++){const C=await n.pdfDoc.getPage(j),D=C.getViewport({scale:w}),R=document.createElement("canvas"),T=R.getContext("2d");if(!T)continue;R.height=D.height,R.width=D.width,await C.render({canvasContext:T,viewport:D}).promise;const O=R.toDataURL(y==="png"?"image/png":"image/jpeg",.8).split(",")[1],B=j.toString().padStart(Math.max(2,n.pageCount.toString().length),"0");z.file(`${k}-${B}.${y}`,O,{base64:!0}),d(Math.round(j/n.pageCount*100))}const p=await z.generateAsync({type:"blob"}),f=URL.createObjectURL(p);g(f);const S=new Uint8Array(await p.arrayBuffer());t({buffer:S,name:`${k}.zip`,type:"application/zip"}),Z({name:`${k}.zip`,tool:"PDF to Image",size:p.size,resultUrl:f})}catch(z){U.error(`Error: ${z.message}`)}finally{i(!1)}}},b=()=>e.jsx("button",{onClick:x,disabled:a,className:`w-full bg-rose-500 hover:bg-rose-600 text-white font-black uppercase tracking-widest transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-3 shadow-xl shadow-rose-500/20 ${F?"py-4 rounded-2xl text-sm":"p-6 rounded-3xl text-xl"}`,children:a?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"animate-spin"})," ",l,"%"]}):e.jsxs(e.Fragment,{children:["Convert to Images ",e.jsx(le,{size:18})]})});return e.jsxs(V,{title:"PDF to Image",description:"Convert document pages into high-quality images.",actions:n&&!n.isLocked&&!u&&e.jsx(b,{}),children:[e.jsx("input",{type:"file",accept:".pdf",className:"hidden",ref:s,onChange:z=>z.target.files?.[0]&&P(z.target.files[0])}),n?n.isLocked?e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2.5rem] border border-gray-100 dark:border-white/5 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(q,{size:32})}),e.jsx("h3",{className:"text-2xl font-bold mb-2 dark:text-white",children:"Protected File"}),e.jsx("input",{type:"password",value:N,onChange:z=>L(z.target.value),placeholder:"Password",className:"w-full bg-gray-50 dark:bg-black rounded-2xl px-6 py-4 border border-transparent focus:border-rose-500 outline-none font-bold text-center mb-4"}),e.jsx("button",{onClick:E,disabled:!N||a,className:"w-full bg-rose-500 text-white p-4 rounded-2xl font-black uppercase text-xs",children:"Unlock"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-3xl border border-gray-100 dark:border-white/5 flex items-center gap-6",children:[e.jsx("div",{className:"w-16 h-20 bg-gray-50 dark:bg-black rounded-xl overflow-hidden shrink-0 border border-gray-100 dark:border-zinc-800 flex items-center justify-center text-rose-500",children:n.thumbnail?e.jsx("img",{src:n.thumbnail,className:"w-full h-full object-cover"}):e.jsx(je,{size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-sm truncate dark:text-white",children:n.file.name}),e.jsxs("p",{className:"text-[10px] text-gray-400 uppercase font-black",children:[n.pageCount," Pages • ",(n.file.size/(1024*1024)).toFixed(1)," MB"]})]}),e.jsx("button",{onClick:()=>o(null),className:"p-2 text-gray-400 hover:text-rose-500 transition-colors",children:e.jsx(Q,{size:20})})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2rem] border border-gray-100 dark:border-white/5 space-y-8 shadow-sm",children:[u?e.jsx(se,{message:"Images Ready!",downloadUrl:u,fileName:`${k}.zip`,onStartOver:()=>{g(null),d(0),o(null)},showPreview:!1}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-4 tracking-widest px-1",children:"Image Format"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:["jpg","png"].map(z=>e.jsx("button",{onClick:()=>m(z),className:`p-4 rounded-2xl border-2 transition-all flex flex-col items-center ${y===z?"border-rose-500 bg-rose-50/50 dark:bg-rose-900/10":"border-gray-100 dark:border-white/5"}`,children:e.jsx("span",{className:`font-black uppercase text-[10px] ${y===z?"text-rose-500":"text-gray-400"}`,children:z})},z))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-3 tracking-widest px-1",children:"Output ZIP Name"}),e.jsx("input",{type:"text",value:k,onChange:z=>h(z.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm dark:text-white"})]})]}),e.jsx("button",{onClick:()=>o(null),className:"w-full py-2 text-[10px] font-black uppercase text-gray-300 hover:text-rose-500 transition-colors",children:"Close File"})]})]}):e.jsxs("div",{onClick:()=>!a&&s.current?.click(),className:"border-4 border-dashed border-gray-100 dark:border-zinc-900 rounded-[2.5rem] p-12 text-center hover:bg-rose-50 dark:hover:bg-rose-900/10 transition-all cursor-pointer group",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:e.jsx(je,{size:32})}),e.jsx("h3",{className:"text-xl font-bold dark:text-white mb-2",children:"Select PDF"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Tap to start converting"})]}),e.jsx(X,{})]})}const va=({pdfDoc:s,pageNum:r,rotation:t})=>{const[n,o]=c.useState(null),a=c.useRef(null);return c.useEffect(()=>{if(!s||n)return;const i=new IntersectionObserver(l=>{l[0].isIntersecting&&(oe(s,r,1).then(o),i.disconnect())},{rootMargin:"200px"});return a.current&&i.observe(a.current),()=>i.disconnect()},[s,r,n]),n?e.jsx("img",{src:n,className:"w-full h-full object-contain transition-transform duration-300 bg-white",style:{transform:`rotate(${t}deg)`},alt:`P${r}`}):e.jsx("div",{ref:a,className:"w-full h-full bg-gray-100 dark:bg-zinc-800 flex items-center justify-center",children:e.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-transparent rounded-full animate-spin"})})};function Na(){const s=c.useRef(null),{consumePipelineFile:r}=Y(),[t,n]=c.useState(null),[o,a]=c.useState({}),[i,l]=c.useState(!1),[d,u]=c.useState(null),[g,y]=c.useState("paperknife-rotated"),[m,k]=c.useState("");c.useEffect(()=>{const x=r();if(x){const b=new File([x.buffer],x.name,{type:"application/pdf"});N(b)}},[]);const h=async()=>{if(!t||!m)return;l(!0);const x=await re(t.file,m);x.success?(n({...t,isLocked:!1,pageCount:x.pageCount,pdfDoc:x.pdfDoc,password:m,thumbnail:x.thumbnail}),y(`${t.file.name.replace(".pdf","")}-rotated`)):U.error("Incorrect password"),l(!1)},N=async x=>{if(x.type==="application/pdf"){l(!0);try{const b=await te(x);if(b.isLocked)n({file:x,pageCount:0,isLocked:!0});else{const z=await ae(x);n({file:x,pageCount:b.pageCount,isLocked:!1,pdfDoc:z,thumbnail:b.thumbnail}),y(`${x.name.replace(".pdf","")}-rotated`),a({})}}catch(b){console.error(b)}finally{l(!1),u(null)}}},L=x=>{a(b=>({...b,[x]:((b[x]||0)+90)%360})),u(null)},F=()=>{const x={...o};for(let b=1;b<=(t?.pageCount||0);b++)x[b]=((x[b]||0)+90)%360;a(x),u(null)},E=async()=>{if(t){l(!0),await new Promise(x=>setTimeout(x,100));try{const x=await t.file.arrayBuffer(),b=await ee.load(x,{password:t.password||void 0,ignoreEncryption:!0});b.getPages().forEach((S,j)=>{const C=j+1,D=o[C]||0;if(D!==0){const R=S.getRotation().angle;S.setRotation(xs((R+D)%360))}});const w=await b.save(),p=new Blob([w],{type:"application/pdf"}),f=URL.createObjectURL(p);u(f),Z({name:`${g}.pdf`,tool:"Rotate",size:p.size,resultUrl:f})}catch(x){U.error(`Error: ${x.message}`)}finally{l(!1)}}},P=()=>e.jsxs("button",{onClick:E,disabled:i,className:"w-full bg-rose-500 hover:bg-rose-600 text-white font-black uppercase tracking-widest transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-3 shadow-lg shadow-rose-500/20 py-4 rounded-2xl text-sm md:p-6 md:rounded-3xl md:text-xl",children:[i?e.jsx(K,{className:"animate-spin"}):e.jsx(xe,{size:20})," Save Rotated PDF"]});return e.jsxs(V,{title:"Rotate PDF",description:"Tap individual pages to rotate 90 degrees.",actions:t&&!t.isLocked&&!d&&e.jsx(P,{}),children:[e.jsx("input",{type:"file",accept:".pdf",className:"hidden",ref:s,onChange:x=>x.target.files?.[0]&&N(x.target.files[0])}),t?t.isLocked?e.jsx("div",{className:"max-w-md mx-auto relative z-[100]",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2.5rem] border border-gray-100 dark:border-white/5 text-center shadow-2xl",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(q,{size:32})}),e.jsx("h3",{className:"text-2xl font-bold mb-2 dark:text-white",children:"Protected File"}),e.jsx("input",{type:"password",value:m,onChange:x=>k(x.target.value),placeholder:"Password",className:"w-full bg-gray-50 dark:bg-black rounded-2xl px-6 py-4 border border-transparent focus:border-rose-500 outline-none font-bold text-center mb-4 dark:text-white"}),e.jsx("button",{onClick:h,disabled:!m||i,className:"w-full bg-rose-500 text-white p-4 rounded-2xl font-black uppercase text-xs",children:"Unlock"})]})}):e.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-3xl border border-gray-100 dark:border-white/5 flex items-center gap-6 shadow-sm",children:[e.jsx("div",{className:"w-12 h-16 bg-gray-50 dark:bg-black rounded-xl overflow-hidden shrink-0 border border-gray-100 dark:border-zinc-800 flex items-center justify-center text-rose-500 shadow-inner",children:t.thumbnail?e.jsx("img",{src:t.thumbnail,className:"w-full h-full object-cover"}):e.jsx(xe,{size:24})}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsx("h3",{className:"font-bold text-sm truncate dark:text-white",children:t.file.name}),e.jsxs("p",{className:"text-[10px] text-gray-400 uppercase font-black tracking-widest",children:[t.pageCount," Pages • ",(t.file.size/(1024*1024)).toFixed(1)," MB"]})]}),e.jsx("button",{onClick:()=>n(null),className:"p-2 text-gray-400 hover:text-rose-500 transition-colors",children:e.jsx(Q,{size:20})})]}),e.jsxs("div",{className:"bg-rose-500/5 dark:bg-rose-500/10 border border-rose-500/20 rounded-2xl p-4 flex items-center gap-4 animate-pulse",children:[e.jsx("div",{className:"w-10 h-10 bg-rose-500 text-white rounded-full flex items-center justify-center shrink-0 shadow-lg shadow-rose-500/20",children:e.jsx(xe,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-black text-rose-500 uppercase tracking-tight leading-none mb-1",children:"Visual Editor"}),e.jsx("p",{className:"text-xs text-rose-500/70 font-bold",children:"Tap any page thumbnail below to rotate it 90° clockwise."})]})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-[2rem] border border-gray-100 dark:border-white/5 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h4",{className:"font-black uppercase tracking-widest text-[10px] text-gray-400",children:"Page Preview"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:F,className:"text-[10px] font-black uppercase text-rose-500 flex items-center gap-1 font-bold",children:[e.jsx(xe,{size:12})," All"]}),e.jsxs("button",{onClick:()=>a({}),className:"text-[10px] font-black uppercase text-gray-400 flex items-center gap-1 font-bold",children:[e.jsx(Ke,{size:12})," Reset"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 max-h-[60vh] overflow-y-auto p-1 scrollbar-hide",children:Array.from({length:t.pageCount}).map((x,b)=>{const z=b+1,w=o[z]||0;return e.jsxs("div",{onClick:()=>L(z),className:"relative group cursor-pointer aspect-[3/4] rounded-xl overflow-hidden border-2 border-transparent hover:border-rose-500 transition-all bg-gray-50 dark:bg-black shadow-sm",children:[e.jsx("div",{className:"w-full h-full p-2",children:e.jsx(va,{pdfDoc:t.pdfDoc,pageNum:z,rotation:w})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/0 group-hover:bg-black/5 transition-colors",children:e.jsx("div",{className:"bg-white dark:bg-zinc-800 text-rose-500 p-2 rounded-full opacity-0 group-hover:opacity-100 shadow-xl scale-75 group-hover:scale-100 transition-all border border-gray-100 dark:border-white/5",children:e.jsx(xe,{size:20})})}),e.jsxs("div",{className:"absolute bottom-2 left-2 px-2 py-1 bg-black/50 backdrop-blur-md rounded text-[9px] font-black text-white",children:["PAGE ",z]})]},z)})})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2rem] border border-gray-100 dark:border-white/5 shadow-sm space-y-6",children:[d?e.jsx(se,{message:"PDF Rotated Successfully!",downloadUrl:d,fileName:`${g}.pdf`,onStartOver:()=>{u(null),n(null)}}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-3",children:"Output Filename"}),e.jsx("input",{type:"text",value:g,onChange:x=>y(x.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm dark:text-white"})]})}),e.jsx("button",{onClick:()=>n(null),className:"w-full py-2 text-[10px] font-black uppercase text-gray-300 hover:text-rose-500 transition-colors",children:"Close File"})]})]}):e.jsxs("div",{onClick:()=>!i&&s.current?.click(),className:"border-4 border-dashed border-gray-100 dark:border-zinc-900 rounded-[2.5rem] p-12 text-center hover:bg-rose-50 dark:hover:bg-rose-900/10 transition-all cursor-pointer group",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:e.jsx(xe,{size:32})}),e.jsx("h3",{className:"text-xl font-bold dark:text-white mb-2",children:"Select PDF"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Tap to start rotating"})]}),e.jsx(X,{})]})}function za(){const s=c.useRef(null),{consumePipelineFile:r}=Y(),[t,n]=c.useState(null),[o,a]=c.useState(""),[i,l]=c.useState(!1),[d,u]=c.useState(0),[g,y]=c.useState("text"),[m,k]=c.useState(""),[h,N]=c.useState("paperknife-extracted"),[L,F]=c.useState(!1),E=W.isNativePlatform();c.useEffect(()=>{const p=r();if(p){const f=new File([p.buffer],p.name,{type:"application/pdf"});x(f)}},[]);const P=async()=>{if(!t||!m)return;l(!0);const p=await re(t.file,m);p.success?n({...t,isLocked:!1,pageCount:p.pageCount,pdfDoc:p.pdfDoc,password:m}):U.error("Incorrect password"),l(!1)},x=async p=>{if(p.type==="application/pdf"){l(!0);try{const f=await te(p);if(f.isLocked)n({file:p,pageCount:0,isLocked:!0});else{const S=await ae(p);n({file:p,pageCount:f.pageCount,isLocked:!1,pdfDoc:S}),N(`${p.name.replace(".pdf","")}-extracted`)}a("")}catch(f){console.error(f)}finally{l(!1)}}},b=async()=>{if(!(!t||!t.pdfDoc)){l(!0),u(0),a("");try{let p="";if(g==="text")for(let f=1;f<=t.pageCount;f++){const j=await(await t.pdfDoc.getPage(f)).getTextContent();p+=`--- Page ${f} ---
${j.items.map(C=>C.str).join(" ")}

`,u(Math.round(f/t.pageCount*100))}else{const f=await rr.createWorker("eng",1,{logger:j=>{if(j.status==="recognizing text"){const C=(S-1)/t.pageCount*100;u(Math.round(C+j.progress*(100/t.pageCount)))}}});let S=1;for(let j=1;j<=t.pageCount;j++){S=j;const C=await t.pdfDoc.getPage(j),D=C.getViewport({scale:2}),R=document.createElement("canvas"),T=R.getContext("2d");if(!T)continue;R.height=D.height,R.width=D.width,await C.render({canvasContext:T,viewport:D}).promise;const{data:{text:I}}=await f.recognize(R);p+=`--- Page ${j} (OCR) ---
${I}

`,R.width=0,R.height=0}await f.terminate()}a(p),U.success("Complete!")}catch(p){U.error(p.message)}finally{l(!1)}}},z=async()=>{await Ne(o,`${h}.txt`,"text/plain")},w=()=>e.jsx("button",{onClick:b,disabled:i,className:`w-full bg-rose-500 hover:bg-rose-600 text-white font-black uppercase tracking-widest transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-3 shadow-xl shadow-rose-500/20 ${E?"py-4 rounded-2xl text-sm":"p-6 rounded-3xl text-xl"}`,children:i?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"animate-spin"})," ",d,"%"]}):e.jsxs(e.Fragment,{children:["Extract Text ",e.jsx(le,{size:18})]})});return e.jsxs(V,{title:"PDF to Text",description:"Extract text using fast scan or deep local OCR.",actions:t&&!t.isLocked&&!o&&e.jsx(w,{}),children:[e.jsx("input",{type:"file",accept:".pdf",className:"hidden",ref:s,onChange:p=>p.target.files?.[0]&&x(p.target.files[0])}),t?t.isLocked?e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2.5rem] border border-gray-100 dark:border-white/5 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(q,{size:32})}),e.jsx("h3",{className:"text-2xl font-bold mb-2 dark:text-white",children:"Protected File"}),e.jsx("input",{type:"password",value:m,onChange:p=>k(p.target.value),placeholder:"Password",className:"w-full bg-gray-50 dark:bg-black rounded-2xl px-6 py-4 border border-transparent focus:border-rose-500 outline-none font-bold text-center mb-4"}),e.jsx("button",{onClick:P,disabled:!m||i,className:"w-full bg-rose-500 text-white p-4 rounded-2xl font-black uppercase text-xs",children:"Unlock"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-3xl border border-gray-100 dark:border-white/5 flex items-center gap-6",children:[e.jsx("div",{className:"w-16 h-20 bg-gray-50 dark:bg-black rounded-xl border border-gray-100 dark:border-zinc-800 flex items-center justify-center text-rose-500",children:e.jsx(ye,{size:24})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-sm truncate dark:text-white",children:t.file.name}),e.jsxs("p",{className:"text-[10px] text-gray-400 uppercase font-black",children:[t.pageCount," Pages • ",(t.file.size/(1024*1024)).toFixed(1)," MB"]})]}),e.jsx("button",{onClick:()=>n(null),className:"p-2 text-gray-400 hover:text-rose-500",children:e.jsx(Q,{size:20})})]}),e.jsx("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2rem] border border-gray-100 dark:border-white/5 space-y-8 shadow-sm",children:o?e.jsxs("div",{className:"space-y-6",children:[e.jsx("textarea",{readOnly:!0,value:o,className:"w-full h-80 bg-gray-50 dark:bg-black border border-gray-100 dark:border-white/5 rounded-2xl p-4 font-mono text-[10px] resize-none outline-none focus:border-rose-500 dark:text-gray-300 shadow-inner"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(o),F(!0),setTimeout(()=>F(!1),2e3)},className:"flex-1 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white border border-gray-100 dark:border-white/5 p-4 rounded-2xl font-black flex items-center justify-center gap-2 transition-all active:scale-95",children:[L?e.jsx(is,{size:18,className:"text-emerald-500"}):e.jsx(Ms,{size:18})," Copy"]}),e.jsxs("button",{onClick:z,className:"flex-[2] bg-gray-900 dark:bg-white text-white dark:text-black p-4 rounded-2xl font-black flex items-center justify-center gap-2 shadow-xl active:scale-95 transition-all",children:[e.jsx(ue,{size:18})," ",E?"Save .txt":"Download"]})]}),e.jsx("button",{onClick:()=>{a(""),u(0),n(null)},className:"w-full py-2 text-gray-400 uppercase font-black text-[10px] hover:text-rose-500 transition-colors",children:"Close File"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>y("text"),className:`p-4 rounded-2xl border-2 transition-all flex flex-col items-center ${g==="text"?"border-rose-500 bg-rose-50/50 dark:bg-rose-900/10":"border-gray-100 dark:border-white/5"}`,children:[e.jsx(pe,{size:20,className:g==="text"?"text-rose-500":"text-gray-400"}),e.jsx("span",{className:"font-black uppercase text-[10px] mt-1",children:"Fast Scan"})]}),e.jsxs("button",{onClick:()=>y("ocr"),className:`p-4 rounded-2xl border-2 transition-all flex flex-col items-center ${g==="ocr"?"border-rose-500 bg-rose-50/50 dark:bg-rose-900/10":"border-gray-100 dark:border-white/5"}`,children:[e.jsx(Os,{size:20,className:g==="ocr"?"text-rose-500":"text-gray-400"}),e.jsx("span",{className:"font-black uppercase text-[10px] mt-1",children:"Deep OCR"})]})]}),i&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-full bg-gray-100 dark:bg-zinc-800 h-2 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:"bg-rose-500 h-full transition-all",style:{width:`${d}%`}})}),e.jsx("p",{className:"text-center text-[10px] font-black text-gray-400 uppercase tracking-widest animate-pulse px-1",children:"Scanning Document..."})]}),!i&&e.jsxs("div",{className:"space-y-4",children:[g==="ocr"&&e.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/10 rounded-xl border border-amber-100 dark:border-amber-900/20",children:e.jsx("p",{className:"text-[10px] text-amber-700 dark:text-amber-400 font-bold uppercase tracking-widest text-center",children:"Note: Deep OCR is CPU-intensive and may take a few minutes depending on your device performance."})}),e.jsx("div",{className:"p-4 bg-rose-50 dark:bg-rose-900/10 rounded-xl border border-rose-100 dark:border-rose-900/20 text-center",children:e.jsx("p",{className:"text-[10px] text-rose-600 dark:text-rose-400 font-bold uppercase tracking-widest",children:"Select mode and tap Extract"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase tracking-widest text-gray-400 mb-3 px-1",children:"Output Filename"}),e.jsx("input",{type:"text",value:h,onChange:p=>N(p.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm dark:text-white"})]})]})]})})]}):e.jsxs("div",{onClick:()=>!i&&s.current?.click(),className:"border-4 border-dashed border-gray-100 dark:border-zinc-900 rounded-[2.5rem] p-12 text-center hover:bg-rose-50 dark:hover:bg-rose-900/10 transition-all cursor-pointer group",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:e.jsx(ye,{size:32})}),e.jsx("h3",{className:"text-xl font-bold dark:text-white mb-2",children:"Select PDF"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Tap to browse files"})]}),e.jsx(X,{})]})}const Ca=({pdfDoc:s,pageNum:r})=>{const[t,n]=c.useState(null),o=c.useRef(null);return c.useEffect(()=>{if(!s||t)return;const a=new IntersectionObserver(i=>{i[0].isIntersecting&&(oe(s,r,1).then(n),a.disconnect())},{rootMargin:"200px"});return o.current&&a.observe(o.current),()=>a.disconnect()},[s,r,t]),t?e.jsx("img",{src:t,className:"w-full h-full object-contain bg-white pointer-events-none",alt:`P${r}`}):e.jsx("div",{ref:o,className:"w-full h-full bg-gray-100 dark:bg-zinc-800 flex items-center justify-center",children:e.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-transparent rounded-full animate-spin"})})};function Pa({id:s,pageNum:r,pdfDoc:t}){const{attributes:n,listeners:o,setNodeRef:a,transform:i,transition:l,isDragging:d}=Ct({id:s}),u={transform:Pt.Transform.toString(i),transition:l,zIndex:d?100:0,position:"relative"};return e.jsxs("div",{ref:a,style:u,...n,...o,className:`relative group cursor-grab active:cursor-grabbing aspect-[3/4] rounded-xl overflow-hidden border-2 transition-all bg-gray-50 dark:bg-black touch-none ${d?"border-rose-500 shadow-2xl scale-105 opacity-90":"border-transparent hover:border-rose-500 shadow-sm"}`,children:[e.jsx("div",{className:"w-full h-full p-2",children:e.jsx(Ca,{pdfDoc:t,pageNum:r})}),e.jsx("div",{className:"absolute top-2 right-2 bg-black/50 backdrop-blur-md rounded-lg p-1.5 text-white opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Ws,{size:14})}),e.jsxs("div",{className:"absolute bottom-2 left-2 px-2 py-1 bg-black/50 backdrop-blur-md rounded text-[9px] font-black text-white",children:["PAGE ",r]})]})}function Sa(){const s=c.useRef(null),{consumePipelineFile:r}=Y(),[t,n]=c.useState(null),[o,a]=c.useState([]),[i,l]=c.useState(!1),[d,u]=c.useState(null),[g,y]=c.useState("paperknife-rearranged"),[m,k]=c.useState(""),h=wt(fe(tr,{activationConstraint:{distance:8}}),fe(er,{activationConstraint:{delay:200,tolerance:5}}),fe(zt,{coordinateGetter:Nt}));c.useEffect(()=>{const x=r();if(x){const b=new File([x.buffer],x.name,{type:"application/pdf"});L(b)}},[]);const N=async()=>{if(!t||!m)return;l(!0);const x=await re(t.file,m);x.success?(n({...t,isLocked:!1,pageCount:x.pageCount,pdfDoc:x.pdfDoc,password:m,thumbnail:x.thumbnail}),a(Array.from({length:x.pageCount},(b,z)=>(z+1).toString())),y(`${t.file.name.replace(".pdf","")}-rearranged`)):U.error("Incorrect password"),l(!1)},L=async x=>{if(x.type==="application/pdf"){l(!0);try{const b=await te(x);if(b.isLocked)n({file:x,pageCount:0,isLocked:!0});else{const z=await ae(x);n({file:x,pageCount:b.pageCount,isLocked:!1,pdfDoc:z,thumbnail:b.thumbnail}),a(Array.from({length:b.pageCount},(w,p)=>(p+1).toString())),y(`${x.name.replace(".pdf","")}-rearranged`)}}catch(b){console.error(b)}finally{l(!1),u(null)}}},F=x=>{const{active:b,over:z}=x;b.id!==z?.id&&(a(w=>{const p=w.indexOf(b.id),f=w.indexOf(z?.id);return vt(w,p,f)}),u(null))},E=async()=>{if(t){l(!0),await new Promise(x=>setTimeout(x,100));try{const x=await t.file.arrayBuffer(),b=await ee.load(x,{password:t.password||void 0,ignoreEncryption:!0}),z=await ee.create(),w=o.map(C=>parseInt(C)-1);(await z.copyPages(b,w)).forEach(C=>z.addPage(C));const f=await z.save(),S=new Blob([f],{type:"application/pdf"}),j=URL.createObjectURL(S);u(j),Z({name:`${g}.pdf`,tool:"Rearrange",size:S.size,resultUrl:j})}catch(x){U.error(`Error: ${x.message}`)}finally{l(!1)}}},P=()=>e.jsxs("button",{onClick:E,disabled:i,className:"w-full bg-rose-500 hover:bg-rose-600 text-white font-black uppercase tracking-widest transition-all active:scale-95 disabled:opacity-50 py-4 rounded-2xl text-sm md:p-6 md:rounded-3xl md:text-xl flex items-center justify-center gap-3 shadow-lg shadow-rose-500/20",children:[i?e.jsx(K,{className:"animate-spin"}):e.jsx(Ke,{size:20})," Save New Order"]});return e.jsxs(V,{title:"Rearrange PDF",description:"Drag and drop to reorder pages visually.",actions:t&&!t.isLocked&&!d&&e.jsx(P,{}),children:[e.jsx("input",{type:"file",accept:".pdf",className:"hidden",ref:s,onChange:x=>x.target.files?.[0]&&L(x.target.files[0])}),t?t.isLocked?e.jsx("div",{className:"max-w-md mx-auto relative z-[100]",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2.5rem] border border-gray-100 dark:border-white/5 text-center shadow-2xl",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(q,{size:32})}),e.jsx("h3",{className:"text-2xl font-bold mb-2 dark:text-white",children:"Protected File"}),e.jsx("input",{type:"password",value:m,onChange:x=>k(x.target.value),placeholder:"Password",className:"w-full bg-gray-50 dark:bg-black rounded-2xl px-6 py-4 border border-transparent focus:border-rose-500 outline-none font-bold text-center mb-4 dark:text-white"}),e.jsx("button",{onClick:N,disabled:!m||i,className:"w-full bg-rose-500 text-white p-4 rounded-2xl font-black uppercase text-xs",children:"Unlock"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-3xl border border-gray-100 dark:border-white/5 flex items-center gap-6 shadow-sm",children:[e.jsx("div",{className:"w-12 h-16 bg-gray-50 dark:bg-black rounded-xl overflow-hidden shrink-0 border border-gray-100 dark:border-zinc-800 flex items-center justify-center text-rose-500 shadow-inner",children:t.thumbnail?e.jsx("img",{src:t.thumbnail,className:"w-full h-full object-cover"}):e.jsx(Tt,{size:24})}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsx("h3",{className:"font-bold text-sm truncate dark:text-white",children:t.file.name}),e.jsxs("p",{className:"text-[10px] text-gray-400 uppercase font-black tracking-widest",children:[t.pageCount," Pages • ",(t.file.size/(1024*1024)).toFixed(1)," MB"]})]}),e.jsx("button",{onClick:()=>n(null),className:"p-2 text-gray-400 hover:text-rose-500 transition-colors",children:e.jsx(Q,{size:20})})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-[2rem] border border-gray-100 dark:border-white/5 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 px-2",children:[e.jsx("h4",{className:"font-black uppercase tracking-widest text-[10px] text-gray-400",children:"Hold & drag pages"}),e.jsxs("button",{onClick:()=>a(Array.from({length:t.pageCount},(x,b)=>(b+1).toString())),className:"text-[10px] font-black uppercase text-gray-400 flex items-center gap-1 hover:text-rose-500 transition-colors font-bold",children:[e.jsx(Ke,{size:12})," Reset"]})]}),e.jsx(yt,{sensors:h,collisionDetection:kt,onDragEnd:F,children:e.jsx(jt,{items:o,strategy:Js,children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 p-1",children:o.map(x=>e.jsx(Pa,{id:x,pageNum:parseInt(x),pdfDoc:t.pdfDoc},x))})})})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2rem] border border-gray-100 dark:border-white/5 shadow-sm space-y-6",children:[d?e.jsx(se,{message:"Rearranged Successfully!",downloadUrl:d,fileName:`${g}.pdf`,onStartOver:()=>{u(null),n(null)}}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-3",children:"Output Filename"}),e.jsx("input",{type:"text",value:g,onChange:x=>y(x.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm dark:text-white"})]})}),e.jsx("button",{onClick:()=>n(null),className:"w-full py-2 text-[10px] font-black uppercase text-gray-300 hover:text-rose-500 transition-colors",children:"Close File"})]})]}):e.jsxs("div",{onClick:()=>!i&&s.current?.click(),className:"border-4 border-dashed border-gray-100 dark:border-zinc-900 rounded-[2.5rem] p-12 text-center hover:bg-rose-50 dark:hover:bg-rose-900/10 transition-all cursor-pointer group",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:e.jsx(Tt,{size:32})}),e.jsx("h3",{className:"text-xl font-bold dark:text-white mb-2",children:"Select PDF"}),e.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"Tap to start reordering"})]}),e.jsx(X,{})]})}function Fa(){const s=c.useRef(null),{consumePipelineFile:r}=Y(),[t,n]=c.useState(null),[o,a]=c.useState(!1),[i,l]=c.useState(null),[d,u]=c.useState("paperknife-watermarked"),[g,y]=c.useState(""),[m,k]=c.useState("CONFIDENTIAL"),[h,N]=c.useState(.3),[L,F]=c.useState(50),[E,P]=c.useState(-45),[x,b]=c.useState("#000000");c.useEffect(()=>{const j=r();if(j){const C=new File([j.buffer],j.name,{type:"application/pdf"});w(C)}},[]);const z=async()=>{if(!t||!g)return;a(!0);const j=await re(t.file,g);j.success?(n({...t,isLocked:!1,pageCount:j.pageCount,password:g,pdfDoc:j.pdfDoc,thumbnail:j.thumbnail}),u(`${t.file.name.replace(".pdf","")}-watermarked`)):U.error("Incorrect password"),a(!1)},w=async j=>{if(j.type==="application/pdf"){a(!0);try{const C=await te(j);if(C.isLocked)n({file:j,pageCount:0,isLocked:!0});else{const D=await ae(j);n({file:j,pageCount:C.pageCount,isLocked:!1,pdfDoc:D,thumbnail:C.thumbnail}),u(`${j.name.replace(".pdf","")}-watermarked`)}}catch(C){console.error(C)}finally{a(!1),l(null)}}},p=j=>{const C=parseInt(j.slice(1,3),16)/255,D=parseInt(j.slice(3,5),16)/255,R=parseInt(j.slice(5,7),16)/255;return ps(C,D,R)},f=async()=>{if(t){a(!0),await new Promise(j=>setTimeout(j,100));try{const j=await t.file.arrayBuffer(),C=await ee.load(j,{password:t.password||void 0,ignoreEncryption:!0}),D=await C.embedFont(us.HelveticaBold),R=C.getPages(),T=p(x);R.forEach(v=>{const{width:A,height:$}=v.getSize();v.drawText(m,{x:A/2,y:$/2,size:L,font:D,color:T,opacity:h,rotate:xs(E)})});const I=await C.save(),O=new Blob([I],{type:"application/pdf"}),B=URL.createObjectURL(O);l(B),Z({name:`${d}.pdf`,tool:"Watermark",size:O.size,resultUrl:B})}catch(j){U.error(`Error: ${j.message}`)}finally{a(!1)}}},S=()=>e.jsxs("button",{onClick:f,disabled:o||!m,className:"w-full bg-rose-500 hover:bg-rose-600 text-white font-black uppercase tracking-widest transition-all active:scale-95 disabled:opacity-50 py-4 rounded-2xl text-sm md:p-6 md:rounded-3xl md:text-xl flex items-center justify-center gap-3 shadow-lg shadow-rose-500/20",children:[o?e.jsx(K,{className:"animate-spin"}):e.jsx(Me,{size:20})," Apply Watermark"]});return e.jsxs(V,{title:"Watermark",description:"Add secure text overlays to your documents locally.",actions:t&&!t.isLocked&&!i&&e.jsx(S,{}),children:[e.jsx("input",{type:"file",accept:".pdf",className:"hidden",ref:s,onChange:j=>j.target.files?.[0]&&w(j.target.files[0])}),t?t.isLocked?e.jsx("div",{className:"max-w-md mx-auto relative z-[100]",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2.5rem] border border-gray-100 dark:border-white/5 text-center shadow-2xl",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(q,{size:32})}),e.jsx("input",{type:"password",value:g,onChange:j=>y(j.target.value),placeholder:"Password",className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-4 border border-transparent focus:border-rose-500 outline-none font-bold text-center mb-4 dark:text-white"}),e.jsx("button",{onClick:z,disabled:!g||o,className:"w-full bg-rose-500 text-white p-4 rounded-2xl font-black uppercase text-xs",children:"Unlock"})]})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 animate-in fade-in duration-500",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-[2rem] border border-gray-100 dark:border-white/5 shadow-sm overflow-hidden flex flex-col items-center",children:[e.jsx("div",{className:"flex justify-between items-center w-full mb-4 px-2",children:e.jsxs("h4",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[e.jsx(ft,{size:12})," Live Preview"]})}),e.jsxs("div",{className:"relative aspect-[3/4] w-full max-w-[300px] bg-white border border-gray-100 dark:border-zinc-800 rounded-xl overflow-hidden shadow-inner",children:[t.thumbnail?e.jsx("img",{src:t.thumbnail,className:"w-full h-full object-contain opacity-50"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-100",children:e.jsx(Me,{size:64})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none select-none overflow-hidden",style:{color:x,opacity:h,transform:`rotate(${E}deg)`,fontSize:`${L/3}px`,fontWeight:"900",textAlign:"center",lineHeight:"1"},children:m})]})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2rem] border border-gray-100 dark:border-white/5 shadow-sm space-y-6",children:[i?e.jsx(se,{message:"Watermark Applied Successfully!",downloadUrl:i,fileName:`${d}.pdf`,onStartOver:()=>l(null)}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-3",children:"Watermark Text"}),e.jsx("input",{type:"text",value:m,onChange:j=>k(j.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm dark:text-white"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-gray-400",children:"Appearance"}),e.jsx(Fe,{size:14,className:"text-gray-300"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-[8px] font-black uppercase text-gray-400 mb-2",children:"Color"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[["#F43F5E","#3B82F6","#10B981","#F59E0B","#000000"].map(j=>e.jsx("button",{onClick:()=>b(j),className:`w-8 h-8 rounded-full border-2 transition-all ${x===j?"border-zinc-900 dark:border-white scale-110":"border-transparent"}`,style:{backgroundColor:j}},j)),e.jsx("input",{type:"color",value:x,onChange:j=>b(j.target.value),className:"w-8 h-8 rounded-full overflow-hidden border-none p-0 cursor-pointer bg-transparent"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[8px] font-black uppercase text-gray-400 mb-2",children:["Opacity (",Math.round(h*100),"%)"]}),e.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:h,onChange:j=>N(parseFloat(j.target.value)),className:"w-full accent-rose-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[8px] font-black uppercase text-gray-400 mb-2",children:["Size (",L,"px)"]}),e.jsx("input",{type:"range",min:"10",max:"200",step:"1",value:L,onChange:j=>F(parseInt(j.target.value)),className:"w-full accent-rose-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[8px] font-black uppercase text-gray-400 mb-2",children:["Rotation (",E,"°)"]}),e.jsx("input",{type:"range",min:"-180",max:"180",step:"5",value:E,onChange:j=>P(parseInt(j.target.value)),className:"w-full accent-rose-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-3",children:"Output Filename"}),e.jsx("input",{type:"text",value:d,onChange:j=>u(j.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm dark:text-white"})]})]}),e.jsx("button",{onClick:()=>n(null),className:"w-full py-2 text-[10px] font-black uppercase text-gray-300 hover:text-rose-500 transition-colors",children:"Close File"})]})})]}):e.jsxs("div",{onClick:()=>!o&&s.current?.click(),className:"border-4 border-dashed border-gray-100 dark:border-zinc-900 rounded-[2.5rem] p-12 text-center hover:bg-rose-50 dark:hover:bg-rose-900/10 transition-all cursor-pointer group",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:e.jsx(Me,{size:32})}),e.jsx("h3",{className:"text-xl font-bold dark:text-white mb-2",children:"Select PDF"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Tap to start watermarking"})]}),e.jsx(X,{})]})}function Da(){const s=c.useRef(null),{consumePipelineFile:r}=Y(),[t,n]=c.useState(null),[o,a]=c.useState(!1),[i,l]=c.useState(null),[d,u]=c.useState("paperknife-numbered"),[g,y]=c.useState(""),[m,k]=c.useState("Page {n} of {total}"),[h,N]=c.useState("bottom-center"),[L]=c.useState(1),[F]=c.useState(12),[E]=c.useState("#6B7280");c.useEffect(()=>{const f=r();if(f){const S=new File([f.buffer],f.name,{type:"application/pdf"});x(S)}},[]);const P=async()=>{if(!t||!g)return;a(!0);const f=await re(t.file,g);f.success?(n({...t,isLocked:!1,pageCount:f.pageCount,password:g,pdfDoc:f.pdfDoc,thumbnail:f.thumbnail}),u(`${t.file.name.replace(".pdf","")}-numbered`)):U.error("Incorrect password"),a(!1)},x=async f=>{if(f.type==="application/pdf"){a(!0);try{const S=await te(f);if(S.isLocked)n({file:f,pageCount:0,isLocked:!0});else{const j=await ae(f);n({file:f,pageCount:S.pageCount,isLocked:!1,pdfDoc:j,thumbnail:S.thumbnail}),u(`${f.name.replace(".pdf","")}-numbered`)}}catch(S){console.error(S)}finally{a(!1),l(null)}}},b=f=>{const S=parseInt(f.slice(1,3),16)/255,j=parseInt(f.slice(3,5),16)/255,C=parseInt(f.slice(5,7),16)/255;return ps(S,j,C)},z=async()=>{if(t){a(!0),await new Promise(f=>setTimeout(f,100));try{const f=await t.file.arrayBuffer(),S=await ee.load(f,{password:t.password||void 0,ignoreEncryption:!0}),j=await S.embedFont(us.Helvetica),C=S.getPages(),D=b(E);C.forEach((O,B)=>{const{width:v,height:A}=O.getSize(),$=B+L,M=C.length+(L-1),H=m.replace("{n}",$.toString()).replace("{total}",M.toString()),_=j.widthOfTextAtSize(H,F),J=30;let ne=v/2-_/2,Te=J;h.includes("left")&&(ne=J),h.includes("right")&&(ne=v-_-J),h.includes("top")&&(Te=A-J-F),O.drawText(H,{x:ne,y:Te,size:F,font:j,color:D})});const R=await S.save(),T=new Blob([R],{type:"application/pdf"}),I=URL.createObjectURL(T);l(I),Z({name:`${d}.pdf`,tool:"Page Numbers",size:T.size,resultUrl:I})}catch(f){U.error(`Error: ${f.message}`)}finally{a(!1)}}},w=()=>e.jsxs("button",{onClick:z,disabled:o,className:"w-full bg-rose-500 hover:bg-rose-600 text-white font-black uppercase tracking-widest transition-all active:scale-95 disabled:opacity-50 py-4 rounded-2xl text-sm md:p-6 md:rounded-3xl md:text-xl flex items-center justify-center gap-3 shadow-lg shadow-rose-500/20",children:[o?e.jsx(K,{className:"animate-spin"}):e.jsx(We,{size:20})," Add Page Numbers"]}),p=()=>{const f={position:"absolute",padding:"10px",color:E,fontSize:"8px",fontWeight:"bold"};return h.includes("top")?f.top=0:f.bottom=0,h.includes("left")?f.left=0:h.includes("right")?f.right=0:(f.left="50%",f.transform="translateX(-50%)"),f};return e.jsxs(V,{title:"Page Numbers",description:"Add custom numbering to your PDF automatically.",actions:t&&!t.isLocked&&!i&&e.jsx(w,{}),children:[e.jsx("input",{type:"file",accept:".pdf",className:"hidden",ref:s,onChange:f=>f.target.files?.[0]&&x(f.target.files[0])}),t?t.isLocked?e.jsx("div",{className:"max-w-md mx-auto relative z-[100]",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2.5rem] border border-gray-100 dark:border-white/5 text-center shadow-2xl",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(q,{size:32})}),e.jsx("input",{type:"password",value:g,onChange:f=>y(f.target.value),placeholder:"Password",className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-4 border border-transparent focus:border-rose-500 outline-none font-bold text-center mb-4 dark:text-white"}),e.jsx("button",{onClick:P,disabled:!g||o,className:"w-full bg-rose-500 text-white p-4 rounded-2xl font-black uppercase text-xs",children:"Unlock"})]})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 animate-in fade-in duration-500",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-[2rem] border border-gray-100 dark:border-white/5 shadow-sm flex flex-col items-center",children:[e.jsx("div",{className:"flex justify-between items-center w-full mb-4 px-2",children:e.jsxs("h4",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[e.jsx(ft,{size:12})," Live Preview"]})}),e.jsxs("div",{className:"relative aspect-[3/4] w-full max-w-[300px] bg-white border border-gray-100 dark:border-zinc-800 rounded-xl overflow-hidden shadow-inner",children:[t.thumbnail?e.jsx("img",{src:t.thumbnail,className:"w-full h-full object-contain"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-100",children:e.jsx(We,{size:64})}),e.jsx("div",{style:p(),children:m.replace("{n}","1").replace("{total}",t.pageCount.toString())})]})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2rem] border border-gray-100 dark:border-white/5 shadow-sm space-y-6",children:[i?e.jsx(se,{message:"Numbers Applied Successfully!",downloadUrl:i,fileName:`${d}.pdf`,onStartOver:()=>l(null)}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-3",children:"Label Format"}),e.jsx("input",{type:"text",value:m,onChange:f=>k(f.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm dark:text-white",placeholder:"Page {n} of {total}"}),e.jsxs("p",{className:"text-[8px] text-gray-400 mt-2",children:["Use ",e.jsx("b",{children:"{n}"})," for page number and ",e.jsx("b",{children:"{total}"})," for total pages."]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-3",children:"Position"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"].map(f=>e.jsx("button",{onClick:()=>N(f),className:`py-3 px-1 rounded-xl text-[8px] font-black uppercase transition-all border ${h===f?"bg-rose-500 text-white border-rose-500 shadow-lg shadow-rose-500/20":"bg-gray-50 dark:bg-black text-gray-400 border-gray-100 dark:border-zinc-800"}`,children:f.replace("-"," ")},f))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-3",children:"Output Filename"}),e.jsx("input",{type:"text",value:d,onChange:f=>u(f.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm dark:text-white"})]})]}),e.jsx("button",{onClick:()=>n(null),className:"w-full py-2 text-[10px] font-black uppercase text-gray-300 hover:text-rose-500 transition-colors",children:"Close File"})]})})]}):e.jsxs("div",{onClick:()=>!o&&s.current?.click(),className:"border-4 border-dashed border-gray-100 dark:border-zinc-900 rounded-[2.5rem] p-12 text-center hover:bg-rose-50 dark:hover:bg-rose-900/10 transition-all cursor-pointer group",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:e.jsx(We,{size:32})}),e.jsx("h3",{className:"text-xl font-bold dark:text-white mb-2",children:"Select PDF"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Tap to start numbering"})]}),e.jsx(X,{})]})}function La(){const s=c.useRef(null),{consumePipelineFile:r}=Y(),[t,n]=c.useState(null),[o,a]=c.useState(!1),[i,l]=c.useState(null),[d,u]=c.useState("paperknife-metadata"),[g,y]=c.useState(""),[m,k]=c.useState(!1),[h,N]=c.useState({title:"",author:localStorage.getItem("defaultAuthor")||"",subject:"",keywords:"",creator:localStorage.getItem("defaultAuthor")||"",producer:localStorage.getItem("defaultAuthor")||""});c.useEffect(()=>{const x=localStorage.getItem("defaultAuthor")||"";!t&&x&&N(b=>({...b,author:x,creator:x,producer:x}))},[]),c.useEffect(()=>{const x=r();if(x){const b=new File([x.buffer],x.name,{type:"application/pdf"});F(b)}},[]);const L=async()=>{if(!t||!g)return;a(!0);const x=await re(t.file,g);if(x.success){const b=await t.file.arrayBuffer(),z=await ee.load(b,{password:g}),w={title:z.getTitle()||"",author:z.getAuthor()||"",subject:z.getSubject()||"",keywords:z.getKeywords()||"",creator:z.getCreator()||"",producer:z.getProducer()||""};n({...t,isLocked:!1,pageCount:x.pageCount,password:g,currentMeta:w}),N(w)}else U.error("Incorrect password");a(!1)},F=async x=>{if(x.type==="application/pdf"){a(!0);try{const b=await te(x);let z={title:"",author:"",subject:"",keywords:"",creator:"",producer:""};if(!b.isLocked){const w=await x.arrayBuffer(),p=await ee.load(w);z={title:p.getTitle()||"",author:p.getAuthor()||"",subject:p.getSubject()||"",keywords:p.getKeywords()||"",creator:p.getCreator()||"",producer:p.getProducer()||""}}n({file:x,pageCount:b.pageCount,isLocked:b.isLocked,currentMeta:z}),N(z),u(`${x.name.replace(".pdf","")}-metadata`)}catch(b){console.error(b)}finally{a(!1),l(null)}}},E=async(x=!1)=>{if(t){a(!0),x&&k(!0),await new Promise(b=>setTimeout(b,300));try{const b=await t.file.arrayBuffer(),z=await ee.load(b,{password:t.password||void 0,ignoreEncryption:!0});let w;x?(w=await ee.create(),(await w.copyPages(z,z.getPageIndices())).forEach(D=>w.addPage(D)),w.setTitle(""),w.setAuthor(""),w.setSubject(""),w.setKeywords([]),w.setCreator(""),w.setProducer(""),w.catalog.get(w.context.obj("Metadata"))&&w.catalog.delete(w.context.obj("Metadata"))):(w=z,w.setTitle(h.title||""),w.setAuthor(h.author||""),w.setSubject(h.subject||""),w.setKeywords(h.keywords?h.keywords.split(",").map(j=>j.trim()):[]),w.setCreator(h.creator||""),w.setProducer(h.producer||""));const p=await w.save(),f=new Blob([p],{type:"application/pdf"}),S=URL.createObjectURL(f);l(S),Z({name:`${d}.pdf`,tool:"Metadata",size:f.size,resultUrl:S})}catch(b){U.error(`Error: ${b.message}`)}finally{a(!1),k(!1)}}},P=()=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("button",{onClick:()=>E(!1),disabled:o,className:"w-full bg-rose-500 text-white font-black uppercase tracking-widest transition-all active:scale-95 disabled:opacity-50 py-4 rounded-2xl text-sm md:p-6 md:rounded-3xl md:text-xl flex items-center justify-center gap-3 shadow-lg shadow-rose-500/20",children:[o&&!m?e.jsx(K,{className:"animate-spin"}):e.jsx(It,{size:18})," Update Metadata"]}),e.jsxs("button",{onClick:()=>E(!0),disabled:o,className:"w-full bg-emerald-500 text-white font-black uppercase tracking-widest transition-all active:scale-95 disabled:opacity-50 py-4 rounded-2xl text-sm md:p-6 md:rounded-3xl md:text-xl flex items-center justify-center gap-3 shadow-lg shadow-emerald-500/20",children:[m?e.jsx(K,{className:"animate-spin"}):e.jsx(et,{size:18})," Privacy Deep Clean"]})]});return e.jsxs(V,{title:"Metadata Editor",description:"Edit or wipe document properties for better privacy.",actions:t&&!t.isLocked&&!i&&e.jsx(P,{}),children:[e.jsx("input",{type:"file",accept:".pdf",className:"hidden",ref:s,onChange:x=>x.target.files?.[0]&&F(x.target.files[0])}),t?t.isLocked?e.jsx("div",{className:"max-w-md mx-auto relative z-[100]",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2.5rem] border border-gray-100 dark:border-white/5 text-center shadow-2xl",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(q,{size:32})}),e.jsx("h3",{className:"text-2xl font-bold mb-2 dark:text-white",children:"File Protected"}),e.jsx("input",{type:"password",value:g,onChange:x=>y(x.target.value),placeholder:"Password",className:"w-full bg-gray-50 dark:bg-black rounded-2xl px-6 py-4 border border-transparent focus:border-rose-500 outline-none font-bold text-center mb-4 dark:text-white"}),e.jsx("button",{onClick:L,disabled:!g||o,className:"w-full bg-rose-500 text-white p-4 rounded-2xl font-black uppercase text-xs",children:"Unlock"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-3xl border border-gray-100 dark:border-white/5 flex items-center gap-6 shadow-sm",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-2xl flex items-center justify-center shrink-0",children:e.jsx(pt,{size:24})}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsx("h3",{className:"font-bold text-sm truncate dark:text-white",children:t.file.name}),e.jsxs("p",{className:"text-[10px] text-gray-400 uppercase font-black tracking-widest",children:[t.pageCount," Pages • ",(t.file.size/(1024*1024)).toFixed(1)," MB"]})]}),e.jsx("button",{onClick:()=>n(null),className:"p-2 text-gray-400 hover:text-rose-500 transition-colors",children:e.jsx(Q,{size:20})})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2rem] border border-gray-100 dark:border-white/5 space-y-6 shadow-sm",children:[i?e.jsx(se,{message:m?"Deep Clean Successful!":"Metadata Updated!",downloadUrl:i,fileName:`${d}.pdf`,onStartOver:()=>{l(null),n(null)}}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase tracking-widest text-gray-400 mb-3 px-1",children:"Output Filename"}),e.jsx("input",{type:"text",value:d,onChange:x=>u(x.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm dark:text-white"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["title","author","subject","keywords","creator","producer"].map(x=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-2 tracking-widest px-1",children:x}),e.jsx("input",{type:"text",value:h[x],onChange:b=>N({...h,[x]:b.target.value}),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm dark:text-white"})]},x))})]}),e.jsx("button",{onClick:()=>n(null),className:"w-full py-2 text-[10px] font-black uppercase text-gray-300 hover:text-rose-500 transition-colors",children:"Close File"})]})]}):e.jsxs("div",{onClick:()=>!o&&s.current?.click(),className:"border-4 border-dashed border-gray-100 dark:border-zinc-900 rounded-[2.5rem] p-12 text-center hover:bg-rose-50 dark:hover:bg-rose-900/10 transition-all cursor-pointer group",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:e.jsx(It,{size:32})}),e.jsx("h3",{className:"text-xl font-bold dark:text-white mb-2",children:"Select PDF"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Tap to start editing metadata"})]}),e.jsx(X,{})]})}function Ea({id:s,img:r,onRemove:t}){const{attributes:n,listeners:o,setNodeRef:a,transform:i,transition:l,isDragging:d}=Ct({id:s}),u={transform:Pt.Transform.toString(i),transition:l,zIndex:d?50:0};return e.jsxs("div",{ref:a,style:u,className:`flex items-center gap-3 p-3 bg-white dark:bg-zinc-900 rounded-2xl border transition-colors shadow-sm group touch-none relative ${d?"border-rose-500 shadow-xl scale-[1.02]":"border-gray-100 dark:border-white/5"}`,children:[e.jsx("div",{...n,...o,className:"p-2 cursor-grab text-rose-400 hover:text-rose-600 active:scale-90 transition-transform",children:e.jsx(os,{size:20})}),e.jsx("div",{className:"w-12 h-16 bg-gray-100 dark:bg-black rounded-lg overflow-hidden shrink-0 border border-gray-200 dark:border-zinc-800",children:e.jsx("img",{src:r.preview,alt:"P",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"font-bold text-sm truncate dark:text-white",children:r.file.name})}),e.jsx("button",{onClick:()=>t(s),className:"p-2 text-gray-400 hover:text-rose-500",children:e.jsx(Q,{size:18})})]})}function Aa(){const s=c.useRef(null),[r,t]=c.useState([]),[n,o]=c.useState(!1),[a,i]=c.useState(null),[l,d]=c.useState("paperknife-images-to-pdf"),u=W.isNativePlatform(),g=wt(fe(ds),fe(zt,{coordinateGetter:Nt})),y=N=>{const L=Array.from(N).filter(F=>F.type.startsWith("image/")).map(F=>({id:Math.random().toString(36).substr(2,9),file:F,preview:URL.createObjectURL(F)}));if(L.length===0){U.error("Select images (JPG, PNG, WebP)");return}t(F=>[...F,...L]),i(null)},m=N=>{const{active:L,over:F}=N;L.id!==F?.id&&t(E=>{const P=E.findIndex(b=>b.id===L.id),x=E.findIndex(b=>b.id===F?.id);return vt(E,P,x)})},k=async()=>{if(r.length!==0){o(!0),await new Promise(N=>setTimeout(N,100));try{const N=await ee.create();for(const P of r){const x=await P.file.arrayBuffer();let b;P.file.type.includes("png")?b=await N.embedPng(x):b=await N.embedJpg(x);const{width:z,height:w}=b.scale(1);N.addPage([z,w]).drawImage(b,{x:0,y:0,width:z,height:w})}const L=await N.save(),F=new Blob([L],{type:"application/pdf"}),E=URL.createObjectURL(F);i(E),Z({name:`${l}.pdf`,tool:"Image to PDF",size:F.size,resultUrl:E})}catch(N){U.error(`Error: ${N.message}`)}finally{o(!1)}}},h=()=>e.jsx("button",{onClick:k,disabled:n||r.length===0,className:`w-full bg-rose-500 hover:bg-rose-600 text-white font-black uppercase tracking-widest transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-3 shadow-xl shadow-rose-500/20 ${u?"py-4 rounded-2xl text-sm":"p-6 rounded-3xl text-xl"}`,children:n?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"animate-spin"})," Working..."]}):e.jsxs(e.Fragment,{children:["Generate PDF ",e.jsx(le,{size:18})]})});return e.jsxs(V,{title:"Image to PDF",description:"Convert photos and images into a professional PDF.",actions:r.length>0&&!a&&e.jsx(h,{}),children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",className:"hidden",ref:s,onChange:N=>N.target.files&&y(N.target.files)}),r.length===0?e.jsxs("div",{onClick:()=>s.current?.click(),className:"border-4 border-dashed border-gray-100 dark:border-zinc-900 rounded-[2.5rem] p-12 text-center hover:bg-rose-50 dark:hover:bg-rose-900/10 transition-all cursor-pointer group",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:e.jsx(Re,{size:32})}),e.jsx("h3",{className:"text-xl font-bold dark:text-white mb-2",children:"Select Images"}),e.jsx("p",{className:"text-sm text-gray-400",children:"JPG, PNG, or WebP"})]}):a?e.jsx(se,{message:"PDF Ready!",downloadUrl:a,fileName:`${l}.pdf`,onStartOver:()=>{t([]),i(null)}}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center px-1",children:[e.jsxs("p",{className:"text-[10px] font-black uppercase text-gray-400",children:[r.length," Images"]}),e.jsx("button",{onClick:()=>t([]),className:"text-[10px] font-black uppercase text-rose-500/60",children:"Clear"})]}),e.jsx(yt,{sensors:g,collisionDetection:kt,onDragEnd:m,children:e.jsx(jt,{items:r.map(N=>N.id),strategy:cs,children:e.jsx("div",{className:"space-y-2",children:r.map(N=>e.jsx(Ea,{id:N.id,img:N,onRemove:L=>t(F=>F.filter(E=>E.id!==L))},N.id))})})}),e.jsxs("button",{onClick:()=>s.current?.click(),className:"w-full py-3 border-2 border-dashed border-gray-200 dark:border-zinc-800 rounded-2xl text-gray-400 font-bold text-sm flex items-center justify-center gap-2 hover:border-rose-500 hover:text-rose-500 transition-all",children:[e.jsx(we,{size:16})," Add More"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-2",children:"Filename"}),e.jsx("input",{type:"text",value:l,onChange:N=>d(N.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm"})]}),!u&&e.jsx(h,{})]}),e.jsx(X,{})]})}function Ra(){const s=c.useRef(null),r=c.useRef(null),t=c.useRef(null),{consumePipelineFile:n}=Y(),[o,a]=c.useState(null),[i,l]=c.useState(null),[d,u]=c.useState(null),[g,y]=c.useState(!1),[m,k]=c.useState(null),[h,N]=c.useState("paperknife-signed"),[L,F]=c.useState(""),[E]=c.useState(1),[P,x]=c.useState({x:50,y:50}),[b,z]=c.useState(150),[w,p]=c.useState(null),[f,S]=c.useState(!1),[j,C]=c.useState(!1),D=W.isNativePlatform();c.useEffect(()=>{const v=n();if(v){const A=new File([v.buffer],v.name,{type:"application/pdf"});T(A)}},[]);const R=async()=>{if(!(!o||!L)){y(!0);try{const v=await re(o.file,L);if(v.success){a({...o,isLocked:!1,pageCount:v.pageCount,pdfDoc:v.pdfDoc,password:L});const A=await oe(v.pdfDoc,1,2);p(A)}else U.error("Incorrect password")}finally{y(!1)}}},T=async v=>{if(v.type==="application/pdf"){y(!0);try{const A=await te(v);if(A.isLocked)a({file:v,pageCount:0,isLocked:!0});else{const $=await ae(v);a({file:v,pageCount:A.pageCount,isLocked:!1,pdfDoc:$});const M=await oe($,1,2);p(M)}}finally{y(!1)}}},I=v=>{if(!t.current)return;const A=t.current.getBoundingClientRect(),$="touches"in v?v.touches[0].clientX:v.clientX,M="touches"in v?v.touches[0].clientY:v.clientY;if(f)x({x:Math.max(0,Math.min(100,($-A.left)/A.width*100)),y:Math.max(0,Math.min(100,(M-A.top)/A.height*100))});else if(j){const H=P.x/100*A.width+A.left;z(Math.max(50,Math.min(A.width,$-(H-b/2))))}},O=async()=>{if(!(!o||!d)){y(!0);try{const v=await o.file.arrayBuffer(),A=await ee.load(v,{password:o.password,ignoreEncryption:!0}),$=await d.arrayBuffer();let M=d.type==="image/png"?await A.embedPng($):await A.embedJpg($);const H=A.getPages()[E-1],{width:_,height:J}=H.getSize(),ne=P.x/100*_,Te=J-P.y/100*J-b*(M.height/M.width);H.drawImage(M,{x:ne,y:Te,width:b,height:b*(M.height/M.width)});const ks=await A.save(),At=new Blob([ks],{type:"application/pdf"}),Rt=URL.createObjectURL(At);k(Rt),Z({name:`${h}.pdf`,tool:"Signature",size:At.size,resultUrl:Rt})}finally{y(!1)}}},B=()=>e.jsx("button",{onClick:O,disabled:g||!i,className:`w-full bg-rose-500 hover:bg-rose-600 text-white font-black uppercase tracking-widest transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-3 shadow-xl shadow-rose-500/20 ${D?"py-4 rounded-2xl text-sm":"p-6 rounded-3xl text-xl"}`,children:g?e.jsx(K,{className:"animate-spin"}):e.jsxs(e.Fragment,{children:["Sign & Save ",e.jsx(le,{size:18})]})});return e.jsxs(V,{title:"Signature",description:"Sign any PDF by dragging your signature image.",actions:o&&!o.isLocked&&!m&&e.jsx(B,{}),children:[e.jsx("input",{type:"file",accept:".pdf",className:"hidden",ref:s,onChange:v=>v.target.files?.[0]&&T(v.target.files[0])}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:r,onChange:v=>{const A=v.target.files?.[0];A&&(u(A),l(URL.createObjectURL(A)))}}),o?o.isLocked?e.jsxs("div",{className:"max-w-md mx-auto p-8 bg-white dark:bg-zinc-900 rounded-3xl text-center",children:[e.jsx(q,{size:32,className:"mx-auto mb-4 text-rose-500"}),e.jsx("input",{type:"password",value:L,onChange:v=>F(v.target.value),className:"w-full p-4 mb-4 border rounded-xl"}),e.jsx("button",{onClick:R,className:"w-full p-4 bg-rose-500 text-white rounded-xl",children:"Unlock"})]}):e.jsxs("div",{className:"space-y-6",onMouseMove:I,onTouchMove:I,onMouseUp:()=>{S(!1),C(!1)},onTouchEnd:()=>{S(!1),C(!1)},children:[m?e.jsx(se,{message:"Signed Successfully!",downloadUrl:m,fileName:`${h}.pdf`,onStartOver:()=>{k(null),a(null),l(null)}}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-3xl border border-gray-100 dark:border-white/5 relative aspect-[1/1.4] overflow-hidden touch-none",ref:t,onClick:v=>{if(!i||f||j)return;const A=v.currentTarget.getBoundingClientRect();x({x:(v.clientX-A.left)/A.width*100,y:(v.clientY-A.top)/A.height*100})},children:[w?e.jsx("img",{src:w,className:"w-full h-full object-contain"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(K,{className:"animate-spin text-rose-500"})}),i&&e.jsxs("div",{onMouseDown:v=>{v.stopPropagation(),S(!0)},onTouchStart:v=>{v.stopPropagation(),S(!0)},style:{left:`${P.x}%`,top:`${P.y}%`,width:`${b}px`,transform:"translate(-50%, -50%)"},className:"absolute cursor-move ring-2 ring-rose-500 rounded-sm",children:[e.jsx("img",{src:i,className:"w-full pointer-events-none"}),e.jsx("div",{onMouseDown:v=>{v.stopPropagation(),C(!0)},onTouchStart:v=>{v.stopPropagation(),C(!0)},className:"absolute -bottom-2 -right-2 w-6 h-6 bg-rose-500 rounded-full border-2 border-white cursor-nwse-resize"})]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsx("button",{onClick:()=>r.current?.click(),className:"flex-1 p-4 bg-gray-50 dark:bg-zinc-800 text-gray-900 dark:text-white border border-gray-100 dark:border-white/5 rounded-2xl font-black uppercase text-xs hover:border-rose-500 transition-all",children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(je,{size:16})," Upload Signature"]})})}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-[2rem] border border-gray-100 dark:border-white/5 shadow-sm",children:[e.jsx("label",{className:"block text-[10px] font-black uppercase tracking-widest text-gray-400 mb-3 px-1",children:"Output Filename"}),e.jsx("input",{type:"text",value:h,onChange:v=>N(v.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm dark:text-white"})]})]}),e.jsx("button",{onClick:()=>{a(null),l(null)},className:"w-full py-2 text-[10px] font-black uppercase text-gray-300 hover:text-rose-500 transition-colors",children:"Close File"})]}):e.jsxs("div",{onClick:()=>s.current?.click(),className:"border-4 border-dashed border-gray-100 dark:border-zinc-900 rounded-[2.5rem] p-12 text-center hover:bg-rose-50 transition-all cursor-pointer group",children:[e.jsx(je,{size:32,className:"mx-auto mb-4 text-rose-500"}),e.jsx("h3",{className:"text-xl font-bold dark:text-white",children:"Select PDF"})]}),e.jsx(X,{})]})}function Ua(){const s=c.useRef(null),{consumePipelineFile:r}=Y(),[t,n]=c.useState(!1),[o,a]=c.useState(null),[i,l]=c.useState(null),[d,u]=c.useState("");c.useEffect(()=>{const k=r();if(k){const h=new File([k.buffer],k.name,{type:"application/pdf"});g(h)}},[]);const g=async k=>{k.type==="application/pdf"&&(l(k),u(`repaired-${k.name.replace(".pdf","")}`),a(null))},y=async()=>{if(i){n(!0);try{const k=await i.arrayBuffer(),N=await(await ee.load(k,{ignoreEncryption:!0,throwOnInvalidObject:!1})).save(),L=new Blob([N],{type:"application/pdf"}),F=URL.createObjectURL(L);a(F),Z({name:`${d}.pdf`,tool:"Repair",size:L.size,resultUrl:F}),U.success("PDF rebuilt successfully!")}catch(k){U.error(`Repair failed: ${k.message}`)}finally{n(!1)}}},m=()=>e.jsxs("button",{onClick:y,disabled:t,className:"w-full bg-rose-500 hover:bg-rose-600 text-white font-black uppercase tracking-widest transition-all active:scale-95 disabled:opacity-50 py-4 rounded-2xl text-sm md:p-6 md:rounded-3xl md:text-xl flex items-center justify-center gap-3 shadow-lg shadow-rose-500/20",children:[t?e.jsx(K,{className:"animate-spin"}):e.jsx(_s,{size:20})," Attempt Repair"]});return e.jsxs(V,{title:"Repair PDF",description:"Fix corrupted or unreadable PDF files by rebuilding structure.",actions:i&&!o&&e.jsx(m,{}),children:[e.jsx("input",{type:"file",accept:".pdf",className:"hidden",ref:s,onChange:k=>k.target.files?.[0]&&g(k.target.files[0])}),i?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-3xl border border-gray-100 dark:border-white/5 flex items-center gap-6 shadow-sm",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-2xl flex items-center justify-center shrink-0",children:e.jsx(Bt,{size:24})}),e.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[e.jsx("h3",{className:"font-bold text-sm truncate dark:text-white",children:i.name}),e.jsxs("p",{className:"text-[10px] text-gray-400 uppercase font-black",children:[(i.size/(1024*1024)).toFixed(2)," MB"]})]}),e.jsx("button",{onClick:()=>l(null),className:"p-2 text-gray-400 hover:text-rose-500 transition-colors",children:e.jsx(Q,{size:20})})]}),e.jsx("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2rem] border border-gray-100 dark:border-white/5 space-y-8 shadow-sm",children:o?e.jsx(se,{message:"Reconstruction Complete!",downloadUrl:o,fileName:`${d}.pdf`,onStartOver:()=>{a(null),l(null)},showPreview:!0}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-3",children:"Output Filename"}),e.jsx("input",{type:"text",value:d,onChange:k=>u(k.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm dark:text-white"})]})})})]}):e.jsxs("div",{onClick:()=>!t&&s.current?.click(),className:"border-4 border-dashed border-gray-100 dark:border-zinc-900 rounded-[2.5rem] p-12 text-center hover:bg-rose-50 dark:hover:bg-rose-900/10 transition-all cursor-pointer group",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:e.jsx(Re,{size:32})}),e.jsx("h3",{className:"text-xl font-bold dark:text-white mb-2",children:"Select Corrupted PDF"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Tap to browse local files"})]}),e.jsxs("div",{className:"mt-8 p-6 bg-amber-50 dark:bg-amber-900/10 rounded-2xl border border-amber-100 dark:border-white/5 flex items-start gap-4",children:[e.jsx(Bt,{className:"text-amber-500 shrink-0",size:20}),e.jsxs("div",{className:"text-xs text-amber-700 dark:text-amber-400 leading-relaxed text-left",children:[e.jsx("p",{className:"font-black mb-1 uppercase tracking-widest text-[10px]",children:"Technical Protocol:"}),'PaperKnife rebuilds the internal cross-reference table and regenerates the file structure from scratch. This can restore access to many files that "cannot be opened."']})]}),e.jsx(X,{})]})}function $a(){const s=c.useRef(null),{consumePipelineFile:r}=Y(),[t,n]=c.useState(null),[o,a]=c.useState(!1),[i,l]=c.useState(0),[d,u]=c.useState(null),[g,y]=c.useState(0),[m,k]=c.useState("extracted-images"),[h,N]=c.useState(""),L=W.isNativePlatform();c.useEffect(()=>{const b=r();if(b){const z=new File([b.buffer],b.name,{type:"application/pdf"});E(z)}},[]);const F=async()=>{if(!t||!h)return;a(!0);const b=await re(t.file,h);b.success?(n({...t,isLocked:!1,pageCount:b.pageCount,pdfDoc:b.pdfDoc,thumbnail:b.thumbnail,password:h}),k(`${t.file.name.replace(".pdf","")}-extracted`)):U.error("Incorrect password"),a(!1)},E=async b=>{if(b.type==="application/pdf"){a(!0);try{const z=await te(b);if(z.isLocked)n({file:b,pageCount:0,isLocked:!0});else{const w=await ae(b);n({file:b,pageCount:z.pageCount,isLocked:!1,pdfDoc:w,thumbnail:z.thumbnail}),k(`${b.name.replace(".pdf","")}-extracted`)}}catch(z){console.error(z)}finally{a(!1),u(null)}}},P=async()=>{if(!(!t||!t.pdfDoc)){a(!0),l(0),y(0),await new Promise(b=>setTimeout(b,100));try{const b=new Ae;let z=0;for(let f=1;f<=t.pageCount;f++){const S=await t.pdfDoc.getPage(f),j=await S.getOperatorList();for(let C=0;C<j.fnArray.length;C++){const D=j.fnArray[C],R=j.argsArray[C]?.[0];if(typeof R=="string"&&R.startsWith("img_"))try{const T=await S.objs.get(R);if(T&&T.data){z++;const I=document.createElement("canvas");I.width=T.width,I.height=T.height;const O=I.getContext("2d");if(O){const B=O.createImageData(T.width,T.height);B.data.set(T.data),O.putImageData(B,0,0);const A=I.toDataURL("image/png").split(",")[1];b.file(`image-${z.toString().padStart(3,"0")}.png`,A,{base64:!0})}}}catch(T){console.warn("Failed to extract an image object",T)}}l(Math.round(f/t.pageCount*100))}if(z===0){U.error("No embedded images found.",{description:"The file might be heavily compressed or uses non-standard image encoding."}),a(!1);return}const w=await b.generateAsync({type:"blob"}),p=URL.createObjectURL(w);u(p),y(z),Z({name:`${m}.zip`,tool:"Extract Images",size:w.size,resultUrl:p}),U.success(`Extracted ${z} images!`)}catch(b){U.error(`Error: ${b.message}`)}finally{a(!1)}}},x=()=>e.jsx("button",{onClick:P,disabled:o,className:`w-full bg-rose-500 hover:bg-rose-600 text-white font-black uppercase tracking-widest transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-3 shadow-xl shadow-rose-500/20 ${L?"py-4 rounded-2xl text-sm":"p-6 rounded-3xl text-xl"}`,children:o?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"animate-spin"})," ",i,"%"]}):e.jsxs(e.Fragment,{children:[e.jsx(et,{size:18})," Extract Raw Images"]})});return e.jsxs(V,{title:"Extract Images",description:"Find and save all original images embedded inside the PDF.",actions:t&&!t.isLocked&&!d&&e.jsx(x,{}),children:[e.jsx("input",{type:"file",accept:".pdf",className:"hidden",ref:s,onChange:b=>b.target.files?.[0]&&E(b.target.files[0])}),t?t.isLocked?e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2.5rem] border border-gray-100 dark:border-white/5 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(q,{size:32})}),e.jsx("h3",{className:"text-2xl font-bold mb-2 dark:text-white",children:"Protected File"}),e.jsx("input",{type:"password",value:h,onChange:b=>N(b.target.value),placeholder:"Password",className:"w-full bg-gray-50 dark:bg-black rounded-2xl px-6 py-4 border border-transparent focus:border-rose-500 outline-none font-bold text-center mb-4"}),e.jsx("button",{onClick:F,disabled:!h||o,className:"w-full bg-rose-500 text-white p-4 rounded-2xl font-black uppercase text-xs",children:"Unlock"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-3xl border border-gray-100 dark:border-white/5 flex items-center gap-6",children:[e.jsx("div",{className:"w-16 h-20 bg-gray-50 dark:bg-black rounded-xl overflow-hidden shrink-0 border border-gray-100 dark:border-zinc-800 flex items-center justify-center text-rose-500",children:t.thumbnail?e.jsx("img",{src:t.thumbnail,className:"w-full h-full object-cover"}):e.jsx(je,{size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-sm truncate dark:text-white",children:t.file.name}),e.jsxs("p",{className:"text-[10px] text-gray-400 uppercase font-black",children:[t.pageCount," Pages • ",(t.file.size/(1024*1024)).toFixed(1)," MB"]})]}),e.jsx("button",{onClick:()=>n(null),className:"p-2 text-gray-400 hover:text-rose-500 transition-colors",children:e.jsx(Q,{size:20})})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2rem] border border-gray-100 dark:border-white/5 space-y-8 shadow-sm",children:[d?e.jsx(se,{message:`Successfully extracted ${g} images!`,downloadUrl:d,fileName:`${m}.zip`,onStartOver:()=>{u(null),l(0),y(0),n(null)},showPreview:!1}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-center py-2 px-4 bg-gray-50 dark:bg-black rounded-2xl border border-gray-100 dark:border-white/5",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 leading-relaxed font-medium",children:"This tool scans every page and recovers high-quality source images. Perfect for saving photos from documents."})}),e.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/10 rounded-xl border border-amber-100 dark:border-amber-900/20 text-center",children:e.jsx("p",{className:"text-[10px] text-amber-700 dark:text-amber-400 font-bold uppercase tracking-widest",children:"Note: If no images are detected, the file may have been compressed using rasterization (printing to PDF)."})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-3 tracking-widest px-1",children:"Output ZIP Name"}),e.jsx("input",{type:"text",value:m,onChange:b=>k(b.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm dark:text-white"})]}),o&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"w-full bg-gray-100 dark:bg-zinc-800 h-2 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:"bg-rose-500 h-full transition-all",style:{width:`${i}%`}})}),e.jsx("p",{className:"text-[10px] text-center font-black text-gray-400 uppercase tracking-widest animate-pulse",children:"Extracting High-Res Assets..."})]})]}),e.jsx("button",{onClick:()=>n(null),className:"w-full py-2 text-[10px] font-black uppercase text-gray-300 hover:text-rose-500 transition-colors",children:"Close File"})]})]}):e.jsxs("div",{onClick:()=>!o&&s.current?.click(),className:"border-4 border-dashed border-gray-100 dark:border-zinc-900 rounded-[2.5rem] p-12 text-center hover:bg-rose-50 dark:hover:bg-rose-900/10 transition-all cursor-pointer group",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:e.jsx(je,{size:32})}),e.jsx("h3",{className:"text-xl font-bold dark:text-white mb-2",children:"Select PDF"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Tap to search for images"})]}),e.jsx(X,{})]})}function Ta(){const s=c.useRef(null),{consumePipelineFile:r}=Y(),[t,n]=c.useState(null),[o,a]=c.useState(!1),[i,l]=c.useState(0),[d,u]=c.useState(null),[g,y]=c.useState("paperknife-grayscale"),[m,k]=c.useState(""),h=W.isNativePlatform();c.useEffect(()=>{const P=r();if(P){const x=new File([P.buffer],P.name,{type:"application/pdf"});L(x)}},[]);const N=async()=>{if(!t||!m)return;a(!0);const P=await re(t.file,m);P.success?(n({...t,isLocked:!1,pageCount:P.pageCount,pdfDoc:P.pdfDoc,thumbnail:P.thumbnail,password:m}),y(`${t.file.name.replace(".pdf","")}-grayscale`)):U.error("Incorrect password"),a(!1)},L=async P=>{if(P.type==="application/pdf"){a(!0);try{const x=await te(P);if(x.isLocked)n({file:P,pageCount:0,isLocked:!0});else{const b=await ae(P);n({file:P,pageCount:x.pageCount,isLocked:!1,pdfDoc:b,thumbnail:x.thumbnail}),y(`${P.name.replace(".pdf","")}-grayscale`)}}catch(x){console.error(x)}finally{a(!1),u(null)}}},F=async()=>{if(!(!t||!t.pdfDoc)){a(!0),l(0),await new Promise(P=>setTimeout(P,100));try{const P=await ee.create(),x=1.5;for(let p=1;p<=t.pageCount;p++){const f=await t.pdfDoc.getPage(p),S=f.getViewport({scale:x}),j=document.createElement("canvas"),C=j.getContext("2d",{alpha:!1});if(!C)continue;j.height=S.height,j.width=S.width,await f.render({canvasContext:C,viewport:S}).promise;const D=C.getImageData(0,0,j.width,j.height),R=D.data;for(let B=0;B<R.length;B+=4){const v=R[B]*.299+R[B+1]*.587+R[B+2]*.114;R[B]=v,R[B+1]=v,R[B+2]=v}C.putImageData(D,0,0);const T=j.toDataURL("image/jpeg",.75),I=await P.embedJpg(T);P.addPage([S.width,S.height]).drawImage(I,{x:0,y:0,width:S.width,height:S.height}),l(Math.round(p/t.pageCount*100))}const b=await P.save(),z=new Blob([b],{type:"application/pdf"}),w=URL.createObjectURL(z);u(w),Z({name:`${g}.pdf`,tool:"Grayscale",size:z.size,resultUrl:w})}catch(P){U.error(`Error: ${P.message}`)}finally{a(!1)}}},E=()=>e.jsx("button",{onClick:F,disabled:o,className:`w-full bg-rose-500 hover:bg-rose-600 text-white font-black uppercase tracking-widest transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-3 shadow-xl shadow-rose-500/20 ${h?"py-4 rounded-2xl text-sm":"p-6 rounded-3xl text-xl"}`,children:o?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"animate-spin"})," ",i,"%"]}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{size:18})," Convert to Grayscale ",e.jsx(le,{size:18})]})});return e.jsxs(V,{title:"PDF to Grayscale",description:"Remove colors from your PDF to save ink and storage.",actions:t&&!t.isLocked&&!d&&e.jsx(E,{}),children:[e.jsx("input",{type:"file",accept:".pdf",className:"hidden",ref:s,onChange:P=>P.target.files?.[0]&&L(P.target.files[0])}),t?t.isLocked?e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2.5rem] border border-gray-100 dark:border-white/5 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(q,{size:32})}),e.jsx("h3",{className:"text-2xl font-bold mb-2 dark:text-white",children:"Protected File"}),e.jsx("input",{type:"password",value:m,onChange:P=>k(P.target.value),placeholder:"Password",className:"w-full bg-gray-50 dark:bg-black rounded-2xl px-6 py-4 border border-transparent focus:border-rose-500 outline-none font-bold text-center mb-4"}),e.jsx("button",{onClick:N,disabled:!m||o,className:"w-full bg-rose-500 text-white p-4 rounded-2xl font-black uppercase text-xs",children:"Unlock"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-3xl border border-gray-100 dark:border-white/5 flex items-center gap-6",children:[e.jsx("div",{className:"w-16 h-20 bg-gray-50 dark:bg-black rounded-xl overflow-hidden shrink-0 border border-gray-100 dark:border-zinc-800 flex items-center justify-center text-rose-500",children:t.thumbnail?e.jsx("img",{src:t.thumbnail,className:"w-full h-full object-cover"}):e.jsx(Fe,{size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-sm truncate dark:text-white",children:t.file.name}),e.jsxs("p",{className:"text-[10px] text-gray-400 uppercase font-black",children:[t.pageCount," Pages • ",(t.file.size/(1024*1024)).toFixed(1)," MB"]})]}),e.jsx("button",{onClick:()=>n(null),className:"p-2 text-gray-400 hover:text-rose-500 transition-colors",children:e.jsx(Q,{size:20})})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-8 rounded-[2rem] border border-gray-100 dark:border-white/5 space-y-8 shadow-sm",children:[d?e.jsx(se,{message:"Grayscale Conversion Complete!",downloadUrl:d,fileName:`${g}.pdf`,onStartOver:()=>{u(null),l(0),n(null)}}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center py-2 px-4 bg-gray-50 dark:bg-black rounded-2xl border border-gray-100 dark:border-white/5",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 leading-relaxed font-medium",children:"This tool converts all document pages to black-and-white. Best for printing and reducing file size."})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-3 tracking-widest px-1",children:"Output Filename"}),e.jsx("input",{type:"text",value:g,onChange:P=>y(P.target.value),className:"w-full bg-gray-50 dark:bg-black rounded-xl px-4 py-3 border border-transparent focus:border-rose-500 outline-none font-bold text-sm dark:text-white"})]}),o&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"w-full bg-gray-100 dark:bg-zinc-800 h-2 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:"bg-rose-500 h-full transition-all",style:{width:`${i}%`}})}),e.jsx("p",{className:"text-[10px] text-center font-black text-gray-400 uppercase tracking-widest animate-pulse",children:"Removing Chromatic Data..."})]})]}),e.jsx("button",{onClick:()=>n(null),className:"w-full py-2 text-[10px] font-black uppercase text-gray-300 hover:text-rose-500 transition-colors",children:"Close File"})]})]}):e.jsxs("div",{onClick:()=>!o&&s.current?.click(),className:"border-4 border-dashed border-gray-100 dark:border-zinc-900 rounded-[2.5rem] p-12 text-center hover:bg-rose-50 dark:hover:bg-rose-900/10 transition-all cursor-pointer group",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform",children:e.jsx(Fe,{size:32})}),e.jsx("h3",{className:"text-xl font-bold dark:text-white mb-2",children:"Select PDF"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Tap to start desaturating"})]}),e.jsx(X,{})]})}const De=[{title:"Merge PDF",desc:"Combine multiple PDF files into one document.",icon:bt,implemented:!0,path:"/merge",category:"Edit",color:"text-rose-500",bg:"bg-rose-50 dark:bg-rose-900/20"},{title:"Split PDF",desc:"Visually extract specific pages or ranges.",icon:Ee,implemented:!0,path:"/split",category:"Edit",color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-900/20"},{title:"Compress PDF",desc:"Optimize your file size for easier sharing.",icon:pe,implemented:!0,path:"/compress",category:"Optimize",color:"text-amber-500",bg:"bg-amber-50 dark:bg-amber-900/20"},{title:"Protect PDF",desc:"Secure your documents with strong encryption.",icon:q,implemented:!0,path:"/protect",category:"Secure",color:"text-indigo-500",bg:"bg-indigo-50 dark:bg-indigo-900/20"},{title:"Unlock PDF",desc:"Remove passwords from your protected files.",icon:nt,implemented:!0,path:"/unlock",category:"Secure",color:"text-violet-500",bg:"bg-violet-50 dark:bg-violet-900/20"},{title:"Rotate PDF",desc:"Fix page orientation permanently.",icon:xe,implemented:!0,path:"/rotate-pdf",category:"Edit",color:"text-orange-500",bg:"bg-orange-50 dark:bg-orange-900/20"},{title:"Rearrange PDF",desc:"Drag and drop pages to reorder them.",icon:Gs,implemented:!0,path:"/rearrange-pdf",category:"Edit",color:"text-emerald-500",bg:"bg-emerald-50 dark:bg-emerald-900/20"},{title:"Page Numbers",desc:"Add numbering to your documents automatically.",icon:We,implemented:!0,path:"/page-numbers",category:"Edit",color:"text-sky-500",bg:"bg-sky-50 dark:bg-sky-900/20"},{title:"Watermark",desc:"Overlay custom text for branding or security.",icon:Me,implemented:!0,path:"/watermark",category:"Edit",color:"text-purple-500",bg:"bg-purple-50 dark:bg-purple-900/20"},{title:"Metadata",desc:"Edit document properties for better privacy.",icon:ns,implemented:!0,path:"/metadata",category:"Secure",color:"text-cyan-500",bg:"bg-cyan-50 dark:bg-cyan-900/20"},{title:"Signature",desc:"Add your electronic signature to any document.",icon:Ks,implemented:!0,path:"/signature",category:"Edit",color:"text-pink-500",bg:"bg-pink-50 dark:bg-pink-900/20"},{title:"Grayscale",desc:"Convert all document pages to black and white.",icon:Fe,implemented:!0,path:"/grayscale",category:"Optimize",color:"text-zinc-500",bg:"bg-zinc-50 dark:bg-zinc-900/20"},{title:"PDF to Image",desc:"Convert document pages into high-quality images.",icon:Ot,implemented:!0,path:"/pdf-to-image",category:"Convert",color:"text-lime-500",bg:"bg-lime-50 dark:bg-lime-900/20"},{title:"Image to PDF",desc:"Convert JPG, PNG, and WebP into a professional PDF.",icon:Vs,implemented:!0,path:"/image-to-pdf",category:"Convert",color:"text-teal-500",bg:"bg-teal-50 dark:bg-teal-900/20"},{title:"Extract Images",desc:"Pull out all original images embedded in a PDF.",icon:Ot,implemented:!0,path:"/extract-images",category:"Convert",color:"text-yellow-500",bg:"bg-yellow-50 dark:bg-yellow-900/20"},{title:"PDF to Text",desc:"Extract plain text from your PDF documents.",icon:ye,implemented:!0,path:"/pdf-to-text",category:"Convert",color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/20"},{title:"Repair PDF",desc:"Attempt to fix corrupted or unreadable documents.",icon:qs,implemented:!0,path:"/repair",category:"Optimize",color:"text-red-500",bg:"bg-red-50 dark:bg-red-900/20"}];function Ia({file:s,onClear:r,onBack:t}){const n=de(),{setPipelineFile:o}=Y(),[a,i]=c.useState(!1),l=De.slice(0,4),d=De.slice(4),u=async(g,y)=>{U.loading(`Importing ${s.name}...`,{id:"quick-load"});try{const m=await s.arrayBuffer();o({buffer:new Uint8Array(m),name:s.name,type:s.type||(s.name.endsWith(".zip")?"application/zip":"application/pdf")}),r(),n(g),U.success(`Opened in ${y}`,{id:"quick-load"})}catch{U.error("Failed to process file",{id:"quick-load"})}};return e.jsx("div",{className:"fixed inset-0 z-[200] flex items-end sm:items-center justify-center p-0 sm:p-6 bg-black/60 backdrop-blur-md animate-in fade-in duration-300",children:e.jsxs("div",{className:"w-full max-w-md bg-[#FAFAFA] dark:bg-zinc-950 rounded-t-[2.5rem] sm:rounded-[2.5rem] shadow-2xl overflow-hidden border-t border-x border-white/10 sm:border animate-in slide-in-from-bottom-full duration-500 ease-out",children:[e.jsx("div",{className:"p-6 pb-2",children:e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t&&e.jsx("button",{onClick:t,className:"p-2 -ml-2 text-gray-400 hover:text-rose-500 transition-colors",children:e.jsx(at,{className:"rotate-90",size:20})}),e.jsx("div",{className:"w-10 h-10 bg-rose-500 text-white rounded-xl flex items-center justify-center shadow-lg shadow-rose-500/20",children:e.jsx(ye,{size:20})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-lg font-black dark:text-white truncate max-w-[200px] leading-none mb-1",children:s.name}),e.jsxs("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:[(s.size/(1024*1024)).toFixed(2)," MB • PDF Document"]})]})]}),e.jsx("button",{onClick:r,className:"p-2 bg-gray-100 dark:bg-zinc-900 rounded-full text-gray-400 hover:text-rose-500 transition-colors",children:e.jsx(Q,{size:18})})]})}),e.jsxs("div",{className:"px-6 pb-6 space-y-4 max-h-[60vh] overflow-y-auto scrollbar-hide",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-[10px] font-black text-gray-400 dark:text-zinc-500 uppercase tracking-[0.2em] mb-3 ml-1",children:"Essentials"}),e.jsx("div",{className:"grid grid-cols-2 gap-2.5",children:l.map(g=>e.jsxs("button",{onClick:()=>g.path&&u(g.path,g.title),className:"flex items-center gap-3 p-3 bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-white/5 active:bg-gray-50 dark:active:bg-zinc-800 active:scale-95 transition-all shadow-sm group",children:[e.jsx("div",{className:`p-2 rounded-xl ${g.bg} ${g.color} group-active:scale-110 transition-transform`,children:e.jsx(g.icon,{size:18,strokeWidth:2.5})}),e.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-zinc-200",children:g.title.split(" ")[0]})]},g.title))})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>i(!a),className:"w-full flex items-center justify-between p-4 bg-white dark:bg-zinc-900 border border-gray-100 dark:border-white/5 rounded-2xl text-[10px] font-black uppercase tracking-widest text-gray-500 hover:text-rose-500 transition-colors shadow-sm",children:[e.jsx("span",{children:"Full Tool Catalog"}),e.jsx(at,{size:14,className:`transition-transform duration-300 ${a?"rotate-180":""}`})]}),a&&e.jsx("div",{className:"grid grid-cols-2 gap-2.5 mt-3 animate-in slide-in-from-top-2 duration-300 pb-2",children:d.map(g=>e.jsxs("button",{onClick:()=>g.path&&u(g.path,g.title),className:"flex items-center gap-3 p-3 bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-white/5 active:bg-gray-50 dark:active:bg-zinc-800 active:scale-95 transition-all shadow-sm group",children:[e.jsx("div",{className:`p-2 rounded-xl ${g.bg} ${g.color} group-active:scale-110 transition-transform`,children:e.jsx(g.icon,{size:18,strokeWidth:2.5})}),e.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-zinc-200",children:g.title.split(" ")[0]})]},g.title))})]})]})]})})}function Ba(){const[s,r]=c.useState(()=>W.isNativePlatform()?"android":"web"),[t,n]=c.useState(null),[o,a]=c.useState(!1),[i,l]=c.useState(()=>{if(typeof window<"u"){const m=localStorage.getItem("theme");if(m)return m}return"system"}),d=()=>{l(m=>m==="light"?"dark":"light")};c.useEffect(()=>{const m=localStorage.getItem("autoWipe")==="true",k=parseInt(localStorage.getItem("autoWipeTimer")||"15"),h=Pr(),N=Date.now();if(m){const F=(N-h)/6e4;(k===0||h>0&&F>=k)&&Ue().then(()=>{console.log(`Auto-Wipe triggered (${F.toFixed(1)}m inactivity).`)})}qt();const L=setInterval(qt,3e4);return()=>clearInterval(L)},[]),c.useEffect(()=>{const m=window.document.documentElement,k=h=>{let N=h;h==="system"&&(N=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),N==="dark"?(m.classList.add("dark"),m.style.colorScheme="dark"):(m.classList.remove("dark"),m.style.colorScheme="light")};if(k(i),localStorage.setItem("theme",i),i==="system"){const h=window.matchMedia("(prefers-color-scheme: dark)"),N=()=>k("system");return h.addEventListener("change",N),()=>h.removeEventListener("change",N)}},[i]),c.useEffect(()=>{const m=async h=>{try{U.loading("Importing file...",{id:"intent-load"});const N=await Dt.readFile({path:h}),L=await(await fetch(`data:application/pdf;base64,${N.data}`)).blob(),F=h.split("/").pop()||"imported-file.pdf",E=new File([L],F.endsWith(".pdf")?F:`${F}.pdf`,{type:"application/pdf"});n(E),U.success("File imported successfully!",{id:"intent-load"})}catch(N){console.error("Intent load error:",N),U.error("Failed to import file.",{id:"intent-load"})}},k=h=>{h.detail?.uri&&m(h.detail.uri)};return window.addEventListener("fileIntent",k),()=>window.removeEventListener("fileIntent",k)},[]);const u=()=>e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-[#FAFAFA] dark:bg-black min-h-[60vh]",children:e.jsx("div",{className:"w-8 h-8 border-4 border-rose-500 border-t-transparent rounded-full animate-spin"})}),g=m=>{const k=m[0];if(!k||k.type!=="application/pdf"){U.error("Please drop a valid PDF file.");return}n(k),a(!1)},y=W.isNativePlatform();return e.jsxs(Hs,{basename:y?"/":"/PaperKnife/",children:[e.jsx(Er,{}),e.jsx(Lr,{children:e.jsxs(Dr,{theme:i==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":i,toggleTheme:d,tools:De,onFileDrop:g,viewMode:s,children:[e.jsx(Ys,{position:"bottom-center",expand:!0,richColors:!0,duration:2e3,toastOptions:{className:"dark:bg-zinc-900 dark:text-white dark:border-white/10"}}),t&&!o&&e.jsx(Vr,{file:t,onClose:()=>n(null),onProcess:()=>a(!0)}),t&&o&&e.jsx(Ia,{file:t,onClear:()=>{n(null),a(!1)},onBack:()=>a(!1)}),e.jsx(c.Suspense,{fallback:e.jsx(u,{}),children:e.jsxs(Zs,{children:[e.jsx(G,{path:"/",element:s==="web"?e.jsx($r,{tools:De}):e.jsx(Tr,{toggleTheme:d,theme:i==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":i,onFileSelect:m=>g([m])})}),e.jsx(G,{path:"/android-tools",element:e.jsx(Ir,{tools:De})}),e.jsx(G,{path:"/android-history",element:e.jsx(Br,{})}),e.jsx(G,{path:"/merge",element:e.jsx(Jr,{})}),e.jsx(G,{path:"/split",element:e.jsx(ta,{})}),e.jsx(G,{path:"/protect",element:e.jsx(fa,{})}),e.jsx(G,{path:"/unlock",element:e.jsx(ka,{})}),e.jsx(G,{path:"/compress",element:e.jsx(ya,{})}),e.jsx(G,{path:"/pdf-to-image",element:e.jsx(ja,{})}),e.jsx(G,{path:"/rotate-pdf",element:e.jsx(Na,{})}),e.jsx(G,{path:"/pdf-to-text",element:e.jsx(za,{})}),e.jsx(G,{path:"/rearrange-pdf",element:e.jsx(Sa,{})}),e.jsx(G,{path:"/watermark",element:e.jsx(Fa,{})}),e.jsx(G,{path:"/page-numbers",element:e.jsx(Da,{})}),e.jsx(G,{path:"/metadata",element:e.jsx(La,{})}),e.jsx(G,{path:"/image-to-pdf",element:e.jsx(Aa,{})}),e.jsx(G,{path:"/signature",element:e.jsx(Ra,{})}),e.jsx(G,{path:"/repair",element:e.jsx(Ua,{})}),e.jsx(G,{path:"/extract-images",element:e.jsx($a,{})}),e.jsx(G,{path:"/grayscale",element:e.jsx(Ta,{})}),e.jsx(G,{path:"/about",element:e.jsx(Mr,{})}),e.jsx(G,{path:"/privacy",element:e.jsx(_r,{})}),e.jsx(G,{path:"/settings",element:e.jsx(Hr,{theme:i,setTheme:l})}),e.jsx(G,{path:"/thanks",element:e.jsx(Wr,{})})]})}),!1]})})]})}window.onerror=function(s,r,t,n,o){return alert("ERROR: "+s+`
Line: `+t+`
`+o),!1};ot.createRoot(document.getElementById("root")).render(e.jsx(Qs.StrictMode,{children:e.jsx(Ba,{})}));export{Vt as E,it as I,lt as N,St as W,br as b};
